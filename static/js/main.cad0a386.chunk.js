(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports={timeline:"HistoryTimeline_timeline__lAyEk",step:"HistoryTimeline_step__1sRwZ",selected:"HistoryTimeline_selected__2nXN5",runtimeError:"HistoryTimeline_runtimeError__sq2jZ"}},1275:function(e,t,n){},1276:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(517),o=n(518),i=n.n(o),s=n(87),u=n.n(s),l=n(519),p=n.n(l),d=n(169),m=n(171),f=n.n(m);function b(){var e="/"!==p()().location.pathname;return a.a.createElement("div",{className:f.a.Toolbar},a.a.createElement("h1",null,"Visualizing JavaScript execution"," ",a.a.createElement("em",null,"\u2014 ",a.a.createElement("span",{style:{whiteSpace:"nowrap"}},"a teaching")," ","purposes experiment")," ",a.a.createElement(d.b,{className:u()(f.a.InfoIcon,e&&f.a.atInfoPage),to:e?"/":"/info"},a.a.createElement("span",null,"i"))))}var v=n(60),h=(n(538),n(264)),x=n(522),y=n.n(x);function g(){var e=Object(v.a)(["\n            \textrm{Escape}(v, S)\n            ~Leftrightarrow~\n            exists_{f in S} \big[\n              v in \textrm{FV}(f)\n            \big]\n            lor\n            exists_{S' in S} \big[\n              \textrm{Escape}(v, S')\n            \big]\n          "],["\n            \\textrm{Escape}(v, S)\n            ~\\Leftrightarrow~\n            \\exists_{f \\in S} \\big[\n              v \\in \\textrm{FV}(f)\n            \\big]\n            \\lor\n            \\exists_{S' \\in S} \\big[\n              \\textrm{Escape}(v, S')\n            \\big]\n          "]);return g=function(){return e},e}function k(){var e=Object(v.a)(["\n            \textrm{Escape}(S)\n            ~Leftrightarrow~\n            exists_{v in S} \big[\n              \textrm{Escape}(v, S)\n            \big]\n            lor\n            exists_{S' in S} \big[\n              \textrm{Escape}(S')\n            \big]\n          "],["\n            \\textrm{Escape}(S)\n            ~\\Leftrightarrow~\n            \\exists_{v \\in S} \\big[\n              \\textrm{Escape}(v, S)\n            \\big]\n            \\lor\n            \\exists_{S' \\in S} \\big[\n              \\textrm{Escape}(S')\n            \\big]\n          "]);return k=function(){return e},e}function w(){return a.a.createElement("div",{className:"wrap"},a.a.createElement("div",{className:y.a.ProjectInfo},a.a.createElement("h2",null,"What am I looking at?"),a.a.createElement("p",null,a.a.createElement("strong",null,"A steppable visualization of JS execution.")),a.a.createElement("p",null,"Scopes, references and execution flow can be visually tracked, and while doing this the relevant syntax is broken down to its tree structure of statements and expressions."," "),a.a.createElement("p",null,"This can help people new to programming to understand the"," ",a.a.createElement("em",null,"mechanical")," and ",a.a.createElement("em",null,"structured")," way the computer works when it executes JavaScript code."),a.a.createElement("p",null,"Built at ",a.a.createElement("a",{href:"https://codaisseur.com"},"Codaisseur"),"."),a.a.createElement("h2",null,"TODO"),a.a.createElement("p",null,"Any help is appreciated, BTW!"),a.a.createElement("p",null,"Make ",a.a.createElement("input",{type:"checkbox",checked:!1})," a small garbage collector for the object graphs and"," ",a.a.createElement("input",{type:"checkbox",checked:!0}),"(actually more important) an escape analysis for the scope tree. It's daunting to see all those dangling execution scopes lying around that really are just regular stack frames because no variables escaped."),a.a.createElement("p",null,a.a.createElement("input",{type:"checkbox",checked:!1})," Make a visually pleasing and guiding object reference graph / scope tree, a better history scrubber, and other UI work."),a.a.createElement("p",null,a.a.createElement("input",{type:"checkbox",checked:!1})," Implement more of the language. The aim is not to implement a complete JavaScript runtime, and neither to make it performant. Rather we just need to support best practices and most often used functionality. The tool is only meant for teaching purposes, and aimed at beginners. If the codebase is readable, that's a bonus for students interested in how the JavaScript runtime operates."),a.a.createElement("p",null,a.a.createElement("input",{type:"checkbox",checked:!1})," Devise the criteria needed to filter the history nodes according to a multi-level detail configuration option. My initial idea was to just select statement-level nodes, or all nodes, but this doesn't work for visualizing function calls, single-expression map/filter/reduce computations, etc. Possible factors might include: AST node type, nesting depth of AST node, etc."),a.a.createElement("p",null,a.a.createElement("input",{type:"checkbox",checked:!1}),' Make a configurable "widget" version of smaller size, so that it can be embedded in the teaching materials in various forms. For example, as part of prediction-exercises.'),a.a.createElement("h2",null,"Technical details"),a.a.createElement("p",null,"Original idea, motivation and background can be found @"," ",a.a.createElement("a",{href:"https://github.com/Codaisseur/visualized-execution"},"https://github.com/Codaisseur/visualized-execution")),a.a.createElement("h3",null,"High-level overview"),a.a.createElement("p",null,"A very straight-to-the-point recursive implementation based on the parsed AST, so that the code is essentially split into a collection of functions, each performing the necessary steps for a particular node type. But, there are actually ",a.a.createElement("em",null,"two")," (mutually) recursive functions:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"evaluate"),' \u2014 This is the "actual" implementation, which both executes and evaluates a node in a context.'),a.a.createElement("li",null,a.a.createElement("code",null,"locate")," \u2014 This is a helper function that is only defines on the subset of the syntax that is used to reference variables and attributes (members). It doesn't evaluate a variable (or member) expression to it's value, but rather to information about the scope or object in which it is defined.")),a.a.createElement("p",null,"Both functions are in fact defined as ",a.a.createElement("em",null,"generator functions"),', which don\'t compute directly, but rather return a "computation stepping" generator. This "trick" enables a easy way to "report" on the intermediate steps through ',a.a.createElement("code",null,"yield"),"s."),a.a.createElement("h3",null,"Escape analysis"),a.a.createElement("p",null,"A ",a.a.createElement("em",null,"static")," escape analysis is used to remove dangling execution scopes from the visualization. Static, because we determine whether a scope is definitely escape-free based on a purely lexical analysis. It can happen that certain scopes are not marked escape-free that in fact are due to runtime considerations, but those are left out."),a.a.createElement("p",null,"A scope might have an escaping variable, if one of its subscopes has one, or one of its own variables has possibly escaped:"),a.a.createElement(h.BlockMath,{math:String.raw(k())}),a.a.createElement("p",null,"A variable can only escape via a function (though maybe nested arbitrarily deep) within that scope, which in which that variable occurs:"),a.a.createElement(h.BlockMath,{math:String.raw(g())}),a.a.createElement("p",null,"The static analysis is done (quirckily) in"," ",a.a.createElement("code",null,"src/lib/performEscapeAnalysis.js"),", and cleaning up the execution scope of a function is done after function execution ends, in the ",a.a.createElement("code",null,"invokeFunction")," function in the evaluator."),a.a.createElement("h3",null,"Garbage collection"),a.a.createElement("p",null,"TODO"),a.a.createElement("h3",null,"Object viz graph"),a.a.createElement("p",null,"TODO")))}var E=n(1),j=n.n(E),_=n(170),S=n(18),O=n(106),C=n(103),Y=n(96);!function(e){function t(e){e.state.markedSelection&&e.operation(function(){!function(e){if(!e.somethingSelected())return i(e);if(e.listSelections().length>1)return s(e);var t=e.getCursor("start"),n=e.getCursor("end"),a=e.state.markedSelection;if(!a.length)return o(e,t,n);var u=a[0].find(),l=a[a.length-1].find();if(!u||!l||n.line-t.line<=r||c(t,l.to)>=0||c(n,u.from)<=0)return s(e);for(;c(t,u.from)>0;)a.shift().clear(),u=a[0].find();for(c(t,u.from)<0&&(u.to.line-t.line<r?(a.shift().clear(),o(e,t,u.to,0)):o(e,t,u.from,0));c(n,l.to)<0;)a.pop().clear(),l=a[a.length-1].find();c(n,l.to)>0&&(n.line-l.from.line<r?(a.pop().clear(),o(e,l.from,n)):o(e,l.to,n))}(e)})}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){i(e)})}e.defineOption("styleSelectedText",!1,function(r,a,c){var o=c&&c!==e.Init;a&&!o?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof a?a:"CodeMirror-selectedtext",s(r),r.on("cursorActivity",t),r.on("change",n)):!a&&o&&(r.off("cursorActivity",t),r.off("change",n),i(r),r.state.markedSelection=r.state.markedSelectionStyle=null)});var r=8,a=e.Pos,c=e.cmpPos;function o(e,t,n,o){if(0!==c(t,n))for(var i=e.state.markedSelection,s=e.state.markedSelectionStyle,u=t.line;;){var l=u===t.line?t:a(u,0),p=u+r,d=p>=n.line,m=d?n:a(p,0),f=e.markText(l,m,{className:s});if(null==o?i.push(f):i.splice(o++,0,f),d)break;u=p}}function i(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function s(e){i(e);for(var t=e.listSelections(),n=0;n<t.length;n++)o(e,t[n].from(),t[n].to())}}(n.n(Y).a);var I=n(524),N=(n(541),n(544),n(545),I.Controlled),T=n(42),A=n.n(T),z=n(66),V=n(43),P=n.n(V);function B(e){var t=e.step,n=(t.node,t.context),r=(t.pre,t.summary),c=(t.detail,e.showBuiltins),o=e.escapeAnalysis,i=void 0!==o&&o;return a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("em",null,r)),a.a.createElement("div",{className:P.a.split},a.a.createElement("div",{className:P.a.col},a.a.createElement(M,{context:n,scopeRef:0,current:n.currentScope,showBuiltins:c,escapeAnalysis:i})),a.a.createElement("div",{className:P.a.col},n.objects.map(function(e,t){return c||!e.builtin?a.a.createElement("div",{key:t,style:{marginBottom:".4rem"}},a.a.createElement("div",null,"object #",t," - ",e.type),a.a.createElement(D,{obj:e})):null}))))}function D(e){var t=e.obj,n=Object(r.useState)(!0),c=Object(S.a)(n,2),o=c[0],i=c[1];return a.a.createElement("div",{className:P.a.obj},"function"===t.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:P.a.item},a.a.createElement("span",{className:P.a.kind,style:{cursor:"pointer"},onClick:function(){return i(!o)}},o?"hide":"show"," body")," ",o&&a.a.createElement("pre",{style:{margin:"0 0 0 .4rem",display:"inline-block",verticalAlign:"text-top"}},t.source))),Object.values(t.properties||{}).map(function(e,t){return a.a.createElement(R,{key:t,v:e})}))}function M(e){var t,n=e.context,r=e.scopeRef,c=e.current,o=e.showBuiltins,i=e.escapeAnalysis,s=void 0!==i&&i,l=n.scopes[r],p=c===r,d=Object.values(l.variables),m=o||!l._builtin,f=m?d.filter(function(e){return o||"builtin"!==e.kind}):[];if(0===f.length&&0===l.children.length)return null;if(s&&l.freed)return null;var b=0!==f.length||m?u()((t={},Object(z.a)(t,P.a.scope,!0),Object(z.a)(t,P.a.isCurrent,p),t)):"";return a.a.createElement("div",{className:b},f.map(function(e,t){return a.a.createElement(R,{key:t,v:e})}),l.children.map(function(e){return a.a.createElement("div",{key:e},a.a.createElement(M,{context:n,scopeRef:e,current:c,showBuiltins:o,escapeAnalysis:s}))}))}function R(e){var t=e.v,n=t.kind,r=t.name,c=t.value;return a.a.createElement("div",{className:P.a.var},a.a.createElement("span",{className:P.a.kind},n)," ",r," ",void 0!==c&&a.a.createElement("span",null,"return"===n?"":"= ",a.a.createElement(L,{value:c})))}function L(e){var t=e.value;return"string"===typeof t?'"'.concat(t,'"'):"object"===typeof t&&"object_ref"in t?"object #".concat(t.object_ref):"boolean"===typeof t?"".concat(t):"object"===typeof t?(console.log("object value???",t),"???"):t}var F=n(104),J=n.n(F);function H(e){var t=e.history,n=e.value,c=e.onChange,o=e.runtimeError,i={},s=Object(r.useRef)(),l=Object(r.useRef)(t.map(function(){return a.a.createRef()})),p=Object(r.useCallback)(function(e){l.current&&l.current[e]&&l.current[e].current&&l.current[e].current.focus()},[]),d=Object(r.useCallback)(function(e){37===e.keyCode?(c(n-1),p(n-1)):39===e.keyCode&&(c(n+1),p(n+1))},[n,p,c]),m=Object(r.useCallback)(function(){return i.isMouseDown=!1},[i]);document.addEventListener("mouseup",function(){return m()}),document.addEventListener("touchend",function(){return m()}),document.addEventListener("touchcancel",function(){return m()});var f=function(e){if(i.isMouseDown&&s.current){var n=s.current.getBoundingClientRect(),r=n.x,a=n.width,o=(e.clientX-r)/a,u=Math.min(t.length-1,Math.max(0,Math.floor(o*t.length)));c(u),p(u)}};document.addEventListener("mousemove",function(e){return f(e)}),document.addEventListener("touchmove",function(e){return f(e.touches[0])});var b=Object(r.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),Object.assign(i,{initialMousePos:{x:e.clientX},isMouseDown:!0})},[i]);return a.a.createElement("div",{className:J.a.timeline,onKeyDown:d,ref:s,onTouchStart:b,onMouseDown:b},t.map(function(e,t){var r;return a.a.createElement("button",{key:t,ref:l.current[t],onClick:function(e){e.preventDefault(),e.stopPropagation(),c(t),p(t)},className:u()((r={},Object(z.a)(r,J.a.step,!0),Object(z.a)(r,J.a.selected,t===parseInt(n)),r))},t+1)}),o&&a.a.createElement("div",{className:u()([J.a.step,J.a.runtimeError])}))}var W=n(525),X=n(526),q=n.n(X),G=n(101),K=n(173),U=n(102),Q=n(172),Z=n(174),$=function(e){function t(){return Object(G.a)(this,t),Object(K.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),t}(Object(Z.a)(Error)),ee=function(e){function t(){return Object(G.a)(this,t),Object(K.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),t}(Object(Z.a)(Error)),te=function(e){function t(e,n){var r;return Object(G.a)(this,t),r=Object(K.a)(this,Object(U.a)(t).call(this,"".concat(e," (").concat(n.type).concat(n.loc&&!n._builtin?" @ ".concat(n.loc.start.line,":").concat(n.loc.start.column):"",")"))),console.error("runtime error",e,n),r}return Object(Q.a)(t,e),t}(Object(Z.a)(Error)),ne=n(67);function re(e){return delete e.loc,e._builtin=!0,Object.values(e).forEach(function(e){e&&"object"===typeof e&&"type"in e?re(e):e&&e.forEach&&e.forEach(re)}),e}var ae=re(Object(ne.parse)("callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    arr.push(callback(this[i], i));\n  }\n  return arr;\n}").program.body[0].expression),ce=re(Object(ne.parse)("callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    if (callback(this[i], i))\n      arr.push(this[i]);\n  }\n  return arr;\n}").program.body[0].expression),oe=re(Object(ne.parse)("(callback, acc) => {\n  for (let i = 0; i < this.length; i++) {\n    acc = callback(acc, this[i], i);\n  }\n  return acc;\n}").program.body[0].expression),ie=re(Object(ne.parse)("x => {\n  this[this.length] = x;\n  this.length = this.length + 1;\n  return this.length;\n}").program.body[0].expression),se=re(Object(ne.parse)("x => {\n  __logs__.push(x);\n}").program.body[0].expression);function ue(){var e={objects:[]},t=e.objects.push({builtin:!0,type:"function",node:se,source:"(builtin)"})-1,n=e.objects.push({builtin:!0,type:"object",properties:{log:{name:"log",kind:"property",value:{object_ref:t}}}})-1,r=e.objects.push({builtin:!0,type:"object",properties:{}})-1,a=e.objects.push({builtin:!0,type:"function",node:ae,source:"(builtin)"})-1,c=e.objects.push({builtin:!0,type:"function",node:ce,source:"(builtin)"})-1,o=e.objects.push({builtin:!0,type:"function",node:oe,source:"(builtin)"})-1,i=e.objects.push({builtin:!0,type:"function",node:ie,source:"(builtin)"})-1,s=e.objects.push({builtin:!0,type:"array",properties:{map:{name:"map",kind:"property",value:{object_ref:a}},filter:{name:"filter",kind:"property",value:{object_ref:c}},reduce:{name:"reduce",kind:"property",value:{object_ref:o}},push:{name:"push",kind:"property",value:{object_ref:i}}},prototype:r})-1;return{scopes:[{variables:{Object:{kind:"builtin",name:"Object",value:{object_ref:r}},Array:{kind:"builtin",name:"Array",value:{object_ref:s}},__logs__:{kind:"builtin",name:"__logs__",value:{object_ref:e.objects.push({builtin:!0,type:"array",prototype:s,properties:{}})-1}},console:{kind:"builtin",name:"console",value:{object_ref:n}}},children:[]}],objects:e.objects,currentScope:0,sourceCode:"",getSourceCodeRange:function(e){if(e._builtin)return"(builtin)";if(e.loc){var t=e.loc,n=this.sourceCode.split("\n").slice(t.start.line-1,t.end.line);return 1===n.length?n[0]=n[0].slice(t.start.column,t.end.column):n.length>0&&(n[0]=n[0].slice(t.start.column),n[n.length-1]=n[n.length-1].slice(0,t.end.column)),n.join("\n")}return"(no loc)"}}}var le=n(105),pe=function e(t){Object(G.a)(this,e),this.value=t};pe.from=j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(t(),"t0",2);case 2:return e.abrupt("return",e.t0);case 5:if(e.prev=5,e.t1=e.catch(0),!(e.t1 instanceof pe)){e.next=11;break}return e.abrupt("return",e.t1.value);case 11:throw e.t1;case 12:case"end":return e.stop()}},e,null,[[0,5]])});var de=j.a.mark(ve);function me(e,t,n){var r=e.scopes[n];return r.variables[t]?n:void 0!==r.parent?me(e,t,r.parent):null}function fe(e,t,n){var r=e.objects[n];return void 0!==r.properties[t]?n:void 0!==r.prototype?fe(e,t,r.prototype):null}var be={};function ve(e,t){var n,r,a=arguments;return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(n=a.length>2&&void 0!==a[2]?a[2]:{},r=be[e.type]){c.next=5;break}throw console.error("Couldn't find locator for AST node of type: ".concat(e.type),e),new $("Couldn't find locator for AST node of type: ".concat(e.type));case 5:return c.delegateYield(r(e,t,n),"t0",6);case 6:return c.abrupt("return",c.t0);case 7:case"end":return c.stop()}},de)}be.Identifier=j.a.mark(function e(t,n){var r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=me(n,t.name,n.currentScope))){e.next=3;break}throw new te("variable ".concat(t.name," is not defined [lookup identifier]"),t);case 3:return e.next=5,{context:n,node:t,summary:"looked up variable ".concat(t.name),detail:2};case 5:return e.abrupt("return",{scope_ref:r,name:t.name,site:n.scopes[r].variables[t.name]});case 6:case"end":return e.stop()}},e)}),be.MemberExpression=j.a.mark(function e(t,n,r){var a,c,o,i,s,u,l;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.makeIfNonexistent,c=void 0!==a&&a,e.delegateYield(ke(t.object,n),"t0",2);case 2:if("object"===typeof(o=e.t0).value&&"object_ref"in o.value){e.next=5;break}throw new te("cannot use memberexpression for non-object",t.object);case 5:if(i=o.value.object_ref,!t.computed){e.next=11;break}return e.delegateYield(ke(t.property,n),"t1",8);case 8:s=e.t1.value,e.next=14;break;case 11:if("Identifier"===t.property.type){e.next=13;break}throw new $;case 13:s=t.property.name;case 14:if(null!==(u=fe(n,s,i))){e.next=24;break}if(!c){e.next=23;break}return l=n.objects[i].properties[s]={name:s,kind:"property"},e.next=20,{context:n,node:t,summary:"made new property ".concat(s),detail:2};case 20:return e.abrupt("return",{accessing_object_ref:i,object_ref:i,name:s,site:l});case 23:return e.abrupt("return",null);case 24:return e.next=26,{context:n,node:t,summary:"looked up property ".concat(t.name),detail:2};case 26:return e.abrupt("return",{accessing_object_ref:i,object_ref:u,name:s,site:n.objects[u].properties[s]});case 27:case"end":return e.stop()}},e)});var he=j.a.mark(ke),xe=j.a.mark(je),ye=j.a.mark(_e),ge={};function ke(e){var t,n,r,a=arguments;return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=a.length>1&&void 0!==a[1]?a[1]:ue(),n=a.length>2&&void 0!==a[2]?a[2]:{},r=ge[e.type]){c.next=6;break}throw console.error("Couldn't find evaluator for AST node of type: ".concat(e.type),e),new $("Couldn't find evaluator for AST node of type: ".concat(e.type));case 6:return c.delegateYield(r(e,t,n),"t0",7);case 7:return c.abrupt("return",c.t0);case 8:case"end":return c.stop()}},he)}function we(e,t,n){if("+"===e)return t+n;if("-"===e)return t-n;if("*"===e)return t*n;if("&&"===e)return t&&n;if("||"===e)return t||n;if("<"===e)return t<n;if("<="===e)return t<=n;if("=="===e)return t==n;if(">"===e)return t>n;if(">="===e)return t>=n;throw new $("operator not implemented: ".concat(e))}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.parentScope,r=void 0===n?e.currentScope:n,a=t._builtin,c={parent:r,_builtin:void 0===a?e.scopes[e.currentScope]._builtin:a,children:[],variables:{}},o=e.scopes.push(c)-1;return e.scopes[r]&&e.scopes[r].children.push(o),[c,o]}function je(e,t,n,r){var a,c,o,i,s,u,l,p,d,m,f,b,v,h,x,y,g;return j.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a=e.definingScope,e.arrow,c=e.node,o=Ee(r,{parentScope:a,_builtin:!!c.body._builtin}),i=Object(S.a)(o,2),s=i[0],u=i[1],n&&(s.variables[n.name]=n),l=!0,p=!1,d=void 0,k.prev=6,m=c.params.entries()[Symbol.iterator]();case 8:if(l=(f=m.next()).done){k.next=19;break}if(b=f.value,v=Object(S.a)(b,2),h=v[0],"Identifier"===(x=v[1]).type){k.next=15;break}throw new $("Sorry, can't deal with ".concat(x.type," params yet :("));case 15:s.variables[x.name]={name:x.name,kind:"param",value:t[h].value};case 16:l=!0,k.next=8;break;case 19:k.next=25;break;case 21:k.prev=21,k.t0=k.catch(6),p=!0,d=k.t0;case 25:k.prev=25,k.prev=26,l||null==m.return||m.return();case 28:if(k.prev=28,!p){k.next=31;break}throw d;case 31:return k.finish(28);case 32:return k.finish(25);case 33:if(y=Object(le.a)({},r,{currentScope:u}),"BlockStatement"!==c.body.type){k.next=39;break}return k.delegateYield(pe.from(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ke(c.body,y,{skipScope:!0}),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e)})),"t1",36);case 36:g=k.t1,k.next=41;break;case 39:return k.delegateYield(ke(c.body,y),"t2",40);case 40:g=k.t2;case 41:return c._hasEscapes||(s.freed=!0),k.abrupt("return",g);case 43:case"end":return k.stop()}},xe,null,[[6,21,25,33],[26,,28,32]])}function _e(e,t){var n,r;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,{context:t,node:e,pre:!0,detail:1,summary:"for test"};case 2:return a.delegateYield(ke(e,t),"t0",3);case 3:return n=a.t0,r=n.value,a.next=7,{context:t,node:e,detail:1,summary:"for test checked"};case 7:return a.abrupt("return",r);case 8:case"end":return a.stop()}},ye)}ge.File=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ke(t.program,n),"t0",1);case 1:case"end":return e.stop()}},e)}),ge.Program=j.a.mark(function e(t,n){var r,a,c,o,i,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,a=!1,c=void 0,e.prev=3,o=t.body[Symbol.iterator]();case 5:if(r=(i=o.next()).done){e.next=11;break}return s=i.value,e.delegateYield(ke(s,n),"t0",8);case 8:r=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(3),a=!0,c=e.t1;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!a){e.next=23;break}throw c;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}},e,null,[[3,13,17,25],[18,,20,24]])}),ge.BlockStatement=j.a.mark(function e(t,n,r){var a,c,o,i,s,u,l,p,d;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.skipScope||(a=Ee(n),c=Object(S.a)(a,2),c[0],o=c[1],n=Object(le.a)({},n,{currentScope:o})),i=!0,s=!1,u=void 0,e.prev=5,l=t.body[Symbol.iterator]();case 7:if(i=(p=l.next()).done){e.next=13;break}return d=p.value,e.delegateYield(ke(d,n),"t0",10);case 10:i=!0,e.next=7;break;case 13:e.next=19;break;case 15:e.prev=15,e.t1=e.catch(5),s=!0,u=e.t1;case 19:e.prev=19,e.prev=20,i||null==l.return||l.return();case 22:if(e.prev=22,!s){e.next=25;break}throw u;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,null,[[5,15,19,27],[20,,22,26]])}),ge.ReturnStatement=j.a.mark(function e(t,n){var r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,pre:!0,summary:"compute return value",detail:1};case 2:return e.delegateYield(ke(t.argument,n),"t0",3);case 3:return r=e.t0,n.scopes[n.currentScope].variables["[[return]]"]={kind:"return",value:r.value},e.next=7,{context:n,node:t,summary:"computed return value",detail:1};case 7:throw new pe(r);case 8:case"end":return e.stop()}},e)}),ge.CallExpression=j.a.mark(function e(t,n){var r,a,c,o,i,s,u,l,p,d,m,f,b,v;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.callee,a=t.arguments,e.next=3,{context:n,node:t,pre:!0,summary:"evaluate call",detail:2};case 3:return e.delegateYield(ke(r,n),"t0",4);case 4:if("object_ref"in(c=e.t0).value){e.next=7;break}throw new te("Cannot call non-function #1",r);case 7:if((o=n.objects[c.value.object_ref])&&"function"===o.type){e.next=10;break}throw new te("Cannot call non-function #2",r);case 10:o.arrow||("MemberExpression"===r.type?(s=c.accessing_object_ref,i={kind:"this",name:"this",value:{object_ref:s}}):i={kind:"this",name:"this",value:void 0}),u=[],l=!0,p=!1,d=void 0,e.prev=15,m=a[Symbol.iterator]();case 17:if(l=(f=m.next()).done){e.next=26;break}return b=f.value,e.t1=u,e.delegateYield(ke(b,n),"t2",21);case 21:e.t3=e.t2,e.t1.push.call(e.t1,e.t3);case 23:l=!0,e.next=17;break;case 26:e.next=32;break;case 28:e.prev=28,e.t4=e.catch(15),p=!0,d=e.t4;case 32:e.prev=32,e.prev=33,l||null==m.return||m.return();case 35:if(e.prev=35,!p){e.next=38;break}throw d;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.next=42,{context:n,node:t,pre:!0,summary:"invoke function",detail:2};case 42:return e.delegateYield(je(o,u,i,n),"t5",43);case 43:return v=e.t5,e.next=46,{context:n,node:t,summary:"evaluated call",detail:2};case 46:return e.abrupt("return",v);case 47:case"end":return e.stop()}},e,null,[[15,28,32,40],[33,,35,39]])}),ge.FunctionDeclaration=j.a.mark(function e(t,n){var r,a,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.async&&!t.generator){e.next=2;break}throw new ee("Async and generator functions are not supported");case 2:if(t.id&&"Identifier"===t.id.type){e.next=4;break}throw new te("should not happen",t.id);case 4:return e.next=6,{context:n,node:t,pre:!0,summary:"declare function ".concat(t.id.name),detail:1};case 6:return r=n.scopes[n.currentScope],a={type:"function",arrow:!1,definingScope:n.currentScope,node:t,source:n.getSourceCodeRange(t),properties:{}},c=n.objects.push(a)-1,r.variables[t.id.name]={name:t.id.name,kind:"fundecl",value:{object_ref:c}},e.next=12,{context:n,node:t,summary:"declared function ".concat(t.id.name),detail:1};case 12:case"end":return e.stop()}},e)}),ge.ObjectProperty=j.a.mark(function e(t,n,r){var a,c,o,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.object_ref,"Identifier"===(c=t.key).type){e.next=4;break}throw new $("Computed or otherwise property keys are sadly not implemented yet :(");case 4:return o=n.objects[a],e.delegateYield(ke(t.value,n),"t0",6);case 6:i=e.t0,o.properties[c.name]={name:c.name,kind:"property",value:i};case 8:case"end":return e.stop()}},e)}),ge.ObjectExpression=j.a.mark(function e(t,n){var r,a,c,o,i,s,u,l;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,pre:!0,summary:"evaluate obj expression",detail:2};case 2:r={type:"object",prototype:n.scopes[0].variables.Object.value.object_ref,properties:{}},a=n.objects.push(r)-1,c=!0,o=!1,i=void 0,e.prev=7,s=t.properties[Symbol.iterator]();case 9:if(c=(u=s.next()).done){e.next=15;break}return l=u.value,e.delegateYield(ke(l,n,{object_ref:a}),"t0",12);case 12:c=!0,e.next=9;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),o=!0,i=e.t1;case 21:e.prev=21,e.prev=22,c||null==s.return||s.return();case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,{context:n,node:t,summary:"evaluated obj expression",detail:2};case 31:return e.abrupt("return",{value:{object_ref:a}});case 32:case"end":return e.stop()}},e,null,[[7,17,21,29],[22,,24,28]])}),ge.ArrayExpression=j.a.mark(function e(t,n){var r,a,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,pre:!0,summary:"evaluate array expression",detail:2};case 2:r={type:"array",prototype:n.scopes[0].variables.Array.value.object_ref,properties:{}},a=n.objects.push(r)-1,c=0;case 5:if(!(c<t.elements.length)){e.next=13;break}return e.t0=c,e.delegateYield(ke(t.elements[c],n),"t1",8);case 8:e.t2=e.t1.value,r.properties[c]={name:e.t0,kind:"property",value:e.t2};case 10:c++,e.next=5;break;case 13:return r.properties.length={name:"length",kind:"property",value:t.elements.length},e.next=16,{context:n,node:t,summary:"evaluated array expression",detail:2};case 16:return e.abrupt("return",{value:{object_ref:a}});case 17:case"end":return e.stop()}},e)}),ge.ArrowFunctionExpression=j.a.mark(function e(t,n){var r,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.async&&!t.generator){e.next=2;break}throw new ee("Async and generator functions are not supported");case 2:return r={type:"function",arrow:!0,definingScope:n.currentScope,node:t,source:n.getSourceCodeRange(t),properties:{}},a=n.objects.push(r)-1,e.next=6,{context:n,node:t,summary:"evaluated arrow function",detail:2};case 6:return e.abrupt("return",{value:{object_ref:a}});case 7:case"end":return e.stop()}},e)}),ge.UpdateExpression=j.a.mark(function e(t,n){var r,a,c,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.operator,a=t.prefix,t.loc,c=t.argument,"++"===r||"--"===r){e.next=3;break}throw new ee("update expression with operator ".concat(r));case 3:return e.next=5,{context:n,node:t,pre:!0,summary:"evaluate update expression",detail:2};case 5:if(!a){e.next=8;break}return e.delegateYield(ke(c,n),"t0",7);case 7:o=e.t0;case 8:return e.delegateYield(ke({type:"AssignmentExpression",_builtin:!0,operator:"=",left:c,right:{type:"BinaryExpression",_builtin:!0,operator:r[0],left:c,right:{type:"NumericLiteral",_builtin:!0,value:1}}},n),"t1",9);case 9:if(a){e.next=12;break}return e.delegateYield(ke(c,n),"t2",11);case 11:o=e.t2;case 12:return e.next=14,{context:n,node:t,summary:"evaluated update expression",detail:2};case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}},e)}),ge.BinaryExpression=j.a.mark(function e(t,n){var r,a,c,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.left,a=t.right,e.next=3,{context:n,node:t,pre:!0,summary:"evaluate binary expression",detail:2};case 3:return e.delegateYield(ke(r,n),"t0",4);case 4:if(c=e.t0.value,"&&"!==t.operator||c){e.next=7;break}return e.abrupt("return",c);case 7:if("||"!==t.operator||!c){e.next=9;break}return e.abrupt("return",c);case 9:return e.delegateYield(ke(a,n),"t1",10);case 10:return o=e.t1.value,e.next=13,{context:n,node:t,summary:"evaluated binary expression",detail:2};case 13:return e.abrupt("return",{value:we(t.operator,c,o)});case 14:case"end":return e.stop()}},e)}),ge.ThisExpression=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ke(Object(le.a)({},t,{type:"Identifier",name:"this"}),n),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e)}),ge.Identifier=j.a.mark(function e(t,n){var r,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==t.name){e.next=4;break}return e.next=3,{node:t,summary:"evaluated undefined",detail:2};case 3:return e.abrupt("return",{value:void 0});case 4:return e.delegateYield(ve(t,n),"t0",5);case 5:return r=e.t0,a=r.site,e.next=9,{context:n,node:t,summary:"evaluated variable",detail:2};case 9:return e.abrupt("return",{value:a.value});case 10:case"end":return e.stop()}},e)}),ge.MemberExpression=j.a.mark(function e(t,n){var r,a,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ve(t,n),"t0",1);case 1:if(r=e.t0){e.next=6;break}return e.next=5,{context:n,node:t,summary:"property does not exist",detail:2};case 5:return e.abrupt("return",{value:void 0});case 6:return a=r.site,c=r.accessing_object_ref,e.next=9,{context:n,node:t,summary:"evaluated property to ".concat(a.value),detail:2};case 9:return e.abrupt("return",{value:a.value,accessing_object_ref:c});case 10:case"end":return e.stop()}},e)}),ge.AssignmentExpression=j.a.mark(function e(t,n){var r,a,c,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.left,a=t.right,"="===t.operator){e.next=3;break}throw new ee("assignment with operator ".concat(t.operator));case 3:return e.delegateYield(ve(r,n,{makeIfNonexistent:!0}),"t0",4);case 4:return c=e.t0,o=c.site,e.delegateYield(ke(a,n),"t1",7);case 7:o.value=e.t1.value;case 8:case"end":return e.stop()}},e)}),ge.ForStatement=j.a.mark(function e(t,n){var r,a,c,o,i,s,u,l;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.init,a=t.test,c=t.update,o=t.body,e.next=3,{context:n,node:t,pre:!0,detail:1,summary:"encountered for-loop"};case 3:return i=Ee(n),s=Object(S.a)(i,2),s[0],u=s[1],l=Object(le.a)({},n,{currentScope:u}),e.delegateYield(ke(r,l),"t0",6);case 6:return e.delegateYield(_e(a,l),"t1",7);case 7:if(!e.t1){e.next=16;break}return e.delegateYield(ke(o,l),"t2",9);case 9:return e.next=11,{context:n,node:c,pre:!0,detail:1,summary:"for update"};case 11:return e.delegateYield(ke(c,l),"t3",12);case 12:return e.next=14,{context:n,node:c,detail:1,summary:"for update - done"};case 14:e.next=6;break;case 16:return e.next=18,{context:n,node:t,detail:1,summary:"completed for-loop"};case 18:case"end":return e.stop()}},e)}),ge.IfStatement=j.a.mark(function e(t,n){var r,a,c,o,i,s,u;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.test,a=t.consequent,c=t.alternate,e.next=3,{context:n,node:t,pre:!0,detail:1,summary:"encountered if-statement"};case 3:return o=Ee(n),i=Object(S.a)(o,2),i[0],s=i[1],u=Object(le.a)({},n,{currentScope:s}),e.delegateYield(ke(r,u),"t0",6);case 6:if(!e.t0.value){e.next=11;break}return e.delegateYield(ke(a,u),"t1",9);case 9:e.next=13;break;case 11:if(!c){e.next=13;break}return e.delegateYield(ke(c,u),"t2",13);case 13:return e.next=15,{context:n,node:t,detail:1,summary:"completed if-statement"};case 15:case"end":return e.stop()}},e)}),ge.ExpressionStatement=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,pre:!0,summary:"compute expression statement",detail:1};case 2:return e.delegateYield(ke(t.expression,n),"t0",3);case 3:return e.next=5,{context:n,node:t,summary:"computed expression statement",detail:1};case 5:case"end":return e.stop()}},e)}),ge.VariableDeclaration=j.a.mark(function e(t,n){var r,a,c,o,i,s,u;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.kind,e.next=3,{context:n,node:t,pre:!0,summary:"".concat(r," variable declaration"),detail:1};case 3:a=!0,c=!1,o=void 0,e.prev=6,i=t.declarations[Symbol.iterator]();case 8:if(a=(s=i.next()).done){e.next=14;break}return u=s.value,e.delegateYield(ke(u,n,{kind:r}),"t0",11);case 11:a=!0,e.next=8;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(6),c=!0,o=e.t1;case 20:e.prev=20,e.prev=21,a||null==i.return||i.return();case 23:if(e.prev=23,!c){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return e.next=30,{context:n,node:t,summary:"completed ".concat(r," variable declaration"),detail:1};case 30:case"end":return e.stop()}},e,null,[[6,16,20,28],[21,,23,27]])}),ge.VariableDeclarator=j.a.mark(function e(t,n,r){var a,c,o,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("let"===(a=r.kind)||"const"===a){e.next=3;break}throw new ee("only let/const supported, not ".concat(a));case 3:if("Identifier"===t.id.type){e.next=5;break}throw new $("Not yet able to declare non-identifiers :(");case 5:return c=n.scopes[n.currentScope],o=t.id.name,c.variables[o]={name:o,kind:a},e.next=10,{context:n,node:t.id,summary:"declared ".concat(o),detail:2};case 10:if(!t.init){e.next=16;break}return e.delegateYield(ke(t.init,n),"t0",12);case 12:return i=e.t0.value,c.variables[o].value=i,e.next=16,{context:n,node:t,summary:"initialized ".concat(o),detail:2};case 16:case"end":return e.stop()}},e)}),ge.NullLiteral=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,summary:"evaluated null",detail:2};case 2:return e.abrupt("return",{value:null});case 3:case"end":return e.stop()}},e)}),ge.StringLiteral=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,summary:'evaluated "'.concat(t.value,'"'),detail:2};case 2:return e.abrupt("return",{value:t.value});case 3:case"end":return e.stop()}},e)}),ge.NumericLiteral=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,summary:"evaluated ".concat(t.value),detail:2};case 2:return e.abrupt("return",{value:t.value});case 3:case"end":return e.stop()}},e)}),ge.BooleanLiteral=j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{context:n,node:t,summary:"evaluated ".concat(t.value),detail:2};case 2:return e.abrupt("return",{value:t.value});case 3:case"end":return e.stop()}},e)});var Se=n(97),Oe=n.n(Se);function Ce(e){Oe()(e,{Identifier:function(e){if(e.isReferencedIdentifier())for(var t=e.node.name,n=0;e=e.getFunctionParent();){if(e.scope.bindings[t]){e.node._hasEscapes=e.node._hasEscapes||n>0;break}e.node._FRV=e.node._FRV||{},e.node._FRV[t]=!0,n++}}})}var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})};function Ie(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(_.a)(j.a.mark(function e(t){var n,r,a,c,o,i,s,u,l,p,d;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ce(n=Object(W.parse)(t)),(r=ue()).sourceCode=t,a=ke(n,r),c=[],o=0,e.prev=7,i=!0,s=!1,u=void 0,e.prev=11,l=a[Symbol.iterator]();case 13:if(i=(p=l.next()).done){e.next=25;break}if((d=p.value).node._builtin||c.push(q()(d)),!(o++>1e3)){e.next=19;break}return console.error("too many steps",c),e.abrupt("return",{history:c,runtimeError:new Error("too many steps!")});case 19:if(o%100!==0){e.next=22;break}return e.next=22,Ye();case 22:i=!0,e.next=13;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(11),s=!0,u=e.t0;case 31:e.prev=31,e.prev=32,i||null==l.return||l.return();case 34:if(e.prev=34,!s){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.next=49;break;case 41:if(e.prev=41,e.t1=e.catch(7),!(e.t1 instanceof te)){e.next=48;break}return console.log("caught runtime error:",e.t1),e.abrupt("return",{history:c,runtimeError:e.t1});case 48:throw e.t1;case 49:return e.abrupt("return",{history:c});case 50:case"end":return e.stop()}},e,null,[[7,41],[11,27,31,39],[32,,34,38]])}))).apply(this,arguments)}var Te=n(527),Ae=n.n(Te);function ze(){var e=Object(v.a)(["\n      let x = 0;\n      let y = 0;\n\n      function mf(n) {\n        return () => {\n          function bla() {\n            // let n = 6;\n            y = n + 2;\n          }\n          bla();\n        };\n      }\n\n      const o = {};\n      o.f = mf(10);\n\n      o.f();\n    "]);return ze=function(){return e},e}function Ve(){var e=Object(v.a)(["\n      const result = [10, 2, 3, 6]\n        .map(n => n - 2)\n        .filter(n => n > 3)\n        .reduce((a, b) => a + b, 0);\n    "]);return Ve=function(){return e},e}function Pe(){var e=Object(v.a)(['\n      let adjective = "beautiful";\n      function make(a) {\n        return thing => {\n          return a + " " + adjective + " " + thing;\n        };\n      }\n      const definite = make("the");\n      const s1 = definite("variable");\n      adjective = "nested";\n      const s2 = definite("scope");\n    ']);return Pe=function(){return e},e}function Be(){var e=Object(v.a)(['\n      const fruits = ["pear", "banana"];\n      fruits.push("jello");\n      const jello = fruits[fruits.length - 1];\n    ']);return Be=function(){return e},e}function De(){var e=Object(v.a)(["\n      let n = 42;\n    "]);return De=function(){return e},e}var Me=Object(C.a)("code"),Re=Object(C.a)("maxdetail"),Le=Object(C.a)("stepno"),Fe=Object(C.a)("showbuiltins"),Je=Object(C.a)("escapeAnalysis"),He=[{title:"just a variable",code:Object(O.a)(De())},{title:"array push and access",code:Object(O.a)(Be())},{title:"a closure and correct scoping",code:Object(O.a)(Pe())},{title:"map+filter+reduce expression",code:Object(O.a)(Ve())},{title:"variable escapes",code:Object(O.a)(ze())}],We={mode:"text/javascript",theme:"jsviz",lineNumbers:!1,smartIndent:!0,tabSize:2,indentWithTabs:!1,styleSelectedText:!0};function Xe(){var e=Object(r.useRef)({editor:null,marker:null}),t=Me("const result = [10, 2, 3, 6]\n  .map(n => n - 2)\n  .filter(n => n > 3)\n  .reduce((a, b) => a + b, 0);"),n=Object(S.a)(t,2),c=n[0],o=n[1],i=Ae()(Object(_.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),[c]),s=i.loading,u=i.value,l=i.error;l&&console.error("Compile error",l);var p=Fe(!1),d=Object(S.a)(p,2),m=d[0],f=d[1],b=Le(0),v=Object(S.a)(b,2),h=v[0],x=v[1],y=Re(2),g=Object(S.a)(y,2),k=g[0],w=g[1],E=Je(!0),O=Object(S.a)(E,2),C=O[0],Y=O[1],I=u&&u.history.length>0?u.history.filter(function(e){return e.detail<=k}):[],T=Math.max(0,Math.min(h,I.length-1)),z=I?I[T]:null;return Object(r.useEffect)(function(){if(e.current.editor&&(e.current.marker&&e.current.marker.clear(),z)){var t=e.current.editor.getDoc(),n=z.node.loc;n&&(e.current.marker=t.markText({line:n.start.line-1,ch:n.start.column},{line:n.end.line-1,ch:n.end.column},{className:z.pre?A.a.markedPre:A.a.markedPost}))}},[e,z]),a.a.createElement("div",null,a.a.createElement("div",{className:A.a.code},a.a.createElement(N,{className:"editable",options:We,editorDidMount:function(t){e.current.editor=t},value:c,onBeforeChange:function(e,t,n){o(n||"")}})),(s||l||0===I.length)&&a.a.createElement("hr",{className:A.a.emptyDivider}),s&&a.a.createElement("div",{className:A.a.main},a.a.createElement("div",{className:A.a.loading},"Loading...")),l&&a.a.createElement("div",{className:A.a.main},a.a.createElement("div",{className:A.a.error},a.a.createElement("p",null,"Compile error: ",l.message))),u&&I&&a.a.createElement("div",null,a.a.createElement(H,{value:T,onChange:x,history:I,runtimeError:u.runtimeError}),a.a.createElement("div",{className:A.a.main},a.a.createElement("div",null,a.a.createElement("select",{value:"",onChange:function(e){var t=He.find(function(t){return t.title===e.target.value});t&&o(t.code)}},a.a.createElement("option",{value:""},"-- Select a code preset --"),He.map(function(e){var t=e.title;e.code;return a.a.createElement("option",{key:t},t)}))," / ",a.a.createElement("label",null,"Expression detail?"," ",a.a.createElement("input",{type:"checkbox",checked:2===k,onChange:function(){return w(3-k)}}))," / ",a.a.createElement("label",null,"Show builtins?"," ",a.a.createElement("input",{type:"checkbox",checked:m,onChange:function(){return f(!m)}}))," / ",a.a.createElement("label",null,"Escape analysis?"," ",a.a.createElement("input",{type:"checkbox",checked:C,onChange:function(){return Y(!C)}}))),z&&a.a.createElement(B,{step:z,showBuiltins:m,escapeAnalysis:C}),u.runtimeError&&a.a.createElement("div",{className:A.a.error},a.a.createElement("p",null,"Runtime error: ",u.runtimeError.message)))))}var qe=n(59);n(1275),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(c.render)(a.a.createElement(function(){return a.a.createElement("div",{className:i.a.App},a.a.createElement(d.a,null,a.a.createElement(b,null),a.a.createElement(qe.Switch,null,a.a.createElement(qe.Route,{path:"/info",component:w}),a.a.createElement(qe.Route,{component:Xe}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},171:function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__3XXhw",InfoIcon:"Toolbar_InfoIcon__2l_1D",atInfoPage:"Toolbar_atInfoPage__3rO4Q"}},42:function(e,t,n){e.exports={code:"VisualizedExecution_code__1pKc_",markedPre:"VisualizedExecution_markedPre__3ef4y",markedPost:"VisualizedExecution_markedPost__2nVnG",emptyDivider:"VisualizedExecution_emptyDivider__1bO_v",main:"VisualizedExecution_main__uV1NH",loading:"VisualizedExecution_loading__19gOH",error:"VisualizedExecution_error__Gyjdt"}},43:function(e,t,n){e.exports={obj:"Viz_obj__3PiQ5",scope:"Viz_scope__ynAbk",isCurrent:"Viz_isCurrent__2YlfD",item:"Viz_item__3y3Ut",var:"Viz_var__kCyoJ",kind:"Viz_kind__11Xx-",split:"Viz_split__1K8Ln",col:"Viz_col__2BwqL"}},518:function(e,t,n){},522:function(e,t,n){e.exports={ProjectInfo:"ProjectInfo_ProjectInfo__2IkWh"}},528:function(e,t,n){e.exports=n(1276)},545:function(e,t,n){}},[[528,1,2]]]);
//# sourceMappingURL=main.cad0a386.chunk.js.map