{"version":3,"sources":["components/HistoryTimeline.module.scss","components/Toolbar.js","components/ProjectInfo.js","codemirror/mark-selection.js","codemirror/apply-plugins.js","codemirror/codemirror.js","components/Viz.js","components/HistoryTimeline.js","lib/errors.js","lib/context.js","lib/return.js","lib/locate.js","lib/evaluate.js","lib/performEscapeAnalysis.js","lib/record.js","components/VisualizedExecution.js","serviceWorker.js","index.js","App.js","components/Toolbar.module.scss","components/VisualizedExecution.module.scss","components/Viz.module.scss","components/ProjectInfo.module.scss"],"names":["module","exports","timeline","step","selected","runtimeError","Toolbar","atInfoPage","useReactRouter","location","pathname","react_default","a","createElement","className","styles","style","whiteSpace","react_router_dom","cx","InfoIcon","to","ProjectInfo","type","checked","href","react_katex","math","String","raw","_templateObject","_templateObject2","CodeMirror","onCursorActivity","cm","state","markedSelection","operation","somethingSelected","clear","listSelections","length","reset","from","getCursor","array","coverRange","coverStart","find","coverEnd","line","CHUNK_SIZE","cmp","shift","pop","update","onChange","defineOption","val","old","prev","Init","markedSelectionStyle","on","off","Pos","cmpPos","addAt","cls","start","endLine","atEnd","end","mark","markText","push","splice","i","ranges","markSelectionPlugin","Controlled","Viz","_ref","_ref$step","context","node","summary","pre","showBuiltins","detail","_ref$escapeAnalysis","escapeAnalysis","split","col","Scope","scopeRef","current","currentScope","objects","map","obj","builtin","key","marginBottom","Obj","_ref2","_useState","useState","_useState2","Object","slicedToArray","showBody","set_showBody","Fragment","item","kind","cursor","onClick","margin","display","verticalAlign","source","values","properties","v","Var","_ref3","_cx","_ref3$escapeAnalysis","scope","scopes","isCurrent","vars","variables","show","_builtin","shownVars","filter","children","freed","defineProperty","childRef","_ref4","_ref4$v","name","value","var","undefined","Value","_ref5","concat","object_ref","console","log","HistoryTimeline","history","moveData","scrubberRef","useRef","buttonRefs","React","createRef","focus","useCallback","onKeyDown","e","keyCode","moveEnd","isMouseDown","document","addEventListener","move","_scrubberRef$current$","getBoundingClientRect","x","width","p","clientX","newValue","Math","min","max","floor","touches","moveStart","preventDefault","stopPropagation","assign","initialMousePos","ref","onTouchStart","onMouseDown","parseInt","NotImplemented","_Error","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","wrapNativeSuper","Error","NotSupported","_Error2","RuntimeError","_Error3","message","_this","call","loc","column","error","processBuiltinAST","forEach","maybeChildNode","_mapBuiltin","parse","program","body","expression","_filterBuiltin","_reduceBuiltin","_pushBuiltin","_logBuiltin","makeInitialContext","_log","_console","_Object","_map","_filter","_reduce","_push","_Array","reduce","prototype","Array","__logs__","sourceCode","getSourceCodeRange","lines","slice","join","Return","regenerator_default","_callee","mkgen","wrap","_context","next","delegateYield","abrupt","t0","t1","stop","locate","lookup","parent","lookupProperty","object","locators","namedArgs","locator","_args","_marked","Identifier","defining_scope_ref","_context2","scope_ref","site","MemberExpression","_callee2","_ref$makeIfNonexisten","makeIfNonexistent","objectValue","propertyName","defining_object_ref","_context3","evaluate","computed","property","accessing_object_ref","invokeFunction","checkForTest","evaluators","evaluator","evaluate_marked","applyOperator","op","b","makeNewScope","_ref2$parentScope","parentScope","_ref2$_builtin","args","newThisBinding","definingScope","_makeNewScope3","_makeNewScope4","executionScope","executionScopeRef","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_ref6","param","executionContext","returnValue","_context7","arrow","params","entries","Symbol","iterator","done","return","finish","objectSpread","_callee5","_context6","skipScope","t2","_hasEscapes","_marked2","test","_ref10","_context20","_marked3","File","Program","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","statement","BlockStatement","_callee3","_makeNewScope","_makeNewScope2","blockScopeRef","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_context4","ReturnStatement","_callee4","_context5","argument","CallExpression","_callee6","callee","argnodes","fnValue","fn","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","argnode","ret","_context8","t3","t4","t5","FunctionDeclaration","_callee7","_context9","async","generator","id","ObjectProperty","_callee8","_ref7","_context10","ObjectExpression","_callee9","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context11","ArrayExpression","_callee10","arr","_context12","elements","ArrowFunctionExpression","_callee11","_context13","UpdateExpression","_callee12","operator","prefix","result","_context14","left","right","BinaryExpression","_callee13","leftValue","rightValue","_context15","ThisExpression","_callee14","_context16","_callee15","_ref8","_context17","_callee16","_context18","AssignmentExpression","_callee17","_ref9","_context19","ForStatement","_callee18","init","_makeNewScope5","_makeNewScope6","forScopeRef","scopedContext","_context21","IfStatement","_callee19","consequent","alternate","_makeNewScope7","_makeNewScope8","ifBodyScopeRef","_context22","ExpressionStatement","_callee20","_context23","VariableDeclaration","_callee21","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","declaration","_context24","declarations","VariableDeclarator","_callee22","_ref11","_context25","NullLiteral","_callee23","_context26","StringLiteral","_callee24","_context27","NumericLiteral","_callee25","_context28","BooleanLiteral","_callee26","_context29","performEscapeAnalysis","ast","traverse","path","isReferencedIdentifier","variableName","getFunctionParent","bindings","_FRV","sleep","ms","Promise","resolve","setTimeout","record","_x","_record","code","runtime","report","deepcopy","usePersistedCode","createPersistedState","usePersistedMaxDetail","usePersistedStepno","usePersistedShowBuiltins","usePersisted_escapeAnalysis","PRESETS","title","stripIndent","VisualizedExecution_templateObject","VisualizedExecution_templateObject2","_templateObject3","_templateObject4","_templateObject5","CM_OPTS","mode","theme","lineNumbers","smartIndent","tabSize","indentWithTabs","styleSelectedText","App","inst","editor","marker","_usePersistedCode","_usePersistedCode2","setCode","_useAsync","useAsync","asyncToGenerator","sent","loading","_usePersistedShowBuil","_usePersistedShowBuil2","setShowBuiltins","_usePersistedStepno","_usePersistedStepno2","_stepno","setStepno","_usePersistedMaxDetai","_usePersistedMaxDetai2","maxDetail","setMaxDetail","_usePersisted_escapeA","_usePersisted_escapeA2","set_escapeAnalysis","stepno","useEffect","doc","getDoc","ch","markedPre","markedPost","codemirror_codemirror","options","editorDidMount","onBeforeChange","data","emptyDivider","main","preset","target","Boolean","window","hostname","match","render","react_router","component","VisualizedExecution","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,SAAA,kCAAAC,KAAA,8BAAAC,SAAA,kCAAAC,aAAA,qNCKH,SAASC,IAAU,IAG1BC,EAAmC,MAFpBC,MAAbC,SAEoBC,SAE5B,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOT,SACrBK,EAAAC,EAAAC,cAAA,6CACmC,IACjCF,EAAAC,EAAAC,cAAA,oBACUF,EAAAC,EAAAC,cAAA,QAAMG,MAAO,CAAEC,WAAY,WAA3B,cAAyD,IADnE,uBAGM,IACNN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CACEJ,UAAWK,IAAGJ,IAAOK,SAAUb,GAAcQ,IAAOR,YACpDc,GAAId,EAAa,IAAM,SAEvBI,EAAAC,EAAAC,cAAA,w0CClBK,SAASS,IACtB,OACEX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOO,aACrBX,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,6DAEFF,EAAAC,EAAAC,cAAA,uLAG2C,KAE3CF,EAAAC,EAAAC,cAAA,qEAC4D,IAC1DF,EAAAC,EAAAC,cAAA,wBAFF,QAE0BF,EAAAC,EAAAC,cAAA,wBAF1B,6DAMAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,SAAOU,KAAK,WAAWC,SAAS,IADlC,iRAOAb,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,SAAOU,KAAK,WAAWC,SAAS,IADlC,gIAKAb,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,SAAOU,KAAK,WAAWC,SAAS,IADlC,yYASAb,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,SAAOU,KAAK,WAAWC,SAAS,IADlC,2XASAb,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,SAAOU,KAAK,WAAWC,SAAS,IADlC,mLAOAb,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,mEAC0D,IACxDF,EAAAC,EAAAC,cAAA,KAAGY,KAAK,sDAAR,uDAKFd,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,cACIF,EAAAC,EAAAC,cAAA,oBADJ,wUAOAF,EAAAC,EAAAC,cAAA,wIAIAF,EAAAC,EAAAC,cAACa,EAAA,UAAD,CACEC,KAAMC,OAAOC,IAATC,OAYNnB,EAAAC,EAAAC,cAAA,qJAKAF,EAAAC,EAAAC,cAACa,EAAA,UAAD,CACEC,KAAMC,OAAOC,IAATE,yEC7FC,SAASC,GAkBtB,SAASC,EAAiBC,GACpBA,EAAGC,MAAMC,iBACXF,EAAGG,UAAU,YA8CjB,SAAgBH,GACd,IAAKA,EAAGI,oBAAqB,OAAOC,EAAML,GAC1C,GAAIA,EAAGM,iBAAiBC,OAAS,EAAG,OAAOC,EAAMR,GAEjD,IAAIS,EAAOT,EAAGU,UAAU,SACtBvB,EAAKa,EAAGU,UAAU,OAEhBC,EAAQX,EAAGC,MAAMC,gBACrB,IAAKS,EAAMJ,OAAQ,OAAOK,EAAWZ,EAAIS,EAAMtB,GAE/C,IAAI0B,EAAaF,EAAM,GAAGG,OACxBC,EAAWJ,EAAMA,EAAMJ,OAAS,GAAGO,OACrC,IACGD,IACAE,GACD5B,EAAG6B,KAAOP,EAAKO,MAAQC,GACvBC,EAAIT,EAAMM,EAAS5B,KAAO,GAC1B+B,EAAI/B,EAAI0B,EAAWJ,OAAS,EAE5B,OAAOD,EAAMR,GAEf,KAAOkB,EAAIT,EAAMI,EAAWJ,MAAQ,GAClCE,EAAMQ,QAAQd,QACdQ,EAAaF,EAAM,GAAGG,OAWxB,IATII,EAAIT,EAAMI,EAAWJ,MAAQ,IAC3BI,EAAW1B,GAAG6B,KAAOP,EAAKO,KAAOC,GACnCN,EAAMQ,QAAQd,QACdO,EAAWZ,EAAIS,EAAMI,EAAW1B,GAAI,IAEpCyB,EAAWZ,EAAIS,EAAMI,EAAWJ,KAAM,IAInCS,EAAI/B,EAAI4B,EAAS5B,IAAM,GAC5BwB,EAAMS,MAAMf,QACZU,EAAWJ,EAAMA,EAAMJ,OAAS,GAAGO,OAEjCI,EAAI/B,EAAI4B,EAAS5B,IAAM,IACrBA,EAAG6B,KAAOD,EAASN,KAAKO,KAAOC,GACjCN,EAAMS,MAAMf,QACZO,EAAWZ,EAAIe,EAASN,KAAMtB,IAE9ByB,EAAWZ,EAAIe,EAAS5B,GAAIA,IAxF5BkC,CAAOrB,KAIb,SAASsB,EAAStB,GACZA,EAAGC,MAAMC,iBAAmBF,EAAGC,MAAMC,gBAAgBK,QACvDP,EAAGG,UAAU,WACXE,EAAML,KA3BZF,EAAWyB,aAAa,qBAAqB,EAAO,SAASvB,EAAIwB,EAAKC,GACpE,IAAIC,EAAOD,GAAOA,IAAQ3B,EAAW6B,KACjCH,IAAQE,GACV1B,EAAGC,MAAMC,gBAAkB,GAC3BF,EAAGC,MAAM2B,qBACO,iBAAPJ,EAAkBA,EAAM,0BACjChB,EAAMR,GACNA,EAAG6B,GAAG,iBAAkB9B,GACxBC,EAAG6B,GAAG,SAAUP,KACNE,GAAOE,IACjB1B,EAAG8B,IAAI,iBAAkB/B,GACzBC,EAAG8B,IAAI,SAAUR,GACjBjB,EAAML,GACNA,EAAGC,MAAMC,gBAAkBF,EAAGC,MAAM2B,qBAAuB,QAkB/D,IAAIX,EAAa,EACbc,EAAMjC,EAAWiC,IACjBb,EAAMpB,EAAWkC,OAErB,SAASpB,EAAWZ,EAAIS,EAAMtB,EAAI8C,GAChC,GAAsB,IAAlBf,EAAIT,EAAMtB,GAGd,IAFA,IAAIwB,EAAQX,EAAGC,MAAMC,gBACjBgC,EAAMlC,EAAGC,MAAM2B,qBACVZ,EAAOP,EAAKO,OAAU,CAC7B,IAAImB,EAAQnB,IAASP,EAAKO,KAAOP,EAAOsB,EAAIf,EAAM,GAC9CoB,EAAUpB,EAAOC,EACnBoB,EAAQD,GAAWjD,EAAG6B,KACpBsB,EAAMD,EAAQlD,EAAK4C,EAAIK,EAAS,GAChCG,EAAOvC,EAAGwC,SAASL,EAAOG,EAAK,CAAE1D,UAAWsD,IAGhD,GAFa,MAATD,EAAetB,EAAM8B,KAAKF,GACzB5B,EAAM+B,OAAOT,IAAS,EAAGM,GAC1BF,EAAO,MACXrB,EAAOoB,GAIX,SAAS/B,EAAML,GAEb,IADA,IAAIW,EAAQX,EAAGC,MAAMC,gBACZyC,EAAI,EAAGA,EAAIhC,EAAMJ,SAAUoC,EAAGhC,EAAMgC,GAAGtC,QAChDM,EAAMJ,OAAS,EAGjB,SAASC,EAAMR,GACbK,EAAML,GAEN,IADA,IAAI4C,EAAS5C,EAAGM,iBACPqC,EAAI,EAAGA,EAAIC,EAAOrC,OAAQoC,IACjC/B,EAAWZ,EAAI4C,EAAOD,GAAGlC,OAAQmC,EAAOD,GAAGxD,OCrEjD0D,QAAoB/C,gBCILgD,0BAAf,sDCHe,SAASC,EAATC,GAIZ,IAAAC,EAAAD,EAHD/E,KAAciF,GAGbD,EAHOE,KAGPF,EAHaC,SAAcE,GAG3BH,EAHsBI,IAGtBJ,EAH2BG,SAC5BE,GAECL,EAHoCM,OAGpCP,EAFDM,cAECE,EAAAR,EADDS,sBACC,IAAAD,KACD,OACE/E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,UAAKyE,IAEP3E,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO6E,OACrBjF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO8E,KACrBlF,EAAAC,EAAAC,cAACiF,EAAD,CACEV,QAASA,EACTW,SAAU,EACVC,QAASZ,EAAQa,aACjBT,aAAcA,EACdG,eAAgBA,KAGpBhF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO8E,KACpBT,EAAQc,QAAQC,IAAI,SAACC,EAAKvB,GAEzB,OADaW,IAAiBY,EAAIC,QAEhC1F,EAAAC,EAAAC,cAAA,OAAKyF,IAAKzB,EAAG7D,MAAO,CAAEuF,aAAc,UAClC5F,EAAAC,EAAAC,cAAA,sBACWgE,EADX,MACiBuB,EAAI7E,MAErBZ,EAAAC,EAAAC,cAAC2F,EAAD,CAAKJ,IAAKA,KAEV,UAQhB,SAASI,EAATC,GAAsB,IAAPL,EAAOK,EAAPL,IAAOM,EACaC,oBAAS,GADtBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACbK,EADaH,EAAA,GACHI,EADGJ,EAAA,GAGpB,OACEjG,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOqF,KAUP,aAAbA,EAAI7E,MACHZ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAqG,SAAA,KACEtG,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOmG,MACrBvG,EAAAC,EAAAC,cAAA,QACEC,UAAWC,IAAOoG,KAClBnG,MAAO,CAAEoG,OAAQ,WACjBC,QAAS,kBAAML,GAAcD,KAE5BA,EAAW,OAAS,OALvB,SAMQ,IACPA,GACCpG,EAAAC,EAAAC,cAAA,OACEG,MAAO,CACLsG,OAAQ,cACRC,QAAS,eACTC,cAAe,aAGhBpB,EAAIqB,UAMdZ,OAAOa,OAAOtB,EAAIuB,YAAc,IAAIxB,IAAI,SAACyB,EAAG/C,GAAJ,OACvClE,EAAAC,EAAAC,cAACgH,EAAD,CAAKvB,IAAKzB,EAAG+C,EAAGA,OAMxB,SAAS9B,EAATgC,GAMG,IAAAC,EALD3C,EAKC0C,EALD1C,QACAW,EAIC+B,EAJD/B,SACAC,EAGC8B,EAHD9B,QACAR,EAECsC,EAFDtC,aAECwC,EAAAF,EADDnC,sBACC,IAAAqC,KACKC,EAAQ7C,EAAQ8C,OAAOnC,GACvBoC,EAAYnC,IAAYD,EACxBqC,EAAOvB,OAAOa,OAAOO,EAAMI,WAE3BC,EAAO9C,IAAiByC,EAAMM,SAE9BC,EAAYF,EACdF,EAAKK,OAAO,SAAAb,GAAC,OAAIpC,GAA2B,YAAXoC,EAAET,OACnC,GAEJ,GAAyB,IAArBqB,EAAU/F,QAA0C,IAA1BwF,EAAMS,SAASjG,OAAc,OAAO,KAClE,GAAIkD,GAAkBsC,EAAMU,MAAO,OAAO,KAE1C,IAAM7H,EACiB,IAArB0H,EAAU/F,QAAiB6F,EAEvBnH,KAAE4G,EAAA,GAAAlB,OAAA+B,EAAA,EAAA/B,CAAAkB,EAAIhH,IAAOkH,OAAQ,GAAnBpB,OAAA+B,EAAA,EAAA/B,CAAAkB,EAA0BhH,IAAOoH,UAAYA,GAA7CJ,IADF,GAGN,OACEpH,EAAAC,EAAAC,cAAA,OAAKC,UAAWA,GACb0H,EAAUrC,IAAI,SAACyB,EAAG/C,GAAJ,OACblE,EAAAC,EAAAC,cAACgH,EAAD,CAAKvB,IAAKzB,EAAG+C,EAAGA,MAEjBK,EAAMS,SAASvC,IAAI,SAAA0C,GAAQ,OAC1BlI,EAAAC,EAAAC,cAAA,OAAKyF,IAAKuC,GACRlI,EAAAC,EAAAC,cAACiF,EAAD,CACEV,QAASA,EACTW,SAAU8C,EACV7C,QAASA,EACTR,aAAcA,EACdG,eAAgBA,QAQ5B,SAASkC,EAATiB,GAA2C,IAAAC,EAAAD,EAA5BlB,EAAKT,EAAuB4B,EAAvB5B,KAAM6B,EAAiBD,EAAjBC,KAAMC,EAAWF,EAAXE,MAC9B,OACEtI,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOmI,KACrBvI,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAOoG,MAAOA,GADjC,IAC+C6B,EAAM,SACxCG,IAAVF,GACCtI,EAAAC,EAAAC,cAAA,YACY,WAATsG,EAAA,QACDxG,EAAAC,EAAAC,cAACuI,EAAD,CAAOH,MAAOA,MAOxB,SAASG,EAATC,GAA0B,IAATJ,EAASI,EAATJ,MACf,MAAqB,kBAAVA,EAAoB,IAAAK,OAAWL,EAAX,KACV,kBAAVA,GAAsB,eAAgBA,EAC/C,WAAAK,OAAkBL,EAAMM,YACL,mBAAVN,EAAqB,GAAAK,OAAUL,GACrB,kBAAVA,GACTO,QAAQC,IAAI,kBAAmBR,GACxB,OAEFA,wBCvJM,SAASS,EAATxE,GAKZ,IAJDyE,EAICzE,EAJDyE,QACAV,EAGC/D,EAHD+D,MACAzF,EAEC0B,EAFD1B,SACAnD,EACC6E,EADD7E,aAEMuJ,EAAW,GACXC,EAAcC,mBACdC,EAAaD,iBAAOH,EAAQxD,IAAI,kBAAM6D,IAAMC,eAE5CC,EAAQC,sBAAY,SAAAtF,GAEtBkF,EAAW/D,SACX+D,EAAW/D,QAAQnB,IACnBkF,EAAW/D,QAAQnB,GAAGmB,SAEtB+D,EAAW/D,QAAQnB,GAAGmB,QAAQkE,SAE/B,IAEGE,EAAYD,sBAChB,SAAAE,GACoB,KAAdA,EAAEC,SACJ9G,EAASyF,EAAQ,GACjBiB,EAAMjB,EAAQ,IACS,KAAdoB,EAAEC,UACX9G,EAASyF,EAAQ,GACjBiB,EAAMjB,EAAQ,KAGlB,CAACA,EAAOiB,EAAO1G,IAGX+G,EAAUJ,sBAAY,kBAAOP,EAASY,aAAc,GAAQ,CAACZ,IAEnEa,SAASC,iBAAiB,UAAW,kBAAMH,MAC3CE,SAASC,iBAAiB,WAAY,kBAAMH,MAC5CE,SAASC,iBAAiB,cAAe,kBAAMH,MAE/C,IAAMI,EAAO,SAAAN,GACX,GAAIT,EAASY,aAAeX,EAAY7D,QAAS,KAAA4E,EAC1Bf,EAAY7D,QAAQ6E,wBAAjCC,EADuCF,EACvCE,EAAGC,EADoCH,EACpCG,MACLC,GAAKX,EAAEY,QAAUH,GAAKC,EAEtBG,EAAWC,KAAKC,IACpBzB,EAAQlH,OAAS,EACjB0I,KAAKE,IAAI,EAAGF,KAAKG,MAAMN,EAAIrB,EAAQlH,UAGrCe,EAAS0H,GACThB,EAAMgB,KAIVT,SAASC,iBAAiB,YAAa,SAAAL,GAAC,OAAIM,EAAKN,KACjDI,SAASC,iBAAiB,YAAa,SAAAL,GAAC,OAAIM,EAAKN,EAAEkB,QAAQ,MAE3D,IAAMC,EAAYrB,sBAChB,SAAAE,GACEA,EAAEoB,iBACFpB,EAAEqB,kBAEF7E,OAAO8E,OAAO/B,EAAU,CACtBgC,gBAAiB,CACfd,EAAGT,EAAEY,SAEPT,aAAa,KAGjB,CAACZ,IAGH,OACEjJ,EAAAC,EAAAC,cAAA,OACEC,UAAWC,IAAOb,SAClBkK,UAAWA,EACXyB,IAAKhC,EACLiC,aAAcN,EACdO,YAAaP,GAEZ7B,EAAQxD,IAAI,SAAChG,EAAM0E,GAAM,IAAAkD,EACxB,OACEpH,EAAAC,EAAAC,cAAA,UACEyF,IAAKzB,EACLgH,IAAK9B,EAAW/D,QAAQnB,GACxBwC,QAAS,SAAAgD,GACPA,EAAEoB,iBACFpB,EAAEqB,kBACFlI,EAASqB,GACTqF,EAAMrF,IAER/D,UAAWK,KAAE4G,EAAA,GAAAlB,OAAA+B,EAAA,EAAA/B,CAAAkB,EACVhH,IAAOZ,MAAO,GADJ0G,OAAA+B,EAAA,EAAA/B,CAAAkB,EAEVhH,IAAOX,SAAWyE,IAAMmH,SAAS/C,IAFvBlB,KAKZlD,EAAI,KAIVxE,GACCM,EAAAC,EAAAC,cAAA,OAAKC,UAAWK,IAAG,CAACJ,IAAOZ,KAAMY,IAAOV,8FCzGnC4L,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAApF,OAAAsF,EAAA,EAAAtF,CAAAuF,KAAAH,GAAApF,OAAAwF,EAAA,EAAAxF,CAAAuF,KAAAvF,OAAAyF,EAAA,EAAAzF,CAAAoF,GAAAM,MAAAH,KAAAI,YAAA,OAAA3F,OAAA4F,EAAA,EAAA5F,CAAAoF,EAAAC,GAAAD,EAAA,CAAApF,OAAA6F,EAAA,EAAA7F,CAAoC8F,QACvBC,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA/F,OAAAsF,EAAA,EAAAtF,CAAAuF,KAAAQ,GAAA/F,OAAAwF,EAAA,EAAAxF,CAAAuF,KAAAvF,OAAAyF,EAAA,EAAAzF,CAAA+F,GAAAL,MAAAH,KAAAI,YAAA,OAAA3F,OAAA4F,EAAA,EAAA5F,CAAA+F,EAAAC,GAAAD,EAAA,CAAA/F,OAAA6F,EAAA,EAAA7F,CAAkC8F,QAErBG,GAAb,SAAAC,GACE,SAAAD,EAAYE,EAAS3H,GAAM,IAAA4H,EAAA,OAAApG,OAAAsF,EAAA,EAAAtF,CAAAuF,KAAAU,GACzBG,EAAApG,OAAAwF,EAAA,EAAAxF,CAAAuF,KAAAvF,OAAAyF,EAAA,EAAAzF,CAAAiG,GAAAI,KAAAd,KAAA,GAAA9C,OACK0D,EADL,MAAA1D,OACiBjE,EAAK9D,MADtB+H,OAEIjE,EAAK8H,MAAQ9H,EAAKkD,SAAlB,MAAAe,OACUjE,EAAK8H,IAAI9I,MAAMnB,KADzB,KAAAoG,OACiCjE,EAAK8H,IAAI9I,MAAM+I,QADhD,GAFJ,OAOA5D,QAAQ6D,MAAM,gBAAiBL,EAAS3H,GARf4H,EAD7B,OAAApG,OAAA4F,EAAA,EAAA5F,CAAAiG,EAAAC,GAAAD,EAAA,CAAAjG,OAAA6F,EAAA,EAAA7F,CAAkC8F,iBCClC,SAASW,GAAkBjI,GAczB,cAbOA,EAAK8H,IACZ9H,EAAKkD,UAAW,EAChB1B,OAAOa,OAAOrC,GAAMkI,QAAQ,SAAAC,GAExBA,GAC0B,kBAAnBA,GACP,SAAUA,EAEVF,GAAkBE,GACTA,GAAkBA,EAAeD,SAC1CC,EAAeD,QAAQD,MAGpBjI,EAIT,IAAMoI,GAAcH,GAClBI,iBAAK,2IAMHC,QAAQC,KAAK,GAAGC,YAIdC,GAAiBR,GACrBI,iBAAK,+JAOHC,QAAQC,KAAK,GAAGC,YAKdE,GAAiBT,GACrBI,iBAAK,gIAKHC,QAAQC,KAAK,GAAGC,YAIdG,GAAeV,GACnBI,iBAAK,gGAIHC,QAAQC,KAAK,GAAGC,YAIdI,GAAcX,GAClBI,iBAAK,kCAEHC,QAAQC,KAAK,GAAGC,YAGb,SAASK,KACd,IAAM7H,EAAU,CACdH,QAAS,IAGLiI,EACJ9H,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,WACN8D,KAAM4I,GACNxG,OAAQ,cACL,EAED2G,EACJ/H,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,SACNoG,WAAY,CACV8B,IAAK,CAAET,KAAM,MAAO7B,KAAM,WAAY8B,MAAO,CAAEM,WAAY4E,OAE1D,EAEDE,EACJhI,EAAQH,QAAQvB,KAAK,CAAE0B,SAAS,EAAM9E,KAAM,SAAUoG,WAAY,KAAQ,EAEtE2G,EACJjI,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,WACN8D,KAAMoI,GACNhG,OAAQ,cACL,EAED8G,EACJlI,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,WACN8D,KAAMyI,GACNrG,OAAQ,cACL,EAED+G,EACJnI,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,WACN8D,KAAM0I,GACNtG,OAAQ,cACL,EAEDgH,EACJpI,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,WACN8D,KAAM2I,GACNvG,OAAQ,cACL,EAEDiH,EACJrI,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,QACNoG,WAAY,CACVxB,IAAK,CAAE6C,KAAM,MAAO7B,KAAM,WAAY8B,MAAO,CAAEM,WAAY+E,IAC3D7F,OAAQ,CACNO,KAAM,SACN7B,KAAM,WACN8B,MAAO,CAAEM,WAAYgF,IAEvBI,OAAQ,CACN3F,KAAM,SACN7B,KAAM,WACN8B,MAAO,CAAEM,WAAYiF,IAEvB7J,KAAM,CAAEqE,KAAM,OAAQ7B,KAAM,WAAY8B,MAAO,CAAEM,WAAYkF,KAE/DG,UAAWP,IACR,EAUP,MAAO,CACLnG,OAAQ,CACN,CACEG,UAAW,CACTxB,OAAQ,CACNM,KAAM,UACN6B,KAAM,SACNC,MAAO,CAAEM,WAAY8E,IAEvBQ,MAAO,CACL1H,KAAM,UACN6B,KAAM,QACNC,MAAO,CAAEM,WAAYmF,IAEvBI,SAAU,CACR3H,KAAM,UACN6B,KAAM,WACNC,MAAO,CAAEM,WAxBjBlD,EAAQH,QAAQvB,KAAK,CACnB0B,SAAS,EACT9E,KAAM,QACNqN,UAAWF,EACX/G,WAAY,KACT,IAqBC6B,QAAS,CACPrC,KAAM,UACN6B,KAAM,UACNC,MAAO,CAAEM,WAAY6E,KAGzB1F,SAAU,KAGdxC,QAASG,EAAQH,QACjBD,aAAc,EACd8I,WAAY,GACZC,mBA/BK,SA+Bc3J,GACjB,GAAIA,EAAKkD,SACP,MAAO,YACF,GAAKlD,EAAK8H,IAEV,CACL,IAAMA,EAAM9H,EAAK8H,IACX8B,EAAQ7C,KAAK2C,WAChBnJ,MAAM,MACNsJ,MAAM/B,EAAI9I,MAAMnB,KAAO,EAAGiK,EAAI3I,IAAItB,MAYrC,OAVqB,IAAjB+L,EAAMxM,OACRwM,EAAM,GAAKA,EAAM,GAAGC,MAAM/B,EAAI9I,MAAM+I,OAAQD,EAAI3I,IAAI4I,QAC3C6B,EAAMxM,OAAS,IACxBwM,EAAM,GAAKA,EAAM,GAAGC,MAAM/B,EAAI9I,MAAM+I,QACpC6B,EAAMA,EAAMxM,OAAS,GAAKwM,EAAMA,EAAMxM,OAAS,GAAGyM,MAChD,EACA/B,EAAI3I,IAAI4I,SAIL6B,EAAME,KAAK,MAjBlB,MAAO,2BChMFC,GACX,SAAAA,EAAYnG,GAAQpC,OAAAsF,EAAA,EAAAtF,CAAAuF,KAAAgD,GAClBhD,KAAKnD,MAAQA,GAWjBmG,GAAOzM,KAAP0M,EAAAzO,EAAA6D,KAAc,SAAA6K,EAAUC,GAAV,OAAAF,EAAAzO,EAAA4O,KAAA,SAAAC,GAAA,cAAAA,EAAA7L,KAAA6L,EAAAC,MAAA,OAEH,OAFGD,EAAA7L,KAAA,EAEH6L,EAAAE,cAAOJ,IAAP,QAFG,cAAAE,EAAAG,OAAA,SAAAH,EAAAI,IAAA,UAAAJ,EAAA7L,KAAA,EAAA6L,EAAAK,GAAAL,EAAA,WAINA,EAAAK,cAAaV,IAJP,CAAAK,EAAAC,KAAA,gBAAAD,EAAAG,OAAA,SAKDH,EAAAK,GAAE7G,OALD,cAAAwG,EAAAK,GAAA,yBAAAL,EAAAM,SAAAT,EAAA,gCCiBGU,IA3BjB,SAASC,GAAO7K,EAAS4D,EAAM6C,GAC7B,IAAM5D,EAAQ7C,EAAQ8C,OAAO2D,GAC7B,OAAI5D,EAAMI,UAAUW,GACX6C,OACmB1C,IAAjBlB,EAAMiI,OACRD,GAAO7K,EAAS4D,EAAMf,EAAMiI,QAE5B,KAMX,SAASC,GAAe/K,EAAS4D,EAAMO,GACrC,IAAM6G,EAAShL,EAAQc,QAAQqD,GAC/B,YAAgCJ,IAA5BiH,EAAOzI,WAAWqB,GACbO,OACuBJ,IAArBiH,EAAOxB,UACTuB,GAAe/K,EAAS4D,EAAMoH,EAAOxB,WAErC,KAIJ,IAAMyB,GAAW,GAGjB,SAAUL,GAAO3K,EAAMD,GAAvB,IAAAkL,EAAAC,EAAAC,EAAAhE,UAAA,OAAA6C,EAAAzO,EAAA4O,KAAA,SAAAC,GAAA,cAAAA,EAAA7L,KAAA6L,EAAAC,MAAA,UAAgCY,EAAhCE,EAAA/N,OAAA,QAAA0G,IAAAqH,EAAA,GAAAA,EAAA,GAA4C,GAC3CD,EAAUF,GAAShL,EAAK9D,MADzB,CAAAkO,EAAAC,KAAA,cAGHlG,QAAQ6D,MAAR,+CAAA/D,OACiDjE,EAAK9D,MACpD8D,GAEI,IAAI4G,EAAJ,+CAAA3C,OAC2CjE,EAAK9D,OARnD,OAWE,OAAAkO,EAAAE,cAAOY,EAAQlL,EAAMD,EAASkL,GAA9B,QAXF,cAAAb,EAAAG,OAAA,SAAAH,EAAAI,IAAA,wBAAAJ,EAAAM,SAAAU,IAcPJ,GAASK,WAATrB,EAAAzO,EAAA6D,KAAsB,SAAA6K,EAAUjK,EAAMD,GAAhB,IAAAuL,EAAA,OAAAtB,EAAAzO,EAAA4O,KAAA,SAAAoB,GAAA,cAAAA,EAAAhN,KAAAgN,EAAAlB,MAAA,UAEO,QADrBiB,EAAqBV,GAAO7K,EAASC,EAAK2D,KAAM5D,EAAQa,eAD1C,CAAA2K,EAAAlB,KAAA,cAGZ,IAAI5C,GAAJ,YAAAxD,OACQjE,EAAK2D,KADb,uCAEJ3D,GALgB,OAQpB,OARoBuL,EAAAlB,KAAA,EAQd,CACJtK,UACAC,OACAC,QAAO,sBAAAgE,OAAwBjE,EAAK2D,MACpCvD,OAAQ,GAZU,cAAAmL,EAAAhB,OAAA,SAcb,CACLiB,UAAWF,EACX3H,KAAM3D,EAAK2D,KACX8H,KAAM1L,EAAQ8C,OAAOyI,GAAoBtI,UAAUhD,EAAK2D,QAjBtC,wBAAA4H,EAAAb,SAAAT,KAqBtBe,GAASU,iBAAT1B,EAAAzO,EAAA6D,KAA4B,SAAAuM,EAC1B3L,EACAD,EAF0BF,GAAA,IAAA+L,EAAAC,EAAAC,EAAA5H,EAAA6H,EAAAC,EAAAP,EAAA,OAAAzB,EAAAzO,EAAA4O,KAAA,SAAA8B,GAAA,cAAAA,EAAA1N,KAAA0N,EAAA5B,MAAA,OAKN,OALMuB,EAAA/L,EAGxBgM,yBAHwB,IAAAD,KAKNK,EAAA3B,cAAO4B,GAASlM,EAAK+K,OAAQhL,GAA7B,QALM,UAOK,kBAFzB+L,EALoBG,EAAAzB,IAOL5G,OACjB,eAAgBkI,EAAYlI,MARN,CAAAqI,EAAA5B,KAAA,cAWlB,IAAI5C,GACR,6CACAzH,EAAK+K,QAbiB,UAelB7G,EAAe4H,EAAYlI,MAA3BM,YAGJlE,EAAKmM,SAlBiB,CAAAF,EAAA5B,KAAA,SAmBR,OAAA4B,EAAA3B,cAAO4B,GAASlM,EAAKoM,SAAUrM,GAA/B,QAnBQ,OAmBxBgM,EAnBwBE,EAAAxB,GAmBiC7G,MAnBjCqI,EAAA5B,KAAA,oBAqBG,eAAvBrK,EAAKoM,SAASlQ,KArBM,CAAA+P,EAAA5B,KAAA,eAqBuB,IAAIzD,EArB3B,QAsBxBmF,EAAe/L,EAAKoM,SAASzI,KAtBL,WA0BE,QADtBqI,EAAsBlB,GAAe/K,EAASgM,EAAc7H,IAzBxC,CAAA+H,EAAA5B,KAAA,aA2BpBwB,EA3BoB,CAAAI,EAAA5B,KAAA,SAgCtB,OAJMoB,EAAQ1L,EAAQc,QAAQqD,GAAY5B,WAAWyJ,GAAgB,CACnEpI,KAAMoI,EACNjK,KAAM,YA9BcmK,EAAA5B,KAAA,GAgChB,CACJtK,UACAC,OACAC,QAAO,qBAAAgE,OAAuB8H,GAC9B3L,OAAQ,GApCY,eAAA6L,EAAA1B,OAAA,SAsCf,CACL8B,qBAAsBnI,EACtBA,aACAP,KAAMoI,EACNN,SA1CoB,eAAAQ,EAAA1B,OAAA,SA6Cf,MA7Ce,QAiD1B,OAjD0B0B,EAAA5B,KAAA,GAiDpB,CACJtK,UACAC,OACAC,QAAO,sBAAAgE,OAAwBjE,EAAK2D,MACpCvD,OAAQ,GArDgB,eAAA6L,EAAA1B,OAAA,SAuDnB,CACL8B,qBAAsBnI,EACtBA,WAAY8H,EACZrI,KAAMoI,EACNN,KAAM1L,EAAQc,QAAQmL,GAAqB1J,WAAWyJ,KA3D9B,yBAAAE,EAAAvB,SAAAiB,qBC1DXO,gBA6FPI,gBAoVAC,IAnbGC,GAAa,GAEnB,SAAUN,GACflM,GADK,IAAAD,EAAAkL,EAAAwB,EAAAtB,EAAAhE,UAAA,OAAA6C,EAAAzO,EAAA4O,KAAA,SAAAC,GAAA,cAAAA,EAAA7L,KAAA6L,EAAAC,MAAA,UAELtK,EAFKoL,EAAA/N,OAAA,QAAA0G,IAAAqH,EAAA,GAAAA,EAAA,GAEKtC,KACVoC,EAHKE,EAAA/N,OAAA,QAAA0G,IAAAqH,EAAA,GAAAA,EAAA,GAGO,GAENsB,EAAYD,GAAWxM,EAAK9D,MAL7B,CAAAkO,EAAAC,KAAA,cAOHlG,QAAQ6D,MAAR,iDAAA/D,OACmDjE,EAAK9D,MACtD8D,GAEI,IAAI4G,EAAJ,iDAAA3C,OAC6CjE,EAAK9D,OAZrD,OAeE,OAAAkO,EAAAE,cAAOmC,EAAUzM,EAAMD,EAASkL,GAAhC,QAfF,cAAAb,EAAAG,OAAA,SAAAH,EAAAI,IAAA,wBAAAJ,EAAAM,SAAAgC,IAkBP,SAASC,GAAcC,EAAIrR,EAAGsR,GAC5B,GAAW,MAAPD,EAAY,OAAOrR,EAAIsR,EAC3B,GAAW,MAAPD,EAAY,OAAOrR,EAAIsR,EAC3B,GAAW,MAAPD,EAAY,OAAOrR,EAAIsR,EAC3B,GAAW,OAAPD,EAAa,OAAOrR,GAAKsR,EAC7B,GAAW,OAAPD,EAAa,OAAOrR,GAAKsR,EAC7B,GAAW,MAAPD,EAAY,OAAOrR,EAAIsR,EAC3B,GAAW,OAAPD,EAAa,OAAOrR,GAAKsR,EAC7B,GAAW,OAAPD,EAAa,OAAOrR,GAAKsR,EAC7B,GAAW,MAAPD,EAAY,OAAOrR,EAAIsR,EAC3B,GAAW,OAAPD,EAAa,OAAOrR,GAAKsR,EAC7B,MAAM,IAAIjG,EAAJ,6BAAA3C,OAAgD2I,IA0CxD,SAASE,GACP/M,GAKA,IAAAqB,EAAA+F,UAAA/J,OAAA,QAAA0G,IAAAqD,UAAA,GAAAA,UAAA,GADI,GACJ4F,EAAA3L,EAHE4L,mBAGF,IAAAD,EAHgBhN,EAAQa,aAGxBmM,EAAAE,EAAA7L,EAFE8B,SAIIN,EAAQ,CACZiI,OAAQmC,EACR9J,cAJF,IAAA+J,EAFalN,EAAQ8C,OAAO9C,EAAQa,cAAcsC,SAElD+J,EAKE5J,SAAU,GACVL,UAAW,IAEPwI,EAAYzL,EAAQ8C,OAAOvD,KAAKsD,GAAS,EAK/C,OAJI7C,EAAQ8C,OAAOmK,IACjBjN,EAAQ8C,OAAOmK,GAAa3J,SAAS/D,KAAKkM,GAGrC,CAAC5I,EAAO4I,GAGjB,SAAUc,GAAV7J,EAEEyK,EACAC,EACApN,GAJF,IAAAqN,EAAApN,EAAAqN,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA9J,EAAAxE,EAAAuO,EAAAC,EAAAC,EAAA,OAAAjE,EAAAzO,EAAA4O,KAAA,SAAA+D,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA7D,MAAA,OACI+C,EADJ3K,EACI2K,cADJ3K,EACmB0L,MAAOnO,EAD1ByC,EAC0BzC,KAD1BqN,EAO8CP,GAAa/M,EAAS,CAChEiN,YAAaI,EACblK,WAAYlD,EAAKuI,KAAKrF,WAT1BoK,EAAA9L,OAAAC,EAAA,EAAAD,CAAA6L,EAAA,GAOSE,EAPTD,EAAA,GAOyBE,EAPzBF,EAAA,GAaMH,IACFI,EAAevK,UAAUmK,EAAexJ,MAAQwJ,GAdpDM,GAAA,EAAAC,GAAA,EAAAC,OAAA7J,EAAAoK,EAAA3P,KAAA,EAAAqP,EAkB2B5N,EAAKoO,OAAOC,UAlBvCC,OAAAC,YAAA,UAAAd,GAAAI,EAAAD,EAAAvD,QAAAmE,KAAA,CAAAN,EAAA7D,KAAA,YAAAyD,EAAAD,EAAAjK,MAAAI,EAAAxC,OAAAC,EAAA,EAAAD,CAAAsM,EAAA,GAkBctO,EAlBdwE,EAAA,GAmBuB,gBADN+J,EAlBjB/J,EAAA,IAmBc9H,KAnBd,CAAAgS,EAAA7D,KAAA,eAoBY,IAAIzD,EAAJ,0BAAA3C,OACsB8J,EAAM7R,KAD5B,mBApBZ,QAwBIqR,EAAevK,UAAU+K,EAAMpK,MAAQ,CACrCA,KAAMoK,EAAMpK,KACZ7B,KAAM,QACN8B,MAAOsJ,EAAK1N,GAAGoE,OA3BrB,QAAA6J,GAAA,EAAAS,EAAA7D,KAAA,gBAAA6D,EAAA7D,KAAA,iBAAA6D,EAAA3P,KAAA,GAAA2P,EAAA1D,GAAA0D,EAAA,SAAAR,GAAA,EAAAC,EAAAO,EAAA1D,GAAA,QAAA0D,EAAA3P,KAAA,GAAA2P,EAAA3P,KAAA,GAAAkP,GAAA,MAAAG,EAAAa,QAAAb,EAAAa,SAAA,WAAAP,EAAA3P,KAAA,IAAAmP,EAAA,CAAAQ,EAAA7D,KAAA,eAAAsD,EAAA,eAAAO,EAAAQ,OAAA,mBAAAR,EAAAQ,OAAA,eA+BQV,EA/BRxM,OAAAmN,GAAA,EAAAnN,CAAA,GA+BgCzB,EA/BhC,CA+ByCa,aAAc4M,IAI9B,mBAAnBxN,EAAKuI,KAAKrM,KAnChB,CAAAgS,EAAA7D,KAAA,SAoCkB,OAAA6D,EAAA5D,cAAOP,GAAOzM,KAAP0M,EAAAzO,EAAA6D,KAAY,SAAAwP,IAAA,OAAA5E,EAAAzO,EAAA4O,KAAA,SAAA0E,GAAA,cAAAA,EAAAtQ,KAAAsQ,EAAAxE,MAAA,OACxB,OAAAwE,EAAAvE,cAAO4B,GAASlM,EAAKuI,KAAMyF,EAAkB,CAClDc,WAAW,IADN,QADwB,cAAAD,EAAAtE,OAAA,SAAAsE,EAAArE,IAAA,wBAAAqE,EAAAnE,SAAAkE,MAAnB,SApClB,QAoCIX,EApCJC,EAAAzD,GAAAyD,EAAA7D,KAAA,iBA0CkB,OAAA6D,EAAA5D,cAAO4B,GAASlM,EAAKuI,KAAMyF,GAA3B,SA1ClB,QA0CIC,EA1CJC,EAAAa,GAAA,eA8CO/O,EAAKgP,cAERzB,EAAejK,OAAQ,GAhD3B4K,EAAA3D,OAAA,SA0DS0D,GA1DT,yBAAAC,EAAAxD,SAAAuE,GAAA,iCAoVA,SAAU1C,GAAa2C,EAAMnP,GAA7B,IAAAoP,EAAAvL,EAAA,OAAAoG,EAAAzO,EAAA4O,KAAA,SAAAiF,GAAA,cAAAA,EAAA7Q,KAAA6Q,EAAA/E,MAAA,OACE,OADF+E,EAAA/E,KAAA,EACQ,CACJtK,UACAC,KAAMkP,EACNhP,KAAK,EACLE,OAAQ,EACRH,QAAO,YANX,OAQoB,OAAAmP,EAAA9E,cAAO4B,GAASgD,EAAMnP,GAAtB,QARpB,OASE,OATFoP,EAAAC,EAAA5E,GAQU5G,EARVuL,EAQUvL,MARVwL,EAAA/E,KAAA,EASQ,CACJtK,UACAC,KAAMkP,EACN9O,OAAQ,EACRH,QAAO,oBAbX,cAAAmP,EAAA7E,OAAA,SAeS3G,GAfT,wBAAAwL,EAAA1E,SAAA2E,IAjZA7C,GAAW8C,KAAXtF,EAAAzO,EAAA6D,KAAkB,SAAA6K,EAAUjK,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAoB,GAAA,cAAAA,EAAAhN,KAAAgN,EAAAlB,MAAA,OAChB,OAAAkB,EAAAjB,cAAO4B,GAASlM,EAAKsI,QAASvI,GAA9B,QADgB,wBAAAwL,EAAAb,SAAAT,KAIlBuC,GAAW+C,QAAXvF,EAAAzO,EAAA6D,KAAqB,SAAAuM,EAAU3L,EAAMD,GAAhB,IAAAyP,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA7F,EAAAzO,EAAA4O,KAAA,SAAA8B,GAAA,cAAAA,EAAA1N,KAAA0N,EAAA5B,MAAA,OAAAmF,GAAA,EAAAC,GAAA,EAAAC,OAAA5L,EAAAmI,EAAA1N,KAAA,EAAAoR,EAEK3P,EAAKuI,KAFV+F,OAAAC,YAAA,UAAAiB,GAAAI,EAAAD,EAAAtF,QAAAmE,KAAA,CAAAvC,EAAA5B,KAAA,SAGjB,OADSwF,EAFQD,EAAAhM,MAGjBqI,EAAA3B,cAAO4B,GAAS2D,EAAW9P,GAA3B,QAHiB,OAAAyP,GAAA,EAAAvD,EAAA5B,KAAA,gBAAA4B,EAAA5B,KAAA,iBAAA4B,EAAA1N,KAAA,GAAA0N,EAAAxB,GAAAwB,EAAA,SAAAwD,GAAA,EAAAC,EAAAzD,EAAAxB,GAAA,QAAAwB,EAAA1N,KAAA,GAAA0N,EAAA1N,KAAA,GAAAiR,GAAA,MAAAG,EAAAlB,QAAAkB,EAAAlB,SAAA,WAAAxC,EAAA1N,KAAA,IAAAkR,EAAA,CAAAxD,EAAA5B,KAAA,eAAAqF,EAAA,eAAAzD,EAAAyC,OAAA,mBAAAzC,EAAAyC,OAAA,6BAAAzC,EAAAvB,SAAAiB,EAAA,mCAOrBa,GAAWsD,eAAX9F,EAAAzO,EAAA6D,KAA4B,SAAA2Q,EAAU/P,EAAMD,EAAhBF,GAAA,IAAAmQ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAV,EAAA,OAAA7F,EAAAzO,EAAA4O,KAAA,SAAAqG,GAAA,cAAAA,EAAAjS,KAAAiS,EAAAnG,MAAA,OAAAxK,EAA2BiP,YACrCkB,EACsBlD,GAAa/M,GADnCkQ,EAAAzO,OAAAC,EAAA,EAAAD,CAAAwO,EAAA,GAAAC,EAAA,GACKC,EADLD,EAAA,GAEdlQ,EAAOyB,OAAAmN,GAAA,EAAAnN,CAAA,GAAQzB,EAAR,CAAiBa,aAAcsP,KAHdC,GAAA,EAAAC,GAAA,EAAAC,OAAAvM,EAAA0M,EAAAjS,KAAA,EAAA+R,EAMFtQ,EAAKuI,KANH+F,OAAAC,YAAA,UAAA4B,GAAAI,EAAAD,EAAAjG,QAAAmE,KAAA,CAAAgC,EAAAnG,KAAA,SAOxB,OADSwF,EANeU,EAAA3M,MAOxB4M,EAAAlG,cAAO4B,GAAS2D,EAAW9P,GAA3B,SAPwB,QAAAoQ,GAAA,EAAAK,EAAAnG,KAAA,gBAAAmG,EAAAnG,KAAA,iBAAAmG,EAAAjS,KAAA,GAAAiS,EAAA/F,GAAA+F,EAAA,SAAAJ,GAAA,EAAAC,EAAAG,EAAA/F,GAAA,QAAA+F,EAAAjS,KAAA,GAAAiS,EAAAjS,KAAA,GAAA4R,GAAA,MAAAG,EAAA7B,QAAA6B,EAAA7B,SAAA,WAAA+B,EAAAjS,KAAA,IAAA6R,EAAA,CAAAI,EAAAnG,KAAA,eAAAgG,EAAA,eAAAG,EAAA9B,OAAA,mBAAA8B,EAAA9B,OAAA,6BAAA8B,EAAA9F,SAAAqF,EAAA,mCAW5BvD,GAAWiE,gBAAXzG,EAAAzO,EAAA6D,KAA6B,SAAAsR,EAAU1Q,EAAMD,GAAhB,IAAAkO,EAAA,OAAAjE,EAAAzO,EAAA4O,KAAA,SAAAwG,GAAA,cAAAA,EAAApS,KAAAoS,EAAAtG,MAAA,OAC3B,OAD2BsG,EAAAtG,KAAA,EACrB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,uBACPG,OAAQ,GANiB,OAQP,OAAAuQ,EAAArG,cAAO4B,GAASlM,EAAK4Q,SAAU7Q,GAA/B,QARO,OAa3B,OALMkO,EARqB0C,EAAAnG,GAS3BzK,EAAQ8C,OAAO9C,EAAQa,cAAcoC,UAAU,cAAgB,CAC7DlB,KAAM,SACN8B,MAAOqK,EAAYrK,OAXM+M,EAAAtG,KAAA,EAarB,CAAEtK,UAASC,OAAMC,QAAO,wBAA2BG,OAAQ,GAbtC,aAcrB,IAAI2J,GAAOkE,GAdU,wBAAA0C,EAAAjG,SAAAgG,KAoG7BlE,GAAWqE,eAAX7G,EAAAzO,EAAA6D,KAA4B,SAAA0R,EAAU9Q,EAAMD,GAAhB,IAAAgR,EAAAC,EAAAC,EAAAC,EAAA/D,EAAAjJ,EAAAgJ,EAAAiE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAzH,EAAAzO,EAAA4O,KAAA,SAAAuH,GAAA,cAAAA,EAAAnT,KAAAmT,EAAArH,MAAA,OAE1B,OADQ0G,EAAgC/Q,EAAhC+Q,OAAmBC,EAAahR,EAAxBmH,UADUuK,EAAArH,KAAA,EAEpB,CAAEtK,UAASC,OAAME,KAAK,EAAMD,QAAO,gBAAmBG,OAAQ,GAF1C,OAKV,OAAAsR,EAAApH,cAAO4B,GAAS6E,EAAQhR,GAAxB,QALU,UAMpB,eADAkR,EALoBS,EAAAlH,IAMI5G,MANJ,CAAA8N,EAAArH,KAAA,cAOlB,IAAI5C,GAAJ,8BAAgDsJ,GAP9B,WAQpBG,EAAKnR,EAAQc,QAAQoQ,EAAQrN,MAAMM,cAClB,aAAZgN,EAAGhV,KATY,CAAAwV,EAAArH,KAAA,eAUlB,IAAI5C,GAAJ,8BAAgDsJ,GAV9B,QAarBG,EAAG/C,QACc,qBAAhB4C,EAAO7U,MAEqBgI,EAAe+M,EAArC5E,qBACRc,EAAiB,CAAErL,KAAM,OAAQ6B,KAAM,OAAQC,MAAO,CAAEM,gBAExDiJ,EAAiB,CAAErL,KAAM,OAAQ6B,KAAM,OAAQC,WAAOE,IAKpDoJ,EAAO,GAxBaiE,GAAA,EAAAC,GAAA,EAAAC,OAAAvN,EAAA4N,EAAAnT,KAAA,GAAA+S,EAyBJN,EAzBI1C,OAAAC,YAAA,WAAA4C,GAAAI,EAAAD,EAAAjH,QAAAmE,KAAA,CAAAkD,EAAArH,KAAA,SA0Bd,OADDmH,EAzBeD,EAAA3N,MAAA8N,EAAAjH,GA0BxByC,EAAUwE,EAAApH,cAAO4B,GAASsF,EAASzR,GAAzB,SA1Bc,QAAA2R,EAAAC,GAAAD,EAAA3C,GAAA2C,EAAAjH,GA0BnBnL,KA1BmBuI,KAAA6J,EAAAjH,GAAAiH,EAAAC,IAAA,QAAAR,GAAA,EAAAO,EAAArH,KAAA,iBAAAqH,EAAArH,KAAA,iBAAAqH,EAAAnT,KAAA,GAAAmT,EAAAE,GAAAF,EAAA,UAAAN,GAAA,EAAAC,EAAAK,EAAAE,GAAA,QAAAF,EAAAnT,KAAA,GAAAmT,EAAAnT,KAAA,GAAA4S,GAAA,MAAAG,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAAiD,EAAAnT,KAAA,IAAA6S,EAAA,CAAAM,EAAArH,KAAA,eAAAgH,EAAA,eAAAK,EAAAhD,OAAA,mBAAAgD,EAAAhD,OAAA,YA8B1B,OA9B0BgD,EAAArH,KAAA,GA8BpB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,kBACPG,OAAQ,GAnCgB,QAqCd,OAAAsR,EAAApH,cAAOgC,GAAe4E,EAAIhE,EAAMC,EAAgBpN,GAAhD,SArCc,QAsC1B,OADM0R,EArCoBC,EAAAG,GAAAH,EAAArH,KAAA,GAsCpB,CAAEtK,UAASC,OAAMC,QAAO,iBAAoBG,OAAQ,GAtChC,eAAAsR,EAAAnH,OAAA,SAuCnBkH,GAvCmB,yBAAAC,EAAAhH,SAAAoG,EAAA,oCA0C5BtE,GAAWsF,oBAAX9H,EAAAzO,EAAA6D,KAAiC,SAAA2S,EAAU/R,EAAMD,GAAhB,IAAA6C,EAAAsO,EAAAhN,EAAA,OAAA8F,EAAAzO,EAAA4O,KAAA,SAAA6H,GAAA,cAAAA,EAAAzT,KAAAyT,EAAA3H,MAAA,WAC3BrK,EAAKiS,QAASjS,EAAKkS,UADQ,CAAAF,EAAA3H,KAAA,cAEvB,IAAI9C,GAAJ,mDAFuB,UAG1BvH,EAAKmS,IAAuB,eAAjBnS,EAAKmS,GAAGjW,KAHO,CAAA8V,EAAA3H,KAAA,cAIvB,IAAI5C,GAAJ,oBAAsCzH,EAAKmS,IAJpB,OAM/B,OAN+BH,EAAA3H,KAAA,EAMzB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,oBAAAgE,OAAsBjE,EAAKmS,GAAGxO,MACrCvD,OAAQ,GAXqB,OA4B/B,OAfMwC,EAAQ7C,EAAQ8C,OAAO9C,EAAQa,cAC/BsQ,EAAK,CACThV,KAAM,WACNiS,OAAO,EACPf,cAAerN,EAAQa,aACvBZ,OACAoC,OAAQrC,EAAQ4J,mBAAmB3J,GACnCsC,WAAY,IAER4B,EAAanE,EAAQc,QAAQvB,KAAK4R,GAAM,EAC9CtO,EAAMI,UAAUhD,EAAKmS,GAAGxO,MAAQ,CAC9BA,KAAM3D,EAAKmS,GAAGxO,KACd7B,KAAM,UACN8B,MAAO,CAAEM,eA1BoB8N,EAAA3H,KAAA,GA4BzB,CACJtK,UACAC,OACAC,QAAO,qBAAAgE,OAAuBjE,EAAKmS,GAAGxO,MACtCvD,OAAQ,GAhCqB,yBAAA4R,EAAAtH,SAAAqH,KAoCjCvF,GAAW4F,eAAXpI,EAAAzO,EAAA6D,KAA4B,SAAAiT,EAAUrS,EAAMD,EAAhBuS,GAAA,IAAApO,EAAAjD,EAAAF,EAAA6C,EAAA,OAAAoG,EAAAzO,EAAA4O,KAAA,SAAAoI,GAAA,cAAAA,EAAAhU,KAAAgU,EAAAlI,MAAA,UAA2BnG,EAA3BoO,EAA2BpO,WAEpC,gBADTjD,EAAQjB,EAARiB,KACA/E,KAFkB,CAAAqW,EAAAlI,KAAA,cAGlB,IAAIzD,EAAJ,wEAHkB,OAQZ,OADR7F,EAAMhB,EAAQc,QAAQqD,GACdqO,EAAAjI,cAAO4B,GAASlM,EAAK4D,MAAO7D,GAA5B,QARY,OAQpB6D,EARoB2O,EAAA/H,GAS1BzJ,EAAIuB,WAAWrB,EAAI0C,MAAQ,CAAEA,KAAM1C,EAAI0C,KAAM7B,KAAM,WAAY8B,SATrC,wBAAA2O,EAAA7H,SAAA2H,KAY5B7F,GAAWgG,iBAAXxI,EAAAzO,EAAA6D,KAA8B,SAAAqT,EAAUzS,EAAMD,GAAhB,IAAAgB,EAAAmD,EAAAwO,EAAAC,EAAAC,EAAAC,EAAAC,EAAA1G,EAAA,OAAApC,EAAAzO,EAAA4O,KAAA,SAAA4I,GAAA,cAAAA,EAAAxU,KAAAwU,EAAA1I,MAAA,OAC5B,OAD4B0I,EAAA1I,KAAA,EACtB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,0BACPG,OAAQ,GANkB,OAQtBW,EAAM,CACV7E,KAAM,SACNqN,UAAWxJ,EAAQ8C,OAAO,GAAGG,UAAUxB,OAAOoC,MAAMM,WACpD5B,WAAY,IAER4B,EAAanE,EAAQc,QAAQvB,KAAKyB,GAAO,EAbnB2R,GAAA,EAAAC,GAAA,EAAAC,OAAA9O,EAAAiP,EAAAxU,KAAA,EAAAsU,EAcL7S,EAAKsC,WAdAgM,OAAAC,YAAA,UAAAmE,GAAAI,EAAAD,EAAAxI,QAAAmE,KAAA,CAAAuE,EAAA1I,KAAA,SAe1B,OADS+B,EAdiB0G,EAAAlP,MAe1BmP,EAAAzI,cAAO4B,GAASE,EAAUrM,EAAS,CAAEmE,eAArC,SAf0B,QAAAwO,GAAA,EAAAK,EAAA1I,KAAA,gBAAA0I,EAAA1I,KAAA,iBAAA0I,EAAAxU,KAAA,GAAAwU,EAAAtI,GAAAsI,EAAA,SAAAJ,GAAA,EAAAC,EAAAG,EAAAtI,GAAA,QAAAsI,EAAAxU,KAAA,GAAAwU,EAAAxU,KAAA,GAAAmU,GAAA,MAAAG,EAAApE,QAAAoE,EAAApE,SAAA,WAAAsE,EAAAxU,KAAA,IAAAoU,EAAA,CAAAI,EAAA1I,KAAA,eAAAuI,EAAA,eAAAG,EAAArE,OAAA,mBAAAqE,EAAArE,OAAA,YAiB5B,OAjB4BqE,EAAA1I,KAAA,GAiBtB,CAAEtK,UAASC,OAAMC,QAAO,2BAA8BG,OAAQ,GAjBxC,eAAA2S,EAAAxI,OAAA,SAkBrB,CAAE3G,MAAO,CAAEM,gBAlBU,yBAAA6O,EAAArI,SAAA+H,EAAA,mCAqB9BjG,GAAWwG,gBAAXhJ,EAAAzO,EAAA6D,KAA6B,SAAA6T,EAAUjT,EAAMD,GAAhB,IAAAmT,EAAAhP,EAAA1E,EAAA,OAAAwK,EAAAzO,EAAA4O,KAAA,SAAAgJ,GAAA,cAAAA,EAAA5U,KAAA4U,EAAA9I,MAAA,OAC3B,OAD2B8I,EAAA9I,KAAA,EACrB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,4BACPG,OAAQ,GANiB,OAQrB8S,EAAM,CACVhX,KAAM,QACNqN,UAAWxJ,EAAQ8C,OAAO,GAAGG,UAAUwG,MAAM5F,MAAMM,WACnD5B,WAAY,IAER4B,EAAanE,EAAQc,QAAQvB,KAAK4T,GAAO,EACtC1T,EAAI,EAdc,YAcXA,EAAIQ,EAAKoT,SAAShW,QAdP,CAAA+V,EAAA9I,KAAA,SAkBf,OAlBe8I,EAAA3I,GAgBjBhL,EAEE2T,EAAA7I,cAAO4B,GAASlM,EAAKoT,SAAS5T,GAAIO,GAAlC,QAlBe,OAAAoT,EAAApE,GAAAoE,EAAA1I,GAkB6B7G,MAHtDsP,EAAI5Q,WAAW9C,GAfU,CAgBvBmE,KAhBuBwP,EAAA3I,GAiBvB1I,KAAM,WACN8B,MAlBuBuP,EAAApE,IAAA,QAcevP,IAdf2T,EAAA9I,KAAA,gBA0B3B,OALA6I,EAAI5Q,WAAWlF,OAAS,CACtBuG,KAAM,SACN7B,KAAM,WACN8B,MAAO5D,EAAKoT,SAAShW,QAxBI+V,EAAA9I,KAAA,GA0BrB,CAAEtK,UAASC,OAAMC,QAAO,6BAAgCG,OAAQ,GA1B3C,eAAA+S,EAAA5I,OAAA,SA2BpB,CAAE3G,MAAO,CAAEM,gBA3BS,yBAAAiP,EAAAzI,SAAAuI,KA8B7BzG,GAAW6G,wBAAXrJ,EAAAzO,EAAA6D,KAAqC,SAAAkU,EAAUtT,EAAMD,GAAhB,IAAAmR,EAAAhN,EAAA,OAAA8F,EAAAzO,EAAA4O,KAAA,SAAAoJ,GAAA,cAAAA,EAAAhV,KAAAgV,EAAAlJ,MAAA,WAC/BrK,EAAKiS,QAASjS,EAAKkS,UADY,CAAAqB,EAAAlJ,KAAA,cAE3B,IAAI9C,GAAJ,mDAF2B,OAanC,OATM2J,EAAK,CACThV,KAAM,WACNiS,OAAO,EACPf,cAAerN,EAAQa,aACvBZ,OACAoC,OAAQrC,EAAQ4J,mBAAmB3J,GACnCsC,WAAY,IAER4B,EAAanE,EAAQc,QAAQvB,KAAK4R,GAAM,EAZXqC,EAAAlJ,KAAA,EAa7B,CAAEtK,UAASC,OAAMC,QAAO,2BAA8BG,OAAQ,GAbjC,cAAAmT,EAAAhJ,OAAA,SAc5B,CAAE3G,MAAO,CAAEM,gBAdiB,wBAAAqP,EAAA7I,SAAA4I,KAiBrC9G,GAAWgH,iBAAXxJ,EAAAzO,EAAA6D,KAA8B,SAAAqU,EAAUzT,EAAMD,GAAhB,IAAA2T,EAAAC,EAAA/C,EAAAgD,EAAA,OAAA5J,EAAAzO,EAAA4O,KAAA,SAAA0J,GAAA,cAAAA,EAAAtV,KAAAsV,EAAAxJ,MAAA,UACpBqJ,EAAoC1T,EAApC0T,SAAUC,EAA0B3T,EAA1B2T,OAA0B3T,EAAlB8H,IAAK8I,EAAa5Q,EAAb4Q,SAEd,OAAb8C,GAAkC,OAAbA,EAHG,CAAAG,EAAAxJ,KAAA,cAIpB,IAAI9C,GAAJ,mCAAAtD,OAAoDyP,IAJhC,OAO5B,OAP4BG,EAAAxJ,KAAA,EAOtB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,6BACPG,OAAQ,GAZkB,WAgBxBuT,EAhBwB,CAAAE,EAAAxJ,KAAA,QAiBjB,OAAAwJ,EAAAvJ,cAAO4B,GAAS0E,EAAU7Q,GAA1B,QAjBiB,OAiB1B6T,EAjB0BC,EAAArJ,GAAA,OAoB5B,OAAAqJ,EAAAvJ,cAAO4B,GACL,CACEhQ,KAAM,uBACNgH,UAAU,EACVwQ,SAAU,IACVI,KAAMlD,EACNmD,MAAO,CACL7X,KAAM,mBACNgH,UAAU,EACVwQ,SAAUA,EAAS,GACnBI,KAAMlD,EACNmD,MAAO,CACL7X,KAAM,iBACNgH,UAAU,EACVU,MAAO,KAIb7D,GAlBF,QApB4B,UAyCvB4T,EAzCuB,CAAAE,EAAAxJ,KAAA,SA0CjB,OAAAwJ,EAAAvJ,cAAO4B,GAAS0E,EAAU7Q,GAA1B,SA1CiB,QA0C1B6T,EA1C0BC,EAAA9E,GAAA,QA6C5B,OA7C4B8E,EAAAxJ,KAAA,GA6CtB,CAAEtK,UAASC,OAAMC,QAAO,8BAAiCG,OAAQ,GA7C3C,eAAAyT,EAAAtJ,OAAA,SA8CrBqJ,GA9CqB,yBAAAC,EAAAnJ,SAAA+I,KAiD9BjH,GAAWwH,iBAAXhK,EAAAzO,EAAA6D,KAA8B,SAAA6U,EAAUjU,EAAMD,GAAhB,IAAA+T,EAAAC,EAAAG,EAAAC,EAAA,OAAAnK,EAAAzO,EAAA4O,KAAA,SAAAiK,GAAA,cAAAA,EAAA7V,KAAA6V,EAAA/J,MAAA,OAE5B,OADQyJ,EAAgB9T,EAAhB8T,KAAMC,EAAU/T,EAAV+T,MADcK,EAAA/J,KAAA,EAEtB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,6BACPG,OAAQ,GAPkB,OAST,OAAAgU,EAAA9J,cAAO4B,GAAS4H,EAAM/T,GAAtB,QATS,UAStBmU,EATsBE,EAAA5J,GASuB5G,MAC7B,OAAlB5D,EAAK0T,UAAsBQ,EAVH,CAAAE,EAAA/J,KAAA,eAAA+J,EAAA7J,OAAA,SAUqB2J,GAVrB,UAWN,OAAlBlU,EAAK0T,WAAqBQ,EAXF,CAAAE,EAAA/J,KAAA,eAAA+J,EAAA7J,OAAA,SAWoB2J,GAXpB,OAYR,OAAAE,EAAA9J,cAAO4B,GAAS6H,EAAOhU,GAAvB,SAZQ,QAa5B,OADMoU,EAZsBC,EAAA3J,GAYyB7G,MAZzBwQ,EAAA/J,KAAA,GAatB,CACJtK,UACAC,OACAC,QAAO,8BACPG,OAAQ,GAjBkB,eAAAgU,EAAA7J,OAAA,SAmBrB,CAAE3G,MAAO+I,GAAc3M,EAAK0T,SAAUQ,EAAWC,KAnB5B,yBAAAC,EAAA1J,SAAAuJ,KAsB9BzH,GAAW6H,eAAXrK,EAAAzO,EAAA6D,KAA4B,SAAAkV,EAAUtU,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAoK,GAAA,cAAAA,EAAAhW,KAAAgW,EAAAlK,MAAA,OACnB,OAAAkK,EAAAjK,cAAO4B,GAAS1K,OAAAmN,GAAA,EAAAnN,CAAA,GAEhBxB,EAFe,CAGlB9D,KAAM,aACNyH,KAAM,SAER5D,GANK,QADmB,cAAAwU,EAAAhK,OAAA,SAAAgK,EAAA/J,IAAA,wBAAA+J,EAAA7J,SAAA4J,KAW5B9H,GAAWnB,WAAXrB,EAAAzO,EAAA6D,KAAwB,SAAAoV,EAAUxU,EAAMD,GAAhB,IAAA0U,EAAAhJ,EAAA,OAAAzB,EAAAzO,EAAA4O,KAAA,SAAAuK,GAAA,cAAAA,EAAAnW,KAAAmW,EAAArK,MAAA,UACJ,cAAdrK,EAAK2D,KADa,CAAA+Q,EAAArK,KAAA,QAEpB,OAFoBqK,EAAArK,KAAA,EAEJ,CAAErK,OAAMC,QAAO,sBAAyBG,OAAQ,GAF5C,cAAAsU,EAAAnK,OAAA,SAGb,CAAE3G,WAAOE,IAHI,OAML,OAAA4Q,EAAApK,cAAOK,GAAO3K,EAAMD,GAApB,QANK,OAOtB,OAPsB0U,EAAAC,EAAAlK,GAMdiB,EANcgJ,EAMdhJ,KANciJ,EAAArK,KAAA,EAOhB,CAAEtK,UAASC,OAAMC,QAAO,qBAAwBG,OAAQ,GAPxC,cAAAsU,EAAAnK,OAAA,SAQf,CAAE3G,MAAO6H,EAAK7H,QARC,yBAAA8Q,EAAAhK,SAAA8J,KAWxBhI,GAAWd,iBAAX1B,EAAAzO,EAAA6D,KAA8B,SAAAuV,EAAU3U,EAAMD,GAAhB,IAAA3E,EAAAqQ,EAAAY,EAAA,OAAArC,EAAAzO,EAAA4O,KAAA,SAAAyK,GAAA,cAAAA,EAAArW,KAAAqW,EAAAvK,MAAA,OACX,OAAAuK,EAAAtK,cAAOK,GAAO3K,EAAMD,GAApB,QADW,UACtB3E,EADsBwZ,EAAApK,GAAA,CAAAoK,EAAAvK,KAAA,QAG1B,OAH0BuK,EAAAvK,KAAA,EAGpB,CAAEtK,UAASC,OAAMC,QAAO,0BAA6BG,OAAQ,GAHzC,cAAAwU,EAAArK,OAAA,SAInB,CAAE3G,WAAOE,IAJU,OAO5B,OADQ2H,EAA+BrQ,EAA/BqQ,KAAMY,EAAyBjR,EAAzBiR,qBANcuI,EAAAvK,KAAA,EAOtB,CACJtK,UACAC,OACAC,QAAO,yBAAAgE,OAA2BwH,EAAK7H,OACvCxD,OAAQ,GAXkB,cAAAwU,EAAArK,OAAA,SAarB,CAAE3G,MAAO6H,EAAK7H,MAAOyI,yBAbA,yBAAAuI,EAAAlK,SAAAiK,KAgB9BnI,GAAWqI,qBAAX7K,EAAAzO,EAAA6D,KAAkC,SAAA0V,EAAU9U,EAAMD,GAAhB,IAAA+T,EAAAC,EAAAgB,EAAAtJ,EAAA,OAAAzB,EAAAzO,EAAA4O,KAAA,SAAA6K,GAAA,cAAAA,EAAAzW,KAAAyW,EAAA3K,MAAA,UACxByJ,EAAgB9T,EAAhB8T,KAAMC,EAAU/T,EAAV+T,MAEQ,MAAlB/T,EAAK0T,SAHuB,CAAAsB,EAAA3K,KAAA,cAIxB,IAAI9C,GAAJ,4BAAAtD,OAA6CjE,EAAK0T,WAJ1B,OAOf,OAAAsB,EAAA1K,cAAOK,GAAOmJ,EAAM/T,EAAS,CAAE8L,mBAAmB,IAAlD,QAPe,OAQlB,OARkBkJ,EAAAC,EAAAxK,GAOxBiB,EAPwBsJ,EAOxBtJ,KACMuJ,EAAA1K,cAAO4B,GAAS6H,EAAOhU,GAAvB,QARkB,OAQhC0L,EAAK7H,MAR2BoR,EAAAvK,GAQe7G,MARf,wBAAAoR,EAAAtK,SAAAoK,KA+BlCtI,GAAWyI,aAAXjL,EAAAzO,EAAA6D,KAA0B,SAAA8V,EAAUlV,EAAMD,GAAhB,IAAAoV,EAAAjG,EAAAhR,EAAAqK,EAAA6M,EAAAC,EAAAC,EAAAC,EAAA,OAAAvL,EAAAzO,EAAA4O,KAAA,SAAAqL,GAAA,cAAAA,EAAAjX,KAAAiX,EAAAnL,MAAA,OAExB,OADQ8K,EAA6BnV,EAA7BmV,KAAMjG,EAAuBlP,EAAvBkP,KAAMhR,EAAiB8B,EAAjB9B,OAAQqK,EAASvI,EAATuI,KADJiN,EAAAnL,KAAA,EAElB,CACJtK,UACAC,OACAE,KAAK,EACLE,OAAQ,EACRH,QAAO,wBAPe,OAYxB,OAZwBmV,EASQtI,GAAa/M,GATrBsV,EAAA7T,OAAAC,EAAA,EAAAD,CAAA4T,EAAA,GAAAC,EAAA,GASPC,EATOD,EAAA,GAUlBE,EAVkB/T,OAAAmN,GAAA,EAAAnN,CAAA,GAUGzB,EAVH,CAUYa,aAAc0U,IAElDE,EAAAlL,cAAO4B,GAASiJ,EAAMI,GAAtB,QAZwB,OAcjB,OAAAC,EAAAlL,cAAOiC,GAAa2C,EAAMqG,GAA1B,QAdiB,WAAAC,EAAA/K,GAAA,CAAA+K,EAAAnL,KAAA,SAetB,OAAAmL,EAAAlL,cAAO4B,GAAS3D,EAAMgN,GAAtB,QAfsB,OAgBtB,OAhBsBC,EAAAnL,KAAA,GAgBhB,CACJtK,UACAC,KAAM9B,EACNgC,KAAK,EACLE,OAAQ,EACRH,QAAO,cArBa,QAuBtB,OAAAuV,EAAAlL,cAAO4B,GAAShO,EAAQqX,GAAxB,SAvBsB,QAwBtB,OAxBsBC,EAAAnL,KAAA,GAwBhB,CACJtK,UACAC,KAAM9B,EACNkC,OAAQ,EACRH,QAAO,qBA5Ba,QAAAuV,EAAAnL,KAAA,gBAgCxB,OAhCwBmL,EAAAnL,KAAA,GAgClB,CACJtK,UACAC,OACAI,OAAQ,EACRH,QAAO,sBApCe,yBAAAuV,EAAA9K,SAAAwK,KAwC1B1I,GAAWiJ,YAAXzL,EAAAzO,EAAA6D,KAAyB,SAAAsW,EAAU1V,EAAMD,GAAhB,IAAAmP,EAAAyG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAR,EAAA,OAAAvL,EAAAzO,EAAA4O,KAAA,SAAA6L,GAAA,cAAAA,EAAAzX,KAAAyX,EAAA3L,MAAA,OAEvB,OADQ6E,EAAgClP,EAAhCkP,KAAMyG,EAA0B3V,EAA1B2V,WAAYC,EAAc5V,EAAd4V,UADHI,EAAA3L,KAAA,EAEjB,CACJtK,UACAC,OACAE,KAAK,EACLE,OAAQ,EACRH,QAAO,4BAPc,OAYZ,OAZY4V,EASe/I,GAAa/M,GAT5B+V,EAAAtU,OAAAC,EAAA,EAAAD,CAAAqU,EAAA,GAAAC,EAAA,GASHC,EATGD,EAAA,GAUjBP,EAViB/T,OAAAmN,GAAA,EAAAnN,CAAA,GAUIzB,EAVJ,CAUaa,aAAcmV,IAEvCC,EAAA1L,cAAO4B,GAASgD,EAAMqG,GAAtB,QAZY,WAAAS,EAAAxL,GAY0B5G,MAZ1B,CAAAoS,EAAA3L,KAAA,SAerB,OAAA2L,EAAA1L,cAAO4B,GAASyJ,EAAYJ,GAA5B,QAfqB,OAAAS,EAAA3L,KAAA,qBAgBZuL,EAhBY,CAAAI,EAAA3L,KAAA,SAiBrB,OAAA2L,EAAA1L,cAAO4B,GAAS0J,EAAWL,GAA3B,SAjBqB,QAoBvB,OApBuBS,EAAA3L,KAAA,GAoBjB,CACJtK,UACAC,OACAI,OAAQ,EACRH,QAAO,0BAxBc,yBAAA+V,EAAAtL,SAAAgL,KA4BzBlJ,GAAWyJ,oBAAXjM,EAAAzO,EAAA6D,KAAiC,SAAA8W,EAAUlW,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAgM,GAAA,cAAAA,EAAA5X,KAAA4X,EAAA9L,MAAA,OAC/B,OAD+B8L,EAAA9L,KAAA,EACzB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,+BACPG,OAAQ,GANqB,OAQ/B,OAAA+V,EAAA7L,cAAO4B,GAASlM,EAAKwI,WAAYzI,GAAjC,QAR+B,OAS/B,OAT+BoW,EAAA9L,KAAA,EASzB,CACJtK,UACAC,OACAC,QAAO,gCACPG,OAAQ,GAbqB,wBAAA+V,EAAAzL,SAAAwL,KAiBjC1J,GAAW4J,oBAAXpM,EAAAzO,EAAA6D,KAAiC,SAAAiX,EAAUrW,EAAMD,GAAhB,IAAA+B,EAAAwU,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA3M,EAAAzO,EAAA4O,KAAA,SAAAyM,GAAA,cAAAA,EAAArY,KAAAqY,EAAAvM,MAAA,OAE/B,OADMvI,EAAO9B,EAAK8B,KADa8U,EAAAvM,KAAA,EAEzB,CACJtK,UACAC,OACAE,KAAK,EACLD,QAAO,GAAAgE,OAAKnC,EAAL,yBACP1B,OAAQ,GAPqB,OAAAkW,GAAA,EAAAC,GAAA,EAAAC,OAAA1S,EAAA8S,EAAArY,KAAA,EAAAkY,EASLzW,EAAK6W,aATAvI,OAAAC,YAAA,UAAA+H,GAAAI,EAAAD,EAAApM,QAAAmE,KAAA,CAAAoI,EAAAvM,KAAA,SAU7B,OADSsM,EAToBD,EAAA9S,MAU7BgT,EAAAtM,cAAO4B,GAASyK,EAAa5W,EAAS,CAAE+B,SAAxC,SAV6B,QAAAwU,GAAA,EAAAM,EAAAvM,KAAA,gBAAAuM,EAAAvM,KAAA,iBAAAuM,EAAArY,KAAA,GAAAqY,EAAAnM,GAAAmM,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAAnM,GAAA,QAAAmM,EAAArY,KAAA,GAAAqY,EAAArY,KAAA,GAAA+X,GAAA,MAAAG,EAAAhI,QAAAgI,EAAAhI,SAAA,WAAAmI,EAAArY,KAAA,IAAAgY,EAAA,CAAAK,EAAAvM,KAAA,eAAAmM,EAAA,eAAAI,EAAAlI,OAAA,mBAAAkI,EAAAlI,OAAA,YAY/B,OAZ+BkI,EAAAvM,KAAA,GAYzB,CACJtK,UACAC,OACAC,QAAO,aAAAgE,OAAenC,EAAf,yBACP1B,OAAQ,GAhBqB,yBAAAwW,EAAAlM,SAAA2L,EAAA,mCAoBjC7J,GAAWsK,mBAAX9M,EAAAzO,EAAA6D,KAAgC,SAAA2X,EAAU/W,EAAMD,EAAhBiX,GAAA,IAAAlV,EAAAc,EAAAe,EAAAC,EAAA,OAAAoG,EAAAzO,EAAA4O,KAAA,SAAA8M,GAAA,cAAAA,EAAA1Y,KAAA0Y,EAAA5M,MAAA,UACjB,SAD4CvI,EAA3BkV,EAA2BlV,OAC1B,UAATA,EADQ,CAAAmV,EAAA5M,KAAA,cAEtB,IAAI9C,GAAJ,iCAAAtD,OAAkDnC,IAF5B,UAGT,eAAjB9B,EAAKmS,GAAGjW,KAHkB,CAAA+a,EAAA5M,KAAA,cAItB,IAAIzD,EAAJ,8CAJsB,OAS9B,OAHMhE,EAAQ7C,EAAQ8C,OAAO9C,EAAQa,cAC/B+C,EAAO3D,EAAKmS,GAAGxO,KACrBf,EAAMI,UAAUW,GAAQ,CAAEA,OAAM7B,QARFmV,EAAA5M,KAAA,GASxB,CAAEtK,UAASC,KAAMA,EAAKmS,GAAIlS,QAAO,YAAAgE,OAAcN,GAAQvD,OAAQ,GATvC,YAU1BJ,EAAKmV,KAVqB,CAAA8B,EAAA5M,KAAA,SAWb,OAAA4M,EAAA3M,cAAO4B,GAASlM,EAAKmV,KAAMpV,GAA3B,SAXa,QAa5B,OAFM6D,EAXsBqT,EAAAzM,GAWwB5G,MACpDhB,EAAMI,UAAUW,GAAMC,MAAQA,EAZFqT,EAAA5M,KAAA,GAatB,CAAEtK,UAASC,OAAMC,QAAO,eAAAgE,OAAiBN,GAAQvD,OAAQ,GAbnC,yBAAA6W,EAAAvM,SAAAqM,KAiBhCvK,GAAW0K,YAAXlN,EAAAzO,EAAA6D,KAAyB,SAAA+X,EAAUnX,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAiN,GAAA,cAAAA,EAAA7Y,KAAA6Y,EAAA/M,MAAA,OACvB,OADuB+M,EAAA/M,KAAA,EACjB,CAAEtK,UAASC,OAAMC,QAAO,iBAAoBG,OAAQ,GADnC,cAAAgX,EAAA7M,OAAA,SAEhB,CAAE3G,MAAO,OAFO,wBAAAwT,EAAA1M,SAAAyM,KAKzB3K,GAAW6K,cAAXrN,EAAAzO,EAAA6D,KAA2B,SAAAkY,EAAUtX,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAoN,GAAA,cAAAA,EAAAhZ,KAAAgZ,EAAAlN,MAAA,OACzB,OADyBkN,EAAAlN,KAAA,EACnB,CAAEtK,UAASC,OAAMC,QAAO,cAAAgE,OAAgBjE,EAAK4D,MAArB,KAA+BxD,OAAQ,GAD5C,cAAAmX,EAAAhN,OAAA,SAElB,CAAE3G,MAAO5D,EAAK4D,QAFI,wBAAA2T,EAAA7M,SAAA4M,KAK3B9K,GAAWgL,eAAXxN,EAAAzO,EAAA6D,KAA4B,SAAAqY,EAAUzX,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAAuN,GAAA,cAAAA,EAAAnZ,KAAAmZ,EAAArN,MAAA,OAC1B,OAD0BqN,EAAArN,KAAA,EACpB,CAAEtK,UAASC,OAAMC,QAAO,aAAAgE,OAAejE,EAAK4D,OAASxD,OAAQ,GADzC,cAAAsX,EAAAnN,OAAA,SAEnB,CAAE3G,MAAO5D,EAAK4D,QAFK,wBAAA8T,EAAAhN,SAAA+M,KAK5BjL,GAAWmL,eAAX3N,EAAAzO,EAAA6D,KAA4B,SAAAwY,EAAU5X,EAAMD,GAAhB,OAAAiK,EAAAzO,EAAA4O,KAAA,SAAA0N,GAAA,cAAAA,EAAAtZ,KAAAsZ,EAAAxN,MAAA,OAC1B,OAD0BwN,EAAAxN,KAAA,EACpB,CAAEtK,UAASC,OAAMC,QAAO,aAAAgE,OAAejE,EAAK4D,OAASxD,OAAQ,GADzC,cAAAyX,EAAAtN,OAAA,SAEnB,CAAE3G,MAAO5D,EAAK4D,QAFK,wBAAAiU,EAAAnN,SAAAkN,6BChkBb,SAASE,GAAsBC,GAE5CC,KAASD,EAAK,CACZ1M,WADY,SACD4M,GACT,GAAIA,EAAKC,yBAGP,IAFA,IAAMC,EAAeF,EAAKjY,KAAK2D,KAC3BnE,EAAI,EACAyY,EAAOA,EAAKG,qBAAsB,CACxC,GAAKH,EAAKrV,MAAMyV,SAASF,GAIlB,CACLF,EAAKjY,KAAKgP,YAAciJ,EAAKjY,KAAKgP,aAAexP,EAAI,EAErD,MANAyY,EAAKjY,KAAKsY,KAAOL,EAAKjY,KAAKsY,MAAQ,GACnCL,EAAKjY,KAAKsY,KAAKH,IAAgB,EAOjC3Y,QC9BV,IAAM+Y,GAAQ,eAACC,EAADrR,UAAA/J,OAAA,QAAA0G,IAAAqD,UAAA,GAAAA,UAAA,GAAM,EAAN,OAAY,IAAIsR,QAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAASF,MAEtD,SAAeI,GAA9BC,GAAA,OAAAC,GAAA5R,MAAAH,KAAAI,wDAAe,SAAA8C,EAAsB8O,GAAtB,IAAAhB,EAAAhY,EAAAiZ,EAAA1U,EAAA9E,EAAAgQ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAqJ,EAAA,OAAAjP,EAAAzO,EAAA4O,KAAA,SAAAC,GAAA,cAAAA,EAAA7L,KAAA6L,EAAAC,MAAA,OAEbyN,GADMC,EAAM1P,gBAAM0Q,KAEZhZ,EAAU8I,MACRa,WAAaqP,EACfC,EAAU9M,GAAS6L,EAAKhY,GAExBuE,EAAU,GACZ9E,EAAI,EARK4K,EAAA7L,KAAA,EAAAiR,GAAA,EAAAC,GAAA,EAAAC,OAAA5L,EAAAsG,EAAA7L,KAAA,GAAAoR,EAUQqJ,EAVR1K,OAAAC,YAAA,WAAAiB,GAAAI,EAAAD,EAAAtF,QAAAmE,KAAA,CAAApE,EAAAC,KAAA,aAUF4O,EAVErJ,EAAAhM,OAWG5D,KAAKkD,UACfoB,EAAQhF,KAAK4Z,IAASD,MAEpBzZ,IAAM,KAdD,CAAA4K,EAAAC,KAAA,gBAePlG,QAAQ6D,MAAM,iBAAkB1D,GAfzB8F,EAAAG,OAAA,SAgBA,CAAEjG,UAAStJ,aAAc,IAAIsM,MAAM,qBAhBnC,WAmBL9H,EAAI,MAAQ,EAnBP,CAAA4K,EAAAC,KAAA,gBAAAD,EAAAC,KAAA,GAoBDkO,KApBC,QAAA/I,GAAA,EAAApF,EAAAC,KAAA,iBAAAD,EAAAC,KAAA,iBAAAD,EAAA7L,KAAA,GAAA6L,EAAAI,GAAAJ,EAAA,UAAAqF,GAAA,EAAAC,EAAAtF,EAAAI,GAAA,QAAAJ,EAAA7L,KAAA,GAAA6L,EAAA7L,KAAA,GAAAiR,GAAA,MAAAG,EAAAlB,QAAAkB,EAAAlB,SAAA,WAAArE,EAAA7L,KAAA,IAAAkR,EAAA,CAAArF,EAAAC,KAAA,eAAAqF,EAAA,eAAAtF,EAAAsE,OAAA,mBAAAtE,EAAAsE,OAAA,YAAAtE,EAAAC,KAAA,oBAAAD,EAAA7L,KAAA,GAAA6L,EAAAK,GAAAL,EAAA,WAwBPA,EAAAK,cAAahD,IAxBN,CAAA2C,EAAAC,KAAA,gBA0BTlG,QAAQC,IAAI,wBAAZgG,EAAAK,IA1BSL,EAAAG,OAAA,SA2BF,CAAEjG,UAAStJ,aAAYoP,EAAAK,KA3BrB,cAAAL,EAAAK,GAAA,eAAAL,EAAAG,OAAA,SA+BN,CAAEjG,YA/BI,yBAAA8F,EAAAM,SAAAT,EAAA,+yCCEf,IAAMkP,GAAmBC,YAAqB,QACxCC,GAAwBD,YAAqB,aAC7CE,GAAqBF,YAAqB,UAC1CG,GAA2BH,YAAqB,gBAChDI,GAA8BJ,YAAqB,kBAEnDK,GAAU,CACd,CACEC,MAAO,kBACPX,KAAMY,YAAFC,OAIN,CACEF,MAAO,wBACPX,KAAMY,YAAFE,OAMN,CACEH,MAAO,gCACPX,KAAMY,YAAFG,OAaN,CACEJ,MAAO,+BACPX,KAAMY,YAAFI,OAON,CACEL,MAAO,mBACPX,KAAMY,YAAFK,QAsBFC,GAAU,CACdC,KAAM,kBACNC,MAAO,QACPC,aAAa,EACbC,aAAa,EACbC,QAAS,EACTC,gBAAgB,EAChBC,mBAAmB,GAGN,SAASC,KACtB,IAAMC,EAAOjW,iBAAO,CAAEkW,OAAQ,KAAMC,OAAQ,OADhBC,EAEJ1B,GAAgB,2GAFZ2B,EAAAtZ,OAAAC,EAAA,EAAAD,CAAAqZ,EAAA,GAErB9B,EAFqB+B,EAAA,GAEfC,EAFeD,EAAA,GAAAE,EAOMC,KAAQzZ,OAAA0Z,EAAA,EAAA1Z,CAAAwI,EAAAzO,EAAA6D,KAAC,SAAA6K,IAAA,OAAAD,EAAAzO,EAAA4O,KAAA,SAAAC,GAAA,cAAAA,EAAA7L,KAAA6L,EAAAC,MAAA,cAAAD,EAAAC,KAAA,EAAkBuO,GAAOG,GAAzB,cAAA3O,EAAAG,OAAA,SAAAH,EAAA+Q,MAAA,wBAAA/Q,EAAAM,SAAAT,MAAgC,CACzE8O,IADMqC,EAPoBJ,EAOpBI,QAASxX,EAPWoX,EAOXpX,MAAOoE,EAPIgT,EAOJhT,MAIpBA,GAAO7D,QAAQ6D,MAAM,gBAAiBA,GAXd,IAAAqT,EAaY9B,IAAyB,GAbrC+B,EAAA9Z,OAAAC,EAAA,EAAAD,CAAA6Z,EAAA,GAarBlb,EAbqBmb,EAAA,GAaPC,EAbOD,EAAA,GAAAE,EAcClC,GAAmB,GAdpBmC,EAAAja,OAAAC,EAAA,EAAAD,CAAAga,EAAA,GAcrBE,EAdqBD,EAAA,GAcZE,EAdYF,EAAA,GAAAG,EAeMvC,GAAsB,GAf5BwC,EAAAra,OAAAC,EAAA,EAAAD,CAAAoa,EAAA,GAerBE,EAfqBD,EAAA,GAeVE,EAfUF,EAAA,GAAAG,EAgBiBxC,IAC3C,GAjB0ByC,EAAAza,OAAAC,EAAA,EAAAD,CAAAwa,EAAA,GAgBrB1b,EAhBqB2b,EAAA,GAgBLC,EAhBKD,EAAA,GAoBtB3X,EACJV,GAASA,EAAMU,QAAQlH,OAAS,EAC5BwG,EAAMU,QAAQlB,OAAO,SAAAhC,GAAA,OAAAA,EAAGhB,QAAuB0b,IAC/C,GAOAK,EAASrW,KAAKE,IAAI,EAAGF,KAAKC,IAAI2V,EAASpX,EAAQlH,OAAS,IAGxDtC,EAAOwJ,EAAUA,EAAQ6X,GAAU,KAoBzC,OAlBAC,oBAAU,WACR,GAAK1B,EAAK/Z,QAAQga,SAClBD,EAAK/Z,QAAQia,QAAUF,EAAK/Z,QAAQia,OAAO1d,QAEtCpC,GAAL,CACA,IAAMuhB,EAAM3B,EAAK/Z,QAAQga,OAAO2B,SAC1BxU,EAAMhN,EAAKkF,KAAK8H,IAClBA,IACF4S,EAAK/Z,QAAQia,OAASyB,EAAIhd,SACxB,CAAExB,KAAMiK,EAAI9I,MAAMnB,KAAO,EAAG0e,GAAIzU,EAAI9I,MAAM+I,QAC1C,CAAElK,KAAMiK,EAAI3I,IAAItB,KAAO,EAAG0e,GAAIzU,EAAI3I,IAAI4I,QACtC,CACEtM,UAAWX,EAAKoF,IAAMxE,IAAO8gB,UAAY9gB,IAAO+gB,gBAIrD,CAAC/B,EAAM5f,IAGRQ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOqd,MACrBzd,EAAAC,EAAAC,cAACkhB,EAAD,CACEjhB,UAAU,WACVkhB,QAAS1C,GACT2C,eAAgB,SAAAjC,GACdD,EAAK/Z,QAAQga,OAASA,GAExB/W,MAAOmV,EACP8D,eAAgB,SAAClC,EAAQmC,EAAMlZ,GAC7BmX,EAAQnX,GAAS,SAIrBwX,GAAWpT,GAA4B,IAAnB1D,EAAQlH,SAC5B9B,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAOqhB,eAEvB3B,GACC9f,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOshB,MACrB1hB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO0f,SAAvB,eAGHpT,GACC1M,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOshB,MACrB1hB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOsM,OACrB1M,EAAAC,EAAAC,cAAA,2BAAmBwM,EAAML,WAI9B/D,GAASU,GACRhJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC6I,EAAD,CACET,MAAOuY,EACPhe,SAAUwd,EACVrX,QAASA,EACTtJ,aAAc4I,EAAM5I,eAEtBM,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOshB,MACrB1hB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEoI,MAAM,GACNzF,SAAU,SAAA6G,GACR,IAAMiY,EAASxD,GAAQ9b,KACrB,SAAA8E,GAAA,OAAAA,EAAGiX,QAAsB1U,EAAEkY,OAAOtZ,QAEhCqZ,GAAQlC,EAAQkC,EAAOlE,QAG7Bzd,EAAAC,EAAAC,cAAA,UAAQoI,MAAM,IAAd,8BACC6V,GAAQ3Y,IAAI,SAAA2C,GAAA,IAAGiW,EAAHjW,EAAGiW,MAAHjW,EAAUsV,KAAV,OACXzd,EAAAC,EAAAC,cAAA,UAAQyF,IAAKyY,GAAQA,MAGxB,MACDpe,EAAAC,EAAAC,cAAA,kCACqB,IACnBF,EAAAC,EAAAC,cAAA,SACEU,KAAK,WACLC,QAAuB,IAAd2f,EACT3d,SAAU,kBAAM4d,EAAa,EAAID,OAGpC,MACDxgB,EAAAC,EAAAC,cAAA,8BACiB,IACfF,EAAAC,EAAAC,cAAA,SACEU,KAAK,WACLC,QAASgE,EACThC,SAAU,kBAAMod,GAAiBpb,OAGpC,MACD7E,EAAAC,EAAAC,cAAA,gCACmB,IACjBF,EAAAC,EAAAC,cAAA,SACEU,KAAK,WACLC,QAASmE,EACTnC,SAAU,kBAAM+d,GAAoB5b,QAIzCxF,GACCQ,EAAAC,EAAAC,cAACoE,EAAD,CACE9E,KAAMA,EACNqF,aAAcA,EACdG,eAAgBA,IAGnBsD,EAAM5I,cACLM,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOsM,OACrB1M,EAAAC,EAAAC,cAAA,2BAAmBoI,EAAM5I,aAAa2M,kCC9NlCwV,QACW,cAA7BC,OAAOhiB,SAASiiB,UAEe,UAA7BD,OAAOhiB,SAASiiB,UAEhBD,OAAOhiB,SAASiiB,SAASC,MACvB,2DCZNC,iBAAOjiB,EAAAC,EAAAC,cCEQ,WACb,OACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO+e,KACrBnf,EAAAC,EAAAC,cAACK,EAAA,EAAD,KACEP,EAAAC,EAAAC,cAACP,EAAD,MACAK,EAAAC,EAAAC,cAACgiB,GAAA,OAAD,KACEliB,EAAAC,EAAAC,cAACgiB,GAAA,MAAD,CAAOvF,KAAK,QAAQwF,UAAWxhB,IAC/BX,EAAAC,EAAAC,cAACgiB,GAAA,MAAD,CAAOC,UAAWC,SDTrB,MAAStY,SAASuY,eAAe,SD2HlC,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC,oCGlInBtjB,EAAAC,QAAA,CAAkBK,QAAA,yBAAAc,SAAA,0BAAAb,WAAA,iDCAlBP,EAAAC,QAAA,CAAkBme,KAAA,kCAAAyD,UAAA,uCAAAC,WAAA,wCAAAM,aAAA,0CAAAC,KAAA,kCAAA5B,QAAA,qCAAApT,MAAA,wDCAlBrN,EAAAC,QAAA,CAAkBmG,IAAA,iBAAA6B,MAAA,mBAAAE,UAAA,uBAAAjB,KAAA,kBAAAgC,IAAA,iBAAA/B,KAAA,kBAAAvB,MAAA,mBAAAC,IAAA,6DCAlB7F,EAAAC,QAAA,CAAkBqB,YAAA","file":"static/js/main.c7119440.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeline\":\"HistoryTimeline_timeline__lAyEk\",\"step\":\"HistoryTimeline_step__1sRwZ\",\"selected\":\"HistoryTimeline_selected__2nXN5\",\"runtimeError\":\"HistoryTimeline_runtimeError__sq2jZ\"};","import React from \"react\";\nimport cx from \"classnames\";\nimport useReactRouter from \"use-react-router\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Toolbar.module.scss\";\n\nexport default function Toolbar() {\n  const { location } = useReactRouter();\n\n  const atInfoPage = location.pathname !== \"/\";\n\n  return (\n    <div className={styles.Toolbar}>\n      <h1>\n        Visualizing JavaScript execution{\" \"}\n        <em>\n          &mdash; <span style={{ whiteSpace: \"nowrap\" }}>a teaching</span>{\" \"}\n          purposes experiment\n        </em>{\" \"}\n        <Link\n          className={cx(styles.InfoIcon, atInfoPage && styles.atInfoPage)}\n          to={atInfoPage ? \"/\" : \"/info\"}\n        >\n          <span>i</span>\n        </Link>\n      </h1>\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"katex/dist/katex.min.css\";\nimport { InlineMath, BlockMath } from \"react-katex\";\nimport styles from \"./ProjectInfo.module.scss\";\n\nexport default function ProjectInfo() {\n  return (\n    <div className=\"wrap\">\n      <div className={styles.ProjectInfo}>\n        <h2>What am I looking at?</h2>\n        <p>\n          <strong>A steppable visualization of JS execution.</strong>\n        </p>\n        <p>\n          Scopes, references and execution flow can be visually tracked, and\n          while doing this the relevant syntax is broken down to its tree\n          structure of statements and expressions.{\" \"}\n        </p>\n        <p>\n          This can help people new to programming to understand the{\" \"}\n          <em>mechanical</em> and <em>structured</em> way the computer works\n          when it executes JavaScript code.\n        </p>\n\n        <h2>TODO</h2>\n        <p>Any help is appreciated, BTW!</p>\n        <p>\n          <input type=\"checkbox\" checked={false} />\n          &nbsp; Make a small garbage collector for the object graphs, and/or\n          (actually more important) escape analysis for the scope tree. It's\n          daunting to see all those dangling execution scopes lying around that\n          really are just regular stack frames because no variables escaped.\n        </p>\n        <p>\n          <input type=\"checkbox\" checked={false} />\n          &nbsp; Make a visually pleasing and guiding object reference graph /\n          scope tree, a better history scrubber, and other UI work.\n        </p>\n        <p>\n          <input type=\"checkbox\" checked={false} />\n          &nbsp; Implement more of the language. The aim is not to implement a\n          complete JavaScript runtime, and neither to make it performant. Rather\n          we just need to support best practices and most often used\n          functionality. The tool is only meant for teaching purposes, and aimed\n          at beginners. If the codebase is readable, that's a bonus for students\n          interested in how the JavaScript runtime operates.\n        </p>\n        <p>\n          <input type=\"checkbox\" checked={false} />\n          &nbsp; Devise the criteria needed to filter the history nodes\n          according to a multi-level detail configuration option. My initial\n          idea was to just select statement-level nodes, or all nodes, but this\n          doesn't work for visualizing function calls, single-expression\n          map/filter/reduce computations, etc. Possible factors might include:\n          AST node type, nesting depth of AST node, etc.\n        </p>\n        <p>\n          <input type=\"checkbox\" checked={false} />\n          &nbsp; Make a configurable \"widget\" version of smaller size, so that\n          it can be embedded in the teaching materials in various forms. For\n          example, as part of prediction-exercises.\n        </p>\n\n        <h2>Technical details</h2>\n        <p>\n          Original idea, motivation and background can be found @{\" \"}\n          <a href=\"https://github.com/Codaisseur/visualized-execution\">\n            https://github.com/Codaisseur/visualized-execution\n          </a>\n        </p>\n\n        <h3>Escape analysis</h3>\n        <p>\n          A <em>static</em> escape analysis is used to remove dangling execution\n          scopes from the visualization. Static, because we determine whether a\n          scope is definitely escape-free based on a purely lexical analysis. It\n          can happen that certain scopes are not marked escape-free that in fact\n          are due to runtime considerations, but those are left out.\n        </p>\n        <p>\n          A scope might have an escaping variable, if one of its subscopes has\n          one, or one of its own variables has possibly escaped:\n        </p>\n        <BlockMath\n          math={String.raw`\n            \\textrm{Escape}(S)\n            ~\\Leftrightarrow~\n            \\exists_{v \\in S} \\big[\n              \\textrm{Escape}(v, S)\n            \\big]\n            \\lor\n            \\exists_{S' \\in S} \\big[\n              \\textrm{Escape}(S')\n            \\big]\n          `}\n        />\n        <p>\n          A variable can only escape via a function (though maybe nested\n          arbitrarily deep) within that scope, which in which that variable\n          occurs:\n        </p>\n        <BlockMath\n          math={String.raw`\n            \\textrm{Escape}(v, S)\n            ~\\Leftrightarrow~\n            \\exists_{f \\in S} \\big[\n              v \\in \\textrm{FV}(f)\n            \\big]\n            \\lor\n            \\exists_{S' \\in S} \\big[\n              \\textrm{Escape}(v, S')\n            \\big]\n          `}\n        />\n      </div>\n    </div>\n  );\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n\nexport default function(CodeMirror) {\n  CodeMirror.defineOption(\"styleSelectedText\", false, function(cm, val, old) {\n    var prev = old && old !== CodeMirror.Init;\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle =\n        typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection)\n      cm.operation(function() {\n        update(cm);\n      });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length)\n      cm.operation(function() {\n        clear(cm);\n      });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) === 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n    for (var line = from.line; ; ) {\n      var start = line === from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE,\n        atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, { className: cls });\n      if (addAt == null) array.push(mark);\n      else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n    for (var i = 0; i < array.length; ++i) array[i].clear();\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++)\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n\n    var from = cm.getCursor(\"start\"),\n      to = cm.getCursor(\"end\");\n\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n\n    var coverStart = array[0].find(),\n      coverEnd = array[array.length - 1].find();\n    if (\n      !coverStart ||\n      !coverEnd ||\n      to.line - from.line <= CHUNK_SIZE ||\n      cmp(from, coverEnd.to) >= 0 ||\n      cmp(to, coverStart.from) <= 0\n    )\n      return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n}\n","import markSelectionPlugin from \"./mark-selection\";\nimport CodeMirror from \"codemirror\";\n\nmarkSelectionPlugin(CodeMirror);\n","import \"./apply-plugins\";\n\nimport { Controlled } from \"react-codemirror2\";\nimport \"codemirror/mode/jsx/jsx\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"../assets/codemirror-theme.scss\";\n\nexport default Controlled;\n","import React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./Viz.module.scss\";\n\nexport default function Viz({\n  step: { node, context, pre, summary, detail },\n  showBuiltins,\n  escapeAnalysis = false\n}) {\n  return (\n    <div>\n      <p>\n        <em>{summary}</em>\n      </p>\n      <div className={styles.split}>\n        <div className={styles.col}>\n          <Scope\n            context={context}\n            scopeRef={0}\n            current={context.currentScope}\n            showBuiltins={showBuiltins}\n            escapeAnalysis={escapeAnalysis}\n          />\n        </div>\n        <div className={styles.col}>\n          {context.objects.map((obj, i) => {\n            const show = showBuiltins || !obj.builtin;\n            return show ? (\n              <div key={i} style={{ marginBottom: \".4rem\" }}>\n                <div>\n                  object #{i} - {obj.type}\n                </div>\n                <Obj obj={obj} />\n              </div>\n            ) : null;\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Obj({ obj }) {\n  const [showBody, set_showBody] = useState(true);\n\n  return (\n    <div className={styles.obj}>\n      {/* {obj.type === \"array\" && (\n        <>\n          {Object.values(obj.elements).map((value, i) => (\n            <div key={i} className={styles.item}>\n              <span className={styles.kind}>item</span> <Value value={value} />\n            </div>\n          ))}\n        </>\n      )} */}\n      {obj.type === \"function\" && (\n        <>\n          <div className={styles.item}>\n            <span\n              className={styles.kind}\n              style={{ cursor: \"pointer\" }}\n              onClick={() => set_showBody(!showBody)}\n            >\n              {showBody ? \"hide\" : \"show\"} body\n            </span>{\" \"}\n            {showBody && (\n              <pre\n                style={{\n                  margin: \"0 0 0 .4rem\",\n                  display: \"inline-block\",\n                  verticalAlign: \"text-top\"\n                }}\n              >\n                {obj.source}\n              </pre>\n            )}\n          </div>\n        </>\n      )}\n      {Object.values(obj.properties || {}).map((v, i) => (\n        <Var key={i} v={v} />\n      ))}\n    </div>\n  );\n}\n\nfunction Scope({\n  context,\n  scopeRef,\n  current,\n  showBuiltins,\n  escapeAnalysis = false\n}) {\n  const scope = context.scopes[scopeRef];\n  const isCurrent = current === scopeRef;\n  const vars = Object.values(scope.variables);\n\n  const show = showBuiltins || !scope._builtin;\n\n  const shownVars = show\n    ? vars.filter(v => showBuiltins || v.kind !== \"builtin\")\n    : [];\n\n  if (shownVars.length === 0 && scope.children.length === 0) return null;\n  if (escapeAnalysis && scope.freed) return null;\n\n  const className =\n    shownVars.length === 0 && !show\n      ? \"\"\n      : cx({ [styles.scope]: true, [styles.isCurrent]: isCurrent });\n\n  return (\n    <div className={className}>\n      {shownVars.map((v, i) => (\n        <Var key={i} v={v} />\n      ))}\n      {scope.children.map(childRef => (\n        <div key={childRef}>\n          <Scope\n            context={context}\n            scopeRef={childRef}\n            current={current}\n            showBuiltins={showBuiltins}\n            escapeAnalysis={escapeAnalysis}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction Var({ v: { kind, name, value } }) {\n  return (\n    <div className={styles.var}>\n      <span className={styles.kind}>{kind}</span> {name}{\" \"}\n      {value !== undefined && (\n        <span>\n          {kind === \"return\" ? `` : `= `}\n          <Value value={value} />\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction Value({ value }) {\n  if (typeof value === \"string\") return `\"${value}\"`;\n  if (typeof value === \"object\" && \"object_ref\" in value)\n    return `object #${value.object_ref}`;\n  if (typeof value === \"boolean\") return `${value}`;\n  if (typeof value === \"object\") {\n    console.log(\"object value???\", value);\n    return \"???\";\n  }\n  return value;\n}\n","import React, { useRef, useCallback, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./HistoryTimeline.module.scss\";\n\nexport default function HistoryTimeline({\n  history,\n  value,\n  onChange,\n  runtimeError\n}) {\n  const moveData = {};\n  const scrubberRef = useRef();\n  const buttonRefs = useRef(history.map(() => React.createRef()));\n\n  const focus = useCallback(i => {\n    if (\n      buttonRefs.current &&\n      buttonRefs.current[i] &&\n      buttonRefs.current[i].current\n    ) {\n      buttonRefs.current[i].current.focus();\n    }\n  }, []);\n\n  const onKeyDown = useCallback(\n    e => {\n      if (e.keyCode === 37) {\n        onChange(value - 1);\n        focus(value - 1);\n      } else if (e.keyCode === 39) {\n        onChange(value + 1);\n        focus(value + 1);\n      }\n    },\n    [value, focus, onChange]\n  );\n\n  const moveEnd = useCallback(() => (moveData.isMouseDown = false), [moveData]);\n\n  document.addEventListener(\"mouseup\", () => moveEnd());\n  document.addEventListener(\"touchend\", () => moveEnd());\n  document.addEventListener(\"touchcancel\", () => moveEnd());\n\n  const move = e => {\n    if (moveData.isMouseDown && scrubberRef.current) {\n      const { x, width } = scrubberRef.current.getBoundingClientRect();\n      const p = (e.clientX - x) / width;\n\n      const newValue = Math.min(\n        history.length - 1,\n        Math.max(0, Math.floor(p * history.length))\n      );\n\n      onChange(newValue);\n      focus(newValue);\n    }\n  };\n\n  document.addEventListener(\"mousemove\", e => move(e));\n  document.addEventListener(\"touchmove\", e => move(e.touches[0]));\n\n  const moveStart = useCallback(\n    e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      Object.assign(moveData, {\n        initialMousePos: {\n          x: e.clientX\n        },\n        isMouseDown: true\n      });\n    },\n    [moveData]\n  );\n\n  return (\n    <div\n      className={styles.timeline}\n      onKeyDown={onKeyDown}\n      ref={scrubberRef}\n      onTouchStart={moveStart}\n      onMouseDown={moveStart}\n    >\n      {history.map((step, i) => {\n        return (\n          <button\n            key={i}\n            ref={buttonRefs.current[i]}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n              onChange(i);\n              focus(i);\n            }}\n            className={cx({\n              [styles.step]: true,\n              [styles.selected]: i === parseInt(value)\n            })}\n          >\n            {i + 1}\n          </button>\n        );\n      })}\n      {runtimeError && (\n        <div className={cx([styles.step, styles.runtimeError])} />\n      )}\n    </div>\n  );\n}\n","export class NotImplemented extends Error {}\nexport class NotSupported extends Error {}\n\nexport class RuntimeError extends Error {\n  constructor(message, node) {\n    super(\n      `${message} (${node.type}${\n        node.loc && !node._builtin\n          ? ` @ ${node.loc.start.line}:${node.loc.start.column}`\n          : ``\n      })`\n    );\n    console.error(\"runtime error\", message, node);\n  }\n}\n","import { parse } from \"@babel/core\";\n\n// I'm gonna have to find a way to do this more elegantly/scalably :D\n\nfunction processBuiltinAST(node) {\n  delete node.loc;\n  node._builtin = true;\n  Object.values(node).forEach(maybeChildNode => {\n    if (\n      maybeChildNode &&\n      typeof maybeChildNode === \"object\" &&\n      \"type\" in maybeChildNode\n    ) {\n      processBuiltinAST(maybeChildNode);\n    } else if (maybeChildNode && maybeChildNode.forEach) {\n      maybeChildNode.forEach(processBuiltinAST);\n    }\n  });\n  return node;\n}\n\n// ArrowFunctionExpression, why not\nconst _mapBuiltin = processBuiltinAST(\n  parse(`callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    arr.push(callback(this[i], i));\n  }\n  return arr;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _filterBuiltin = processBuiltinAST(\n  parse(`callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    if (callback(this[i], i))\n      arr.push(this[i]);\n  }\n  return arr;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\n// TODO without initial value\nconst _reduceBuiltin = processBuiltinAST(\n  parse(`(callback, acc) => {\n  for (let i = 0; i < this.length; i++) {\n    acc = callback(acc, this[i], i);\n  }\n  return acc;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _pushBuiltin = processBuiltinAST(\n  parse(`x => {\n  this[this.length] = x;\n  this.length = this.length + 1;\n  return this.length;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _logBuiltin = processBuiltinAST(\n  parse(`x => {\n  __logs__.push(x);\n}`).program.body[0].expression\n);\n\nexport function makeInitialContext() {\n  const builtin = {\n    objects: []\n  };\n\n  const _log =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      node: _logBuiltin,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _console =\n    builtin.objects.push({\n      builtin: true,\n      type: \"object\",\n      properties: {\n        log: { name: \"log\", kind: \"property\", value: { object_ref: _log } }\n      }\n    }) - 1;\n\n  const _Object =\n    builtin.objects.push({ builtin: true, type: \"object\", properties: {} }) - 1;\n\n  const _map =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      node: _mapBuiltin,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _filter =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      node: _filterBuiltin,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _reduce =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      node: _reduceBuiltin,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _push =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      node: _pushBuiltin,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _Array =\n    builtin.objects.push({\n      builtin: true,\n      type: \"array\",\n      properties: {\n        map: { name: \"map\", kind: \"property\", value: { object_ref: _map } },\n        filter: {\n          name: \"filter\",\n          kind: \"property\",\n          value: { object_ref: _filter }\n        },\n        reduce: {\n          name: \"reduce\",\n          kind: \"property\",\n          value: { object_ref: _reduce }\n        },\n        push: { name: \"push\", kind: \"property\", value: { object_ref: _push } }\n      },\n      prototype: _Object\n    }) - 1;\n\n  const __logs__ =\n    builtin.objects.push({\n      builtin: true,\n      type: \"array\",\n      prototype: _Array,\n      properties: {}\n    }) - 1;\n\n  return {\n    scopes: [\n      {\n        variables: {\n          Object: {\n            kind: \"builtin\",\n            name: \"Object\",\n            value: { object_ref: _Object }\n          },\n          Array: {\n            kind: \"builtin\",\n            name: \"Array\",\n            value: { object_ref: _Array }\n          },\n          __logs__: {\n            kind: \"builtin\",\n            name: \"__logs__\",\n            value: { object_ref: __logs__ }\n          },\n          console: {\n            kind: \"builtin\",\n            name: \"console\",\n            value: { object_ref: _console }\n          }\n        },\n        children: []\n      }\n    ],\n    objects: builtin.objects,\n    currentScope: 0,\n    sourceCode: \"\",\n    getSourceCodeRange(node) {\n      if (node._builtin) {\n        return \"(builtin)\";\n      } else if (!node.loc) {\n        return \"(no loc)\";\n      } else {\n        const loc = node.loc;\n        const lines = this.sourceCode\n          .split(\"\\n\")\n          .slice(loc.start.line - 1, loc.end.line);\n\n        if (lines.length === 1) {\n          lines[0] = lines[0].slice(loc.start.column, loc.end.column);\n        } else if (lines.length > 0) {\n          lines[0] = lines[0].slice(loc.start.column);\n          lines[lines.length - 1] = lines[lines.length - 1].slice(\n            0,\n            loc.end.column\n          );\n        }\n\n        return lines.join(\"\\n\");\n      }\n    }\n  };\n}\n","export class Return {\n  constructor(value) {\n    this.value = value;\n  }\n}\n\n// Returning from a block of code is somewhat\n//  uncompositional. The simplest way to deal\n//  with it, instead of expanding the semantics,\n//  is leveraging the fact that the interpreter\n//  language, i.e. JS, already has this kind of\n//  non-local flow feature in the form of throwing\n//  :D\nReturn.from = function*(mkgen) {\n  try {\n    return yield* mkgen();\n  } catch (e) {\n    if (e instanceof Return) {\n      return e.value;\n    } else {\n      throw e;\n    }\n  }\n};\n","import { NotImplemented, RuntimeError } from \"./errors\";\nimport { evaluate } from \"./evaluate\";\n\nfunction lookup(context, name, ref) {\n  const scope = context.scopes[ref];\n  if (scope.variables[name]) {\n    return ref;\n  } else if (scope.parent !== undefined) {\n    return lookup(context, name, scope.parent);\n  } else {\n    return null;\n  }\n}\n\n// Note: `name` could be non-primitive, and should actually\n//  be propertly coerced and stuff...\nfunction lookupProperty(context, name, object_ref) {\n  const object = context.objects[object_ref];\n  if (object.properties[name] !== undefined) {\n    return object_ref;\n  } else if (object.prototype !== undefined) {\n    return lookupProperty(context, name, object.prototype);\n  } else {\n    return null;\n  }\n}\n\nexport const locators = {};\n\n// locate: (Node, Context) => { scope_ref|object_ref, name, site }\nexport function* locate(node, context, namedArgs = {}) {\n  const locator = locators[node.type];\n  if (!locator) {\n    console.error(\n      `Couldn't find locator for AST node of type: ${node.type}`,\n      node\n    );\n    throw new NotImplemented(\n      `Couldn't find locator for AST node of type: ${node.type}`\n    );\n  }\n  return yield* locator(node, context, namedArgs);\n}\n\nlocators.Identifier = function*(node, context) {\n  const defining_scope_ref = lookup(context, node.name, context.currentScope);\n  if (defining_scope_ref === null)\n    throw new RuntimeError(\n      `variable ${node.name} is not defined [lookup identifier]`,\n      node\n    );\n\n  yield {\n    context,\n    node,\n    summary: `looked up variable ${node.name}`,\n    detail: 2\n  };\n  return {\n    scope_ref: defining_scope_ref,\n    name: node.name,\n    site: context.scopes[defining_scope_ref].variables[node.name]\n  };\n};\n\nlocators.MemberExpression = function*(\n  node,\n  context,\n  { makeIfNonexistent = false }\n) {\n  const objectValue = yield* evaluate(node.object, context);\n  if (\n    typeof objectValue.value !== \"object\" ||\n    !(\"object_ref\" in objectValue.value)\n  )\n    // (actually though, you can do things like `(2).toFixed(2)`)\n    throw new RuntimeError(\n      \"cannot use memberexpression for non-object\",\n      node.object\n    );\n  const { object_ref } = objectValue.value;\n\n  let propertyName;\n  if (node.computed) {\n    propertyName = (yield* evaluate(node.property, context)).value;\n  } else {\n    if (node.property.type !== \"Identifier\") throw new NotImplemented();\n    propertyName = node.property.name;\n  }\n\n  const defining_object_ref = lookupProperty(context, propertyName, object_ref);\n  if (defining_object_ref === null) {\n    if (makeIfNonexistent) {\n      const site = (context.objects[object_ref].properties[propertyName] = {\n        name: propertyName,\n        kind: \"property\"\n      });\n      yield {\n        context,\n        node,\n        summary: `made new property ${propertyName}`,\n        detail: 2\n      };\n      return {\n        accessing_object_ref: object_ref,\n        object_ref,\n        name: propertyName,\n        site\n      };\n    } else {\n      return null;\n    }\n  }\n\n  yield {\n    context,\n    node,\n    summary: `looked up property ${node.name}`,\n    detail: 2\n  };\n  return {\n    accessing_object_ref: object_ref,\n    object_ref: defining_object_ref,\n    name: propertyName,\n    site: context.objects[defining_object_ref].properties[propertyName]\n  };\n};\n","import { NotImplemented, NotSupported, RuntimeError } from \"./errors\";\nimport { makeInitialContext } from \"./context\";\nimport { Return } from \"./return\";\nimport { locate } from \"./locate\";\n\nexport const evaluators = {};\n\nexport function* evaluate(\n  node,\n  context = makeInitialContext(),\n  namedArgs = {}\n) {\n  const evaluator = evaluators[node.type];\n  if (!evaluator) {\n    console.error(\n      `Couldn't find evaluator for AST node of type: ${node.type}`,\n      node\n    );\n    throw new NotImplemented(\n      `Couldn't find evaluator for AST node of type: ${node.type}`\n    );\n  }\n  return yield* evaluator(node, context, namedArgs);\n}\n\nfunction applyOperator(op, a, b) {\n  if (op === \"+\") return a + b;\n  if (op === \"-\") return a - b;\n  if (op === \"*\") return a * b;\n  if (op === \"&&\") return a && b;\n  if (op === \"||\") return a || b;\n  if (op === \"<\") return a < b;\n  if (op === \"<=\") return a <= b;\n  if (op === \"==\") return a == b;\n  if (op === \">\") return a > b;\n  if (op === \">=\") return a >= b;\n  throw new NotImplemented(`operator not implemented: ${op}`);\n}\n\nevaluators.File = function*(node, context) {\n  yield* evaluate(node.program, context);\n};\n\nevaluators.Program = function*(node, context) {\n  // TODO actually extract function definitions etc.\n  for (const statement of node.body) {\n    yield* evaluate(statement, context);\n  }\n};\n\nevaluators.BlockStatement = function*(node, context, { skipScope }) {\n  if (!skipScope) {\n    const [blockScope, blockScopeRef] = makeNewScope(context);\n    context = { ...context, currentScope: blockScopeRef };\n  }\n\n  for (const statement of node.body) {\n    yield* evaluate(statement, context);\n  }\n};\n\nevaluators.ReturnStatement = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `compute return value`,\n    detail: 1\n  };\n  const returnValue = yield* evaluate(node.argument, context);\n  context.scopes[context.currentScope].variables[\"[[return]]\"] = {\n    kind: \"return\",\n    value: returnValue.value\n  };\n  yield { context, node, summary: `computed return value`, detail: 1 };\n  throw new Return(returnValue);\n};\n\nfunction makeNewScope(\n  context,\n  {\n    parentScope = context.currentScope,\n    _builtin = context.scopes[context.currentScope]._builtin\n  } = {}\n) {\n  // Create an execution scope\n  const scope = {\n    parent: parentScope,\n    _builtin,\n    children: [],\n    variables: {}\n  };\n  const scope_ref = context.scopes.push(scope) - 1;\n  if (context.scopes[parentScope]) {\n    context.scopes[parentScope].children.push(scope_ref);\n  } // note: builtin methods don't have a defining scope\n\n  return [scope, scope_ref];\n}\n\nfunction* invokeFunction(\n  { definingScope, arrow, node },\n  args,\n  newThisBinding,\n  context\n) {\n  // Create an execution scope\n  const [executionScope, executionScopeRef] = makeNewScope(context, {\n    parentScope: definingScope,\n    _builtin: !!node.body._builtin // the !! is very important, not very elegant\n  });\n\n  // Apply new this binding\n  if (newThisBinding) {\n    executionScope.variables[newThisBinding.name] = newThisBinding;\n  }\n\n  // Populate with given arguments\n  for (const [i, param] of node.params.entries()) {\n    if (param.type !== \"Identifier\")\n      throw new NotImplemented(\n        `Sorry, can't deal with ${param.type} params yet :(`\n      );\n\n    executionScope.variables[param.name] = {\n      name: param.name,\n      kind: \"param\",\n      value: args[i].value\n    };\n  }\n\n  const executionContext = { ...context, currentScope: executionScopeRef };\n\n  let returnValue;\n\n  if (node.body.type === \"BlockStatement\") {\n    returnValue = yield* Return.from(function*() {\n      return yield* evaluate(node.body, executionContext, {\n        skipScope: true\n      });\n    });\n  } else {\n    returnValue = yield* evaluate(node.body, executionContext);\n  }\n\n  // console.log(\"done executing function!\", node._FRV, node._hasEscapes);\n  if (!node._hasEscapes) {\n    // console.log(\"definitely no escapes, freeing scope:\", executionScopeRef);\n    executionScope.freed = true;\n    // const parentScope =\n    //   context.scopes[context.scopes[executionScopeRef].parent];\n    // parentScope.children.splice(\n    //   parentScope.children.indexOf(executionScopeRef),\n    //   1\n    // );\n    // delete context.scopes[executionScopeRef];\n  }\n\n  return returnValue;\n}\n\nevaluators.CallExpression = function*(node, context) {\n  const { callee, arguments: argnodes } = node;\n  yield { context, node, pre: true, summary: `evaluate call`, detail: 2 };\n\n  // Second, lookup the function\n  const fnValue = yield* evaluate(callee, context);\n  if (!(\"object_ref\" in fnValue.value))\n    throw new RuntimeError(`Cannot call non-function #1`, callee);\n  const fn = context.objects[fnValue.value.object_ref];\n  if (!fn || fn.type !== \"function\")\n    throw new RuntimeError(`Cannot call non-function #2`, callee);\n\n  let newThisBinding;\n  if (!fn.arrow) {\n    if (callee.type === \"MemberExpression\") {\n      // the object in the member expression, haha :D\n      const { accessing_object_ref: object_ref } = fnValue;\n      newThisBinding = { kind: \"this\", name: \"this\", value: { object_ref } };\n    } else {\n      newThisBinding = { kind: \"this\", name: \"this\", value: undefined };\n    }\n  }\n\n  // First, evaluate arguments\n  const args = [];\n  for (const argnode of argnodes) {\n    args.push(yield* evaluate(argnode, context));\n  }\n\n  // Finally, invoke the function\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `invoke function`,\n    detail: 2\n  };\n  const ret = yield* invokeFunction(fn, args, newThisBinding, context);\n  yield { context, node, summary: `evaluated call`, detail: 2 };\n  return ret;\n};\n\nevaluators.FunctionDeclaration = function*(node, context) {\n  if (node.async || node.generator)\n    throw new NotSupported(`Async and generator functions are not supported`);\n  if (!node.id || node.id.type !== \"Identifier\")\n    throw new RuntimeError(`should not happen`, node.id);\n\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `declare function ${node.id.name}`,\n    detail: 1\n  };\n  const scope = context.scopes[context.currentScope];\n  const fn = {\n    type: \"function\",\n    arrow: false,\n    definingScope: context.currentScope,\n    node,\n    source: context.getSourceCodeRange(node),\n    properties: {}\n  };\n  const object_ref = context.objects.push(fn) - 1;\n  scope.variables[node.id.name] = {\n    name: node.id.name,\n    kind: \"fundecl\",\n    value: { object_ref }\n  };\n  yield {\n    context,\n    node,\n    summary: `declared function ${node.id.name}`,\n    detail: 1\n  };\n};\n\nevaluators.ObjectProperty = function*(node, context, { object_ref }) {\n  const { key } = node;\n  if (key.type !== \"Identifier\")\n    throw new NotImplemented(\n      `Computed or otherwise property keys are sadly not implemented yet :(`\n    );\n\n  const obj = context.objects[object_ref];\n  const value = yield* evaluate(node.value, context);\n  obj.properties[key.name] = { name: key.name, kind: \"property\", value };\n};\n\nevaluators.ObjectExpression = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate obj expression`,\n    detail: 2\n  };\n  const obj = {\n    type: \"object\",\n    prototype: context.scopes[0].variables.Object.value.object_ref,\n    properties: {}\n  };\n  const object_ref = context.objects.push(obj) - 1;\n  for (const property of node.properties) {\n    yield* evaluate(property, context, { object_ref });\n  }\n  yield { context, node, summary: `evaluated obj expression`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.ArrayExpression = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate array expression`,\n    detail: 2\n  };\n  const arr = {\n    type: \"array\",\n    prototype: context.scopes[0].variables.Array.value.object_ref,\n    properties: {}\n  };\n  const object_ref = context.objects.push(arr) - 1;\n  for (let i = 0; i < node.elements.length; i++) {\n    arr.properties[i] = {\n      name: i,\n      kind: \"property\",\n      value: (yield* evaluate(node.elements[i], context)).value\n    };\n  }\n  arr.properties.length = {\n    name: \"length\",\n    kind: \"property\",\n    value: node.elements.length\n  };\n  yield { context, node, summary: `evaluated array expression`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.ArrowFunctionExpression = function*(node, context) {\n  if (node.async || node.generator)\n    throw new NotSupported(`Async and generator functions are not supported`);\n\n  const fn = {\n    type: \"function\",\n    arrow: true,\n    definingScope: context.currentScope,\n    node,\n    source: context.getSourceCodeRange(node),\n    properties: {}\n  };\n  const object_ref = context.objects.push(fn) - 1;\n  yield { context, node, summary: `evaluated arrow function`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.UpdateExpression = function*(node, context) {\n  const { operator, prefix, loc, argument } = node;\n\n  if (operator !== \"++\" && operator !== \"--\") {\n    throw new NotSupported(`update expression with operator ${operator}`);\n  }\n\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate update expression`,\n    detail: 2\n  };\n\n  let result;\n  if (prefix) {\n    result = yield* evaluate(argument, context);\n  }\n\n  yield* evaluate(\n    {\n      type: \"AssignmentExpression\",\n      _builtin: true,\n      operator: \"=\",\n      left: argument,\n      right: {\n        type: \"BinaryExpression\",\n        _builtin: true,\n        operator: operator[0],\n        left: argument,\n        right: {\n          type: \"NumericLiteral\",\n          _builtin: true,\n          value: 1\n        }\n      }\n    },\n    context\n  );\n\n  if (!prefix) {\n    result = yield* evaluate(argument, context);\n  }\n\n  yield { context, node, summary: `evaluated update expression`, detail: 2 };\n  return result;\n};\n\nevaluators.BinaryExpression = function*(node, context) {\n  const { left, right } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate binary expression`,\n    detail: 2\n  };\n  const leftValue = (yield* evaluate(left, context)).value;\n  if (node.operator === \"&&\" && !leftValue) return leftValue;\n  if (node.operator === \"||\" && leftValue) return leftValue;\n  const rightValue = (yield* evaluate(right, context)).value;\n  yield {\n    context,\n    node,\n    summary: `evaluated binary expression`,\n    detail: 2\n  };\n  return { value: applyOperator(node.operator, leftValue, rightValue) };\n};\n\nevaluators.ThisExpression = function*(node, context) {\n  return yield* evaluate(\n    {\n      ...node,\n      type: \"Identifier\",\n      name: \"this\"\n    },\n    context\n  );\n};\n\nevaluators.Identifier = function*(node, context) {\n  if (node.name === \"undefined\") {\n    yield (context, { node, summary: `evaluated undefined`, detail: 2 });\n    return { value: undefined };\n  }\n\n  const { site } = yield* locate(node, context);\n  yield { context, node, summary: `evaluated variable`, detail: 2 };\n  return { value: site.value };\n};\n\nevaluators.MemberExpression = function*(node, context) {\n  const location = yield* locate(node, context);\n  if (!location) {\n    yield { context, node, summary: `property does not exist`, detail: 2 };\n    return { value: undefined };\n  }\n  const { site, accessing_object_ref } = location;\n  yield {\n    context,\n    node,\n    summary: `evaluated property to ${site.value}`,\n    detail: 2\n  };\n  return { value: site.value, accessing_object_ref };\n};\n\nevaluators.AssignmentExpression = function*(node, context) {\n  const { left, right } = node;\n\n  if (node.operator !== \"=\")\n    throw new NotSupported(`assignment with operator ${node.operator}`);\n\n  // yield ({context,  node, pre: true, summary: `assign ${left.name}`, detail: 2 });\n  const { site } = yield* locate(left, context, { makeIfNonexistent: true });\n  site.value = (yield* evaluate(right, context)).value;\n  // yield ({context,  node, summary: `assigned ${left.name}`, detail: 2 });\n};\n\nfunction* checkForTest(test, context) {\n  yield {\n    context,\n    node: test,\n    pre: true,\n    detail: 1,\n    summary: `for test`\n  };\n  const { value } = yield* evaluate(test, context);\n  yield {\n    context,\n    node: test,\n    detail: 1,\n    summary: `for test checked`\n  };\n  return value;\n}\n\n// (actually, es5 for-statements are way more complicated)\nevaluators.ForStatement = function*(node, context) {\n  const { init, test, update, body } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    detail: 1,\n    summary: `encountered for-loop`\n  };\n  const [forScope, forScopeRef] = makeNewScope(context);\n  const scopedContext = { ...context, currentScope: forScopeRef };\n\n  yield* evaluate(init, scopedContext);\n\n  while (yield* checkForTest(test, scopedContext)) {\n    yield* evaluate(body, scopedContext);\n    yield {\n      context,\n      node: update,\n      pre: true,\n      detail: 1,\n      summary: `for update`\n    };\n    yield* evaluate(update, scopedContext);\n    yield {\n      context,\n      node: update,\n      detail: 1,\n      summary: `for update - done`\n    };\n  }\n\n  yield {\n    context,\n    node,\n    detail: 1,\n    summary: `completed for-loop`\n  };\n};\n\nevaluators.IfStatement = function*(node, context) {\n  const { test, consequent, alternate } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    detail: 1,\n    summary: `encountered if-statement`\n  };\n  const [ifBodyScope, ifBodyScopeRef] = makeNewScope(context);\n  const scopedContext = { ...context, currentScope: ifBodyScopeRef };\n\n  const b = (yield* evaluate(test, scopedContext)).value;\n\n  if (b) {\n    yield* evaluate(consequent, scopedContext);\n  } else if (alternate) {\n    yield* evaluate(alternate, scopedContext);\n  }\n\n  yield {\n    context,\n    node,\n    detail: 1,\n    summary: `completed if-statement`\n  };\n};\n\nevaluators.ExpressionStatement = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `compute expression statement`,\n    detail: 1\n  };\n  yield* evaluate(node.expression, context);\n  yield {\n    context,\n    node,\n    summary: `computed expression statement`,\n    detail: 1\n  };\n};\n\nevaluators.VariableDeclaration = function*(node, context) {\n  const kind = node.kind;\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `${kind} variable declaration`,\n    detail: 1\n  };\n  for (const declaration of node.declarations) {\n    yield* evaluate(declaration, context, { kind });\n  }\n  yield {\n    context,\n    node,\n    summary: `completed ${kind} variable declaration`,\n    detail: 1\n  };\n};\n\nevaluators.VariableDeclarator = function*(node, context, { kind }) {\n  if (kind !== \"let\" && kind !== \"const\")\n    throw new NotSupported(`only let/const supported, not ${kind}`);\n  if (node.id.type !== \"Identifier\")\n    throw new NotImplemented(`Not yet able to declare non-identifiers :(`);\n\n  const scope = context.scopes[context.currentScope];\n  const name = node.id.name;\n  scope.variables[name] = { name, kind };\n  yield { context, node: node.id, summary: `declared ${name}`, detail: 2 };\n  if (node.init) {\n    const value = (yield* evaluate(node.init, context)).value;\n    scope.variables[name].value = value;\n    yield { context, node, summary: `initialized ${name}`, detail: 2 };\n  }\n};\n\nevaluators.NullLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated null`, detail: 2 };\n  return { value: null };\n};\n\nevaluators.StringLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated \"${node.value}\"`, detail: 2 };\n  return { value: node.value };\n};\n\nevaluators.NumericLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated ${node.value}`, detail: 2 };\n  return { value: node.value };\n};\n\nevaluators.BooleanLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated ${node.value}`, detail: 2 };\n  return { value: node.value };\n};\n","import traverse from \"@babel/traverse\";\n// import * as t from \"@babel/types\";\n\n/*\nFor sure this is a bit of a quircky analysis technique :D\nI would'ave written it otherwise, but I'm still getting used\n to the weirdly specific, powerful but idiosyncratic Babel API.\n\nThe idea:\n- Find all *references* variables (`Identifier`s), and for each:\n  - Recursively loop up the function nesting tree, and each\n      time we hit a function that doesn't define this binding,\n      register this \"Free Referenced Variable\" on the fn node,\n      for future reference.\n\nWhat's missing:\n- Block scopes (e.g. in a for-loop) need the same kind of escape\n    analysis as function scopes, but we're not currently doing this.\n- Let and const binding defining order?\n*/\nexport default function performEscapeAnalysis(ast) {\n  // console.log(\"performEscapeAnalysis\");\n  traverse(ast, {\n    Identifier(path) {\n      if (path.isReferencedIdentifier()) {\n        const variableName = path.node.name;\n        let i = 0;\n        while ((path = path.getFunctionParent())) {\n          if (!path.scope.bindings[variableName]) {\n            path.node._FRV = path.node._FRV || {};\n            path.node._FRV[variableName] = true;\n            // console.log(\"variable not owned by fn:\", variableName, path, i);\n          } else {\n            path.node._hasEscapes = path.node._hasEscapes || i > 0;\n            // console.log(\"found ref variable binding:\", variableName, path, i);\n            break;\n          }\n          i++;\n        }\n      }\n    }\n  });\n}\n","import { parse } from \"@babel/parser\";\nimport deepcopy from \"deepcopy\";\nimport { RuntimeError } from \"./errors\";\nimport { makeInitialContext } from \"./context\";\nimport { evaluate } from \"./evaluate\";\nimport performEscapeAnalysis from \"./performEscapeAnalysis\";\n\nconst sleep = (ms = 0) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport default async function record(code) {\n  const ast = parse(code);\n  performEscapeAnalysis(ast);\n  const context = makeInitialContext();\n  context.sourceCode = code;\n  const runtime = evaluate(ast, context);\n\n  const history = [];\n  let i = 0;\n  try {\n    for (let report of runtime) {\n      if (!report.node._builtin) {\n        history.push(deepcopy(report));\n      }\n      if (i++ > 1000) {\n        console.error(\"too many steps\", history);\n        return { history, runtimeError: new Error(\"too many steps!\") };\n        // throw new Error(\"too many steps!\");\n      }\n      if (i % 100 === 0) {\n        await sleep();\n      }\n    }\n  } catch (e) {\n    if (e instanceof RuntimeError) {\n      // noop\n      console.log(\"caught runtime error:\", e);\n      return { history, runtimeError: e };\n    } else throw e;\n  }\n\n  return { history };\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { stripIndent } from \"common-tags\";\nimport createPersistedState from \"use-persisted-state\";\nimport CodeMirror from \"../codemirror/codemirror\";\nimport styles from \"./VisualizedExecution.module.scss\";\nimport Viz from \"./Viz\";\nimport HistoryTimeline from \"./HistoryTimeline\";\n\nimport record from \"../lib/record\";\nimport useAsync from \"react-use/lib/useAsync\";\n\nconst usePersistedCode = createPersistedState(\"code\");\nconst usePersistedMaxDetail = createPersistedState(\"maxdetail\");\nconst usePersistedStepno = createPersistedState(\"stepno\");\nconst usePersistedShowBuiltins = createPersistedState(\"showbuiltins\");\nconst usePersisted_escapeAnalysis = createPersistedState(\"escapeAnalysis\");\n\nconst PRESETS = [\n  {\n    title: \"just a variable\",\n    code: stripIndent`\n      let n = 42;\n    `\n  },\n  {\n    title: \"array push and access\",\n    code: stripIndent`\n      const fruits = [\"pear\", \"banana\"];\n      fruits.push(\"jello\");\n      const jello = fruits[fruits.length - 1];\n    `\n  },\n  {\n    title: \"a closure and correct scoping\",\n    code: stripIndent`\n      let adjective = \"beautiful\";\n      function make(a) {\n        return thing => {\n          return a + \" \" + adjective + \" \" + thing;\n        };\n      }\n      const definite = make(\"the\");\n      const s1 = definite(\"variable\");\n      adjective = \"nested\";\n      const s2 = definite(\"scope\");\n    `\n  },\n  {\n    title: \"map+filter+reduce expression\",\n    code: stripIndent`\n      const result = [10, 2, 3, 6]\n        .map(n => n - 2)\n        .filter(n => n > 3)\n        .reduce((a, b) => a + b, 0);\n    `\n  },\n  {\n    title: \"variable escapes\",\n    code: stripIndent`\n      let x = 0;\n      let y = 0;\n\n      function mf(n) {\n        return () => {\n          function bla() {\n            // let n = 6;\n            y = n + 2;\n          }\n          bla();\n        };\n      }\n\n      const o = {};\n      o.f = mf(10);\n\n      o.f();\n    `\n  }\n];\n\nconst CM_OPTS = {\n  mode: \"text/javascript\",\n  theme: \"jsviz\",\n  lineNumbers: false,\n  smartIndent: true,\n  tabSize: 2,\n  indentWithTabs: false,\n  styleSelectedText: true\n};\n\nexport default function App() {\n  const inst = useRef({ editor: null, marker: null });\n  const [code, setCode] = usePersistedCode(`const result = [10, 2, 3, 6]\n  .map(n => n - 2)\n  .filter(n => n > 3)\n  .reduce((a, b) => a + b, 0);`);\n\n  const { loading, value, error } = useAsync(async () => await record(code), [\n    code\n  ]);\n\n  if (error) console.error(\"Compile error\", error);\n\n  const [showBuiltins, setShowBuiltins] = usePersistedShowBuiltins(false);\n  const [_stepno, setStepno] = usePersistedStepno(0);\n  const [maxDetail, setMaxDetail] = usePersistedMaxDetail(2);\n  const [escapeAnalysis, set_escapeAnalysis] = usePersisted_escapeAnalysis(\n    true\n  );\n\n  const history =\n    value && value.history.length > 0\n      ? value.history.filter(({ detail }) => detail <= maxDetail)\n      : [];\n\n  // const history =\n  //   history && history.length > 0\n  //     ? history.filter(({ detail }) => detail <= maxDetail)\n  //     : null;\n\n  const stepno = Math.max(0, Math.min(_stepno, history.length - 1));\n\n  // step = { context, node, pre, summary, detail }\n  const step = history ? history[stepno] : null;\n\n  useEffect(() => {\n    if (!inst.current.editor) return;\n    inst.current.marker && inst.current.marker.clear();\n\n    if (!step) return;\n    const doc = inst.current.editor.getDoc();\n    const loc = step.node.loc;\n    if (loc) {\n      inst.current.marker = doc.markText(\n        { line: loc.start.line - 1, ch: loc.start.column },\n        { line: loc.end.line - 1, ch: loc.end.column },\n        {\n          className: step.pre ? styles.markedPre : styles.markedPost\n        }\n      );\n    }\n  }, [inst, step]);\n\n  return (\n    <div>\n      <div className={styles.code}>\n        <CodeMirror\n          className=\"editable\"\n          options={CM_OPTS}\n          editorDidMount={editor => {\n            inst.current.editor = editor;\n          }}\n          value={code}\n          onBeforeChange={(editor, data, value) => {\n            setCode(value || \"\");\n          }}\n        />\n      </div>\n      {(loading || error || history.length === 0) && (\n        <hr className={styles.emptyDivider} />\n      )}\n      {loading && (\n        <div className={styles.main}>\n          <div className={styles.loading}>Loading...</div>\n        </div>\n      )}\n      {error && (\n        <div className={styles.main}>\n          <div className={styles.error}>\n            <p>Compile error: {error.message}</p>\n          </div>\n        </div>\n      )}\n      {value && history && (\n        <div>\n          <HistoryTimeline\n            value={stepno}\n            onChange={setStepno}\n            history={history}\n            runtimeError={value.runtimeError}\n          />\n          <div className={styles.main}>\n            <div>\n              <select\n                value=\"\"\n                onChange={e => {\n                  const preset = PRESETS.find(\n                    ({ title }) => title === e.target.value\n                  );\n                  if (preset) setCode(preset.code);\n                }}\n              >\n                <option value=\"\">-- Select a code preset --</option>\n                {PRESETS.map(({ title, code }) => (\n                  <option key={title}>{title}</option>\n                ))}\n              </select>\n              {\" / \"}\n              <label>\n                Expression detail?{\" \"}\n                <input\n                  type=\"checkbox\"\n                  checked={maxDetail === 2}\n                  onChange={() => setMaxDetail(3 - maxDetail)}\n                />\n              </label>\n              {\" / \"}\n              <label>\n                Show builtins?{\" \"}\n                <input\n                  type=\"checkbox\"\n                  checked={showBuiltins}\n                  onChange={() => setShowBuiltins(!showBuiltins)}\n                />\n              </label>\n              {\" / \"}\n              <label>\n                Escape analysis?{\" \"}\n                <input\n                  type=\"checkbox\"\n                  checked={escapeAnalysis}\n                  onChange={() => set_escapeAnalysis(!escapeAnalysis)}\n                />\n              </label>\n            </div>\n            {step && (\n              <Viz\n                step={step}\n                showBuiltins={showBuiltins}\n                escapeAnalysis={escapeAnalysis}\n              />\n            )}\n            {value.runtimeError && (\n              <div className={styles.error}>\n                <p>Runtime error: {value.runtimeError.message}</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\nimport \"./assets/global.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nrender(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport styles from \"./App.module.scss\";\nimport Toolbar from \"./components/Toolbar\";\nimport ProjectInfo from \"./components/ProjectInfo\";\nimport VisualizedExecution from \"./components/VisualizedExecution\";\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nexport default function App() {\n  return (\n    <div className={styles.App}>\n      <Router>\n        <Toolbar />\n        <Switch>\n          <Route path=\"/info\" component={ProjectInfo} />\n          <Route component={VisualizedExecution} />\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toolbar\":\"Toolbar_Toolbar__3XXhw\",\"InfoIcon\":\"Toolbar_InfoIcon__2l_1D\",\"atInfoPage\":\"Toolbar_atInfoPage__3rO4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"code\":\"VisualizedExecution_code__1pKc_\",\"markedPre\":\"VisualizedExecution_markedPre__3ef4y\",\"markedPost\":\"VisualizedExecution_markedPost__2nVnG\",\"emptyDivider\":\"VisualizedExecution_emptyDivider__1bO_v\",\"main\":\"VisualizedExecution_main__uV1NH\",\"loading\":\"VisualizedExecution_loading__19gOH\",\"error\":\"VisualizedExecution_error__Gyjdt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"obj\":\"Viz_obj__3PiQ5\",\"scope\":\"Viz_scope__ynAbk\",\"isCurrent\":\"Viz_isCurrent__2YlfD\",\"item\":\"Viz_item__3y3Ut\",\"var\":\"Viz_var__kCyoJ\",\"kind\":\"Viz_kind__11Xx-\",\"split\":\"Viz_split__1K8Ln\",\"col\":\"Viz_col__2BwqL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProjectInfo\":\"ProjectInfo_ProjectInfo__2IkWh\"};"],"sourceRoot":""}