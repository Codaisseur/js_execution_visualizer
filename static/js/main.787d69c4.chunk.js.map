{"version":3,"sources":["codemirror/mark-selection.js","codemirror/apply-plugins.js","codemirror/codemirror.js","components/Toolbar.js","components/ProjectInfo.js","Viz.js","HistoryTimeline.js","lib/errors.js","lib/context.js","lib/return.js","lib/locate.js","lib/evaluate.js","lib/record.js","App.js","serviceWorker.js","index.js","components/Toolbar.module.scss","Viz.module.scss","components/ProjectInfo.module.scss","App.module.scss","HistoryTimeline.module.scss"],"names":["CodeMirror","onCursorActivity","cm","state","markedSelection","operation","somethingSelected","clear","listSelections","length","reset","from","getCursor","to","array","coverRange","coverStart","find","coverEnd","line","CHUNK_SIZE","cmp","shift","pop","update","onChange","defineOption","val","old","prev","Init","markedSelectionStyle","on","off","Pos","cmpPos","addAt","cls","start","endLine","atEnd","end","mark","markText","className","push","splice","i","ranges","markSelectionPlugin","Controlled","Toolbar","react_default","a","createElement","styles","header","logo","href","viewBox","aria-hidden","role","x","y","width","height","fillRule","clipRule","d","ProjectInfo","Viz","_ref","_ref$step","step","context","node","summary","pre","showBuiltins","detail","split","col","Scope","scopeRef","current","currentScope","objects","map","obj","builtin","key","style","marginBottom","type","Obj","_ref2","_useState","useState","_useState2","Object","slicedToArray","showBody","set_showBody","Fragment","item","kind","cursor","onClick","margin","display","verticalAlign","source","values","properties","v","Var","_ref3","_cx","scope","scopes","isCurrent","vars","variables","show","_builtin","shownVars","filter","children","cx","defineProperty","childRef","_ref4","_ref4$v","name","value","var","undefined","Value","_ref5","concat","object_ref","console","log","HistoryTimeline","history","runtimeError","onKeyDown","useCallback","e","keyCode","moveData","scrubberRef","useRef","handleMouseDown","preventDefault","stopPropagation","assign","initialMousePos","clientX","clientY","initialValue","isMouseDown","document","addEventListener","p","clientWidth","newValue","Math","min","max","round","timeline","ref","onMouseDown","selected","parseInt","NotImplemented","_Error","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","wrapNativeSuper","Error","NotSupported","_Error2","RuntimeError","_Error3","message","_this","call","loc","column","error","processBuiltinAST","forEach","maybeChildNode","_mapBuiltin","parse","program","body","expression","_filterBuiltin","_reduceBuiltin","_pushBuiltin","_logBuiltin","makeInitialContext","_log","params","_console","_Object","_map","_filter","_reduce","_push","_Array","reduce","prototype","Array","__logs__","sourceCode","getSourceCodeRange","lines","slice","join","Return","regenerator_default","_callee","mkgen","wrap","_context","next","delegateYield","abrupt","t0","t1","stop","locate","lookup","parent","lookupProperty","object","locators","namedArgs","locator","_args","_marked","Identifier","defining_scope_ref","_context2","scope_ref","site","MemberExpression","_callee2","_ref$makeIfNonexisten","makeIfNonexistent","objectValue","propertyName","defining_object_ref","_context3","evaluate","computed","property","accessing_object_ref","invokeFunction","checkForTest","evaluators","evaluator","evaluate_marked","applyOperator","op","b","makeNewScope","_ref2$parentScope","parentScope","_ref2$_builtin","args","newThisBinding","definingScope","_makeNewScope3","_makeNewScope4","executionScope","executionScopeRef","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_ref6","param","executionContext","_context7","arrow","entries","Symbol","iterator","done","return","finish","objectSpread","_callee5","_context6","skipScope","t2","_marked2","test","_ref10","_context20","_marked3","File","Program","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","statement","BlockStatement","_callee3","_makeNewScope","_makeNewScope2","blockScopeRef","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_context4","ReturnStatement","_callee4","returnValue","_context5","argument","CallExpression","_callee6","callee","argnodes","fnValue","fn","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","argnode","ret","_context8","t3","t4","t5","FunctionDeclaration","_callee7","_context9","async","generator","id","ObjectProperty","_callee8","_ref7","_context10","ObjectExpression","_callee9","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context11","ArrayExpression","_callee10","arr","_context12","elements","ArrowFunctionExpression","_callee11","_context13","UpdateExpression","_callee12","operator","prefix","result","_context14","left","right","BinaryExpression","_callee13","leftValue","rightValue","_context15","ThisExpression","_callee14","_context16","_callee15","_ref8","_context17","_callee16","location","_context18","AssignmentExpression","_callee17","_ref9","_context19","ForStatement","_callee18","init","_makeNewScope5","_makeNewScope6","forScopeRef","scopedContext","_context21","IfStatement","_callee19","consequent","alternate","_makeNewScope7","_makeNewScope8","ifBodyScopeRef","_context22","ExpressionStatement","_callee20","_context23","VariableDeclaration","_callee21","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","declaration","_context24","declarations","VariableDeclarator","_callee22","_ref11","_context25","NullLiteral","_callee23","_context26","StringLiteral","_callee24","_context27","NumericLiteral","_callee25","_context28","BooleanLiteral","_callee26","_context29","record","code","ast","runtime","report","deepcopy","err","usePersistedCode","createPersistedState","usePersistedMaxDetail","usePersistedStepno","usePersistedShowBuiltins","PRESETS","title","stripIndent","_templateObject","_templateObject2","_templateObject3","_templateObject4","CM_OPTS","mode","theme","lineNumbers","smartIndent","tabSize","indentWithTabs","styleSelectedText","Boolean","window","hostname","match","render","inst","editor","marker","_usePersistedCode","_usePersistedCode2","setCode","_useMemo","useMemo","_usePersistedShowBuil","_usePersistedShowBuil2","setShowBuiltins","_usePersistedStepno","_usePersistedStepno2","_stepno","setStepno","_usePersistedMaxDetai","_usePersistedMaxDetai2","maxDetail","setMaxDetail","visibleHistory","stepno","useEffect","doc","getDoc","ch","markedPre","markedPost","codemirror_codemirror","options","editorDidMount","onBeforeChange","data","emptyDivider","main","preset","target","checked","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.787d69c4.chunk.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n\nexport default function(CodeMirror) {\n  CodeMirror.defineOption(\"styleSelectedText\", false, function(cm, val, old) {\n    var prev = old && old !== CodeMirror.Init;\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle =\n        typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection)\n      cm.operation(function() {\n        update(cm);\n      });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length)\n      cm.operation(function() {\n        clear(cm);\n      });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) === 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n    for (var line = from.line; ; ) {\n      var start = line === from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE,\n        atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, { className: cls });\n      if (addAt == null) array.push(mark);\n      else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n    for (var i = 0; i < array.length; ++i) array[i].clear();\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++)\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n\n    var from = cm.getCursor(\"start\"),\n      to = cm.getCursor(\"end\");\n\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n\n    var coverStart = array[0].find(),\n      coverEnd = array[array.length - 1].find();\n    if (\n      !coverStart ||\n      !coverEnd ||\n      to.line - from.line <= CHUNK_SIZE ||\n      cmp(from, coverEnd.to) >= 0 ||\n      cmp(to, coverStart.from) <= 0\n    )\n      return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n}\n","import markSelectionPlugin from \"./mark-selection\";\nimport CodeMirror from \"codemirror\";\n\nmarkSelectionPlugin(CodeMirror);\n","import \"./apply-plugins\";\n\nimport { Controlled } from \"react-codemirror2\";\nimport \"codemirror/mode/jsx/jsx\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"../assets/codemirror-theme.scss\";\n\nexport default Controlled;\n","import React from \"react\";\nimport styles from \"./Toolbar.module.scss\";\n\nexport default function Toolbar() {\n  return (\n    <div className={styles.header}>\n      <a className={styles.logo} href=\"https://codaisseur.com/\">\n        <svg viewBox=\"3 2 38 38\" aria-hidden=\"true\" role=\"presentation\">\n          <rect x=\"-100\" y=\"-100\" width=\"200\" height=\"200\" />\n          <g>\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M13.2723 15.4467C12.8235 15.0295 12.2255 14.8208 11.4788 14.8208C10.7396 14.8208 10.1421 15.0295 9.68529 15.4467C9.22843 15.8639 9 16.4089 9 17.0812C9 17.7618 9.23058 18.3189 9.69121 18.7522C10.1518 19.1855 10.7477 19.4022 11.4788 19.4022C12.2179 19.4022 12.8138 19.1877 13.2663 18.7582C13.7194 18.3289 13.9457 17.7699 13.9457 17.0812C13.9457 16.4089 13.721 15.8639 13.2723 15.4467ZM13.2841 24.2359C12.8273 23.819 12.2255 23.61 11.4788 23.61C10.7477 23.61 10.1518 23.8209 9.69121 24.2418C9.23058 24.6633 9 25.206 9 25.8702C9 26.543 9.23058 27.0959 9.69121 27.5294C10.1518 27.9624 10.7477 28.1791 11.4788 28.1791C12.2255 28.1791 12.8273 27.9645 13.2841 27.5354C13.741 27.106 13.9694 26.5511 13.9694 25.8702C13.9694 25.198 13.741 24.6534 13.2841 24.2359Z\"\n            />\n            <path d=\"M21.7333 21.4871C22.3453 21.8873 22.768 22.3537 23.0017 22.8849C23.2351 23.4157 23.352 24.33 23.352 25.6289V27.4133C23.352 28.2331 23.4188 28.7478 23.5529 28.9591C23.6868 29.17 23.9406 29.3126 24.3145 29.3873C24.404 29.411 24.5381 29.4352 24.7168 29.4591C25.6346 29.5941 26.0938 30.0355 26.0938 30.7829C26.0938 31.1491 25.9604 31.443 25.6934 31.666C25.4266 31.8885 25.0706 32 24.6259 32C24.0596 32 23.5116 31.9072 22.9818 31.7221C22.4519 31.5366 22.0131 31.2831 21.6654 30.9609C21.285 30.6143 21.0163 30.167 20.8587 29.6196C20.7008 29.0715 20.622 28.133 20.622 26.8041V25.3647C20.622 23.9068 19.9504 23.0681 18.608 22.8496C18.5513 22.8335 18.5109 22.8253 18.4867 22.8253C18.0984 22.76 17.8111 22.621 17.6251 22.4082C17.4391 22.1955 17.3462 21.8879 17.3462 21.4871C17.3462 21.1353 17.425 20.8573 17.5828 20.653C17.7404 20.4487 17.9932 20.3015 18.3411 20.2114C18.4946 20.1629 18.7172 20.1105 19.0083 20.0541C20.084 19.8523 20.622 19.0532 20.622 17.6567V16.216C20.622 14.9786 20.6827 14.1116 20.8038 13.614C20.9253 13.1168 21.1316 12.6822 21.4228 12.3099C21.7624 11.8976 22.2175 11.5763 22.7877 11.3458C23.3579 11.1153 23.9868 11 24.6742 11C25.103 11 25.4467 11.1115 25.7056 11.3342C25.9643 11.5571 26.0938 11.8506 26.0938 12.2152C26.0938 12.9769 25.6023 13.4346 24.6194 13.5884C24.5298 13.5967 24.4649 13.6047 24.4242 13.6128C24.0181 13.6773 23.7377 13.8246 23.5833 14.0548C23.429 14.2849 23.352 14.8075 23.352 15.6226V17.4024C23.352 18.6182 23.2309 19.5096 22.9894 20.077C22.748 20.6443 22.3291 21.1144 21.7333 21.4871Z\" />\n            <path d=\"M30.0845 14.2755C30.0845 14.1493 30.1284 14.0404 30.2162 13.9488C30.3042 13.8574 30.4077 13.8115 30.5271 13.8115C30.8094 13.8115 31.1532 13.9678 31.5581 14.2802C31.9633 14.5925 32.3979 15.0393 32.8626 15.62C33.5719 16.5101 34.1054 17.4473 34.4634 18.4322C34.8211 19.4167 35.0001 20.4426 35.0001 21.5092C35.0001 22.6782 34.7835 23.8018 34.3504 24.881C33.9171 25.9603 33.2736 26.9768 32.4199 27.9298C32.0557 28.3335 31.7073 28.6451 31.3746 28.8627C31.0418 29.0806 30.753 29.1891 30.5082 29.1891C30.3951 29.1891 30.2963 29.1468 30.2115 29.0617C30.1268 28.9763 30.0845 28.8706 30.0845 28.7439C30.0845 28.6055 30.2377 28.2838 30.5443 27.7786C30.7693 27.4059 30.9443 27.103 31.0694 26.8695C31.5758 25.9225 31.9418 25.023 32.1668 24.171C32.3918 23.3187 32.5045 22.4321 32.5045 21.5092C32.5045 20.6824 32.414 19.8807 32.2326 19.1044C32.051 18.328 31.773 17.5547 31.3977 16.7845C31.1912 16.368 30.921 15.8804 30.5863 15.3218C30.2517 14.7631 30.0845 14.4143 30.0845 14.2755Z\" />\n          </g>\n        </svg>\n      </a>\n      <h1>\n        JavaScript execution visualized{\" \"}\n        <em>&mdash; a teaching purposes experiment</em>\n      </h1>\n    </div>\n  );\n}\n","import React from \"react\";\nimport styles from \"./ProjectInfo.module.scss\";\n\nexport default function ProjectInfo() {\n  return (\n    <div className=\"wrap\">\n      <div className={styles.ProjectInfo}>\n        <h2>What am I looking at?</h2>\n        <p>\n          <strong>A steppable visualization of JS execution.</strong>\n        </p>\n        <p>\n          Scopes, references and execution flow can be visually tracked, and\n          while doing this the relevant syntax is broken down to its tree\n          structure of statements and expressions.{\" \"}\n        </p>\n        <p>\n          This can help people new to programming to understand the{\" \"}\n          <em>mechanical</em> and <em>structured</em> way the computer works\n          when it executes JavaScript code.\n        </p>\n\n        <h3>TODO</h3>\n        <p>Any help is appreciated, BTW!</p>\n        <ul>\n          <li>\n            Make a visually pleasing and guiding object reference graph / scope\n            tree, a better history scrubber, and other UI work.\n          </li>\n          <li>\n            Implement more of the language. The aim is not to implement a\n            complete JavaScript runtime, and neither to make it performant.\n            Rather we just need to support best practices and most often used\n            functionality. The tool is only meant for teaching purposes, and\n            aimed at beginners. If the codebase is readable, that's a bonus for\n            students interested in how the JavaScript runtime operates.\n          </li>\n          <li>\n            Devise the criteria needed to filter the history nodes according to\n            a multi-level detail configuration option. My initial idea was to\n            just select statement-level nodes, or all nodes, but this doesn't\n            work for visualizing function calls, single-expression\n            map/filter/reduce computations, etc. Possible factors might include:\n            AST node type, nesting depth of AST node, etc.\n          </li>\n          <li>\n            Make a configurable \"widget\" version of smaller size, so that it can\n            be embedded in the teaching materials in various forms. For example,\n            as part of prediction-exercises.\n          </li>\n        </ul>\n\n        <h3>Technical details</h3>\n        <p>\n          Can be found @{\" \"}\n          <a href=\"https://github.com/Codaisseur/visualized-execution\">\n            https://github.com/Codaisseur/visualized-execution\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./Viz.module.scss\";\n\nexport default function Viz({\n  step: { node, context, pre, summary, detail },\n  showBuiltins\n}) {\n  return (\n    <div>\n      <p>\n        <em>{summary}</em>\n      </p>\n      <div className={styles.split}>\n        <div className={styles.col}>\n          <Scope\n            context={context}\n            scopeRef={0}\n            current={context.currentScope}\n            showBuiltins={showBuiltins}\n          />\n        </div>\n        <div className={styles.col}>\n          {context.objects.map((obj, i) => {\n            const show = showBuiltins || !obj.builtin;\n            return show ? (\n              <div key={i} style={{ marginBottom: \".4rem\" }}>\n                <div>\n                  object #{i} - {obj.type}\n                </div>\n                <Obj obj={obj} />\n              </div>\n            ) : null;\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Obj({ obj }) {\n  const [showBody, set_showBody] = useState(true);\n\n  return (\n    <div className={styles.obj}>\n      {/* {obj.type === \"array\" && (\n        <>\n          {Object.values(obj.elements).map((value, i) => (\n            <div key={i} className={styles.item}>\n              <span className={styles.kind}>item</span> <Value value={value} />\n            </div>\n          ))}\n        </>\n      )} */}\n      {obj.type === \"function\" && (\n        <>\n          <div className={styles.item}>\n            <span\n              className={styles.kind}\n              style={{ cursor: \"pointer\" }}\n              onClick={() => set_showBody(!showBody)}\n            >\n              {showBody ? \"hide\" : \"show\"} body\n            </span>{\" \"}\n            {showBody && (\n              <pre\n                style={{\n                  margin: \"0 0 0 .4rem\",\n                  display: \"inline-block\",\n                  verticalAlign: \"text-top\"\n                }}\n              >\n                {obj.source}\n              </pre>\n            )}\n          </div>\n        </>\n      )}\n      {Object.values(obj.properties || {}).map((v, i) => (\n        <Var key={i} v={v} />\n      ))}\n    </div>\n  );\n}\n\nfunction Scope({ context, scopeRef, current, showBuiltins }) {\n  const scope = context.scopes[scopeRef];\n  const isCurrent = current === scopeRef;\n  const vars = Object.values(scope.variables);\n\n  const show = showBuiltins || !scope._builtin;\n\n  const shownVars = show\n    ? vars.filter(v => showBuiltins || v.kind !== \"builtin\")\n    : [];\n\n  if (shownVars.length === 0 && scope.children.length === 0) return null;\n\n  const className =\n    shownVars.length === 0 && !show\n      ? \"\"\n      : cx({ [styles.scope]: true, [styles.isCurrent]: isCurrent });\n\n  return (\n    <div className={className}>\n      {shownVars.map((v, i) => (\n        <Var key={i} v={v} />\n      ))}\n      {scope.children.map(childRef => (\n        <div key={childRef}>\n          <Scope\n            context={context}\n            scopeRef={childRef}\n            current={current}\n            showBuiltins={showBuiltins}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction Var({ v: { kind, name, value } }) {\n  return (\n    <div className={styles.var}>\n      <span className={styles.kind}>{kind}</span> {name}{\" \"}\n      {value !== undefined && (\n        <span>\n          {kind === \"return\" ? `` : `= `}\n          <Value value={value} />\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction Value({ value }) {\n  if (typeof value === \"string\") return `\"${value}\"`;\n  if (typeof value === \"object\" && \"object_ref\" in value)\n    return `object #${value.object_ref}`;\n  if (typeof value === \"boolean\") return `${value}`;\n  if (typeof value === \"object\") {\n    console.log(\"object value???\", value);\n    return \"???\";\n  }\n  return value;\n}\n","import React, { useRef, useCallback } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./HistoryTimeline.module.scss\";\n\nexport default function HistoryTimeline({\n  history,\n  value,\n  onChange,\n  runtimeError\n}) {\n  const onKeyDown = useCallback(\n    e => {\n      if (e.keyCode === 37) {\n        onChange(value - 1);\n      } else if (e.keyCode === 39) {\n        onChange(value + 1);\n      }\n    },\n    [value, onChange]\n  );\n\n  const moveData = {};\n  const scrubberRef = useRef();\n\n  const handleMouseDown = useCallback(\n    e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      Object.assign(moveData, {\n        initialMousePos: {\n          x: e.clientX,\n          y: e.clientY\n        },\n        initialValue: value,\n        isMouseDown: true\n      });\n\n      document.addEventListener(\n        \"mouseup\",\n        () => (moveData.isMouseDown = false)\n      );\n      document.addEventListener(\"mousemove\", e => {\n        if (moveData.isMouseDown && scrubberRef.current) {\n          const p = e.clientX / scrubberRef.current.clientWidth;\n\n          const newValue = Math.min(\n            history.length - 1,\n            Math.max(0, Math.round(p * history.length))\n          );\n\n          onChange(newValue);\n        }\n      });\n    },\n    [value, onChange, history, moveData]\n  );\n\n  return (\n    <div>\n      <div\n        className={styles.timeline}\n        onKeyDown={onKeyDown}\n        ref={scrubberRef}\n        onMouseDown={handleMouseDown}\n      >\n        {history.map((step, i) => {\n          return (\n            <div\n              key={i}\n              onClick={e => {\n                e.preventDefault();\n                e.stopPropagation();\n                onChange(i);\n              }}\n              className={cx({\n                [styles.step]: true,\n                [styles.selected]: i === parseInt(value)\n              })}\n            />\n          );\n        })}\n        {runtimeError && (\n          <div className={cx([styles.step, styles.runtimeError])} />\n        )}\n      </div>\n    </div>\n  );\n}\n","export class NotImplemented extends Error {}\nexport class NotSupported extends Error {}\n\nexport class RuntimeError extends Error {\n  constructor(message, node) {\n    super(\n      `${message} (${node.type}${\n        node.loc && !node._builtin\n          ? ` @ ${node.loc.start.line}:${node.loc.start.column}`\n          : ``\n      })`\n    );\n    console.error(\"runtime error\", message, node);\n  }\n}\n","import { parse } from \"@babel/core\";\n\n// I'm gonna have to find a way to do this more elegantly/scalably :D\n\nfunction processBuiltinAST(node) {\n  delete node.loc;\n  node._builtin = true;\n  Object.values(node).forEach(maybeChildNode => {\n    if (\n      maybeChildNode &&\n      typeof maybeChildNode === \"object\" &&\n      \"type\" in maybeChildNode\n    ) {\n      processBuiltinAST(maybeChildNode);\n    } else if (maybeChildNode && maybeChildNode.forEach) {\n      maybeChildNode.forEach(processBuiltinAST);\n    }\n  });\n  return node;\n}\n\n// ArrowFunctionExpression, why not\nconst _mapBuiltin = processBuiltinAST(\n  parse(`callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    arr.push(callback(this[i], i));\n  }\n  return arr;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _filterBuiltin = processBuiltinAST(\n  parse(`callback => {\n  const arr = [];\n  for (let i = 0; i < this.length; i++) {\n    if (callback(this[i], i))\n      arr.push(this[i]);\n  }\n  return arr;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\n// TODO without initial value\nconst _reduceBuiltin = processBuiltinAST(\n  parse(`(callback, acc) => {\n  for (let i = 0; i < this.length; i++) {\n    acc = callback(acc, this[i], i);\n  }\n  return acc;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _pushBuiltin = processBuiltinAST(\n  parse(`x => {\n  this[this.length] = x;\n  this.length = this.length + 1;\n  return this.length;\n}`).program.body[0].expression\n);\n\n// ArrowFunctionExpression, why not\nconst _logBuiltin = processBuiltinAST(\n  parse(`x => {\n  __logs__.push(x);\n}`).program.body[0].expression\n);\n\nexport function makeInitialContext() {\n  const builtin = {\n    objects: []\n  };\n\n  const _log =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      body: _logBuiltin.body,\n      params: _logBuiltin.params,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _console =\n    builtin.objects.push({\n      builtin: true,\n      type: \"object\",\n      properties: {\n        log: { name: \"log\", kind: \"property\", value: { object_ref: _log } }\n      }\n    }) - 1;\n\n  const _Object =\n    builtin.objects.push({ builtin: true, type: \"object\", properties: {} }) - 1;\n\n  const _map =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      body: _mapBuiltin.body,\n      params: _mapBuiltin.params,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _filter =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      body: _filterBuiltin.body,\n      params: _filterBuiltin.params,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _reduce =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      body: _reduceBuiltin.body,\n      params: _reduceBuiltin.params,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _push =\n    builtin.objects.push({\n      builtin: true,\n      type: \"function\",\n      body: _pushBuiltin.body,\n      params: _pushBuiltin.params,\n      source: \"(builtin)\"\n    }) - 1;\n\n  const _Array =\n    builtin.objects.push({\n      builtin: true,\n      type: \"array\",\n      properties: {\n        map: { name: \"map\", kind: \"property\", value: { object_ref: _map } },\n        filter: {\n          name: \"filter\",\n          kind: \"property\",\n          value: { object_ref: _filter }\n        },\n        reduce: {\n          name: \"reduce\",\n          kind: \"property\",\n          value: { object_ref: _reduce }\n        },\n        push: { name: \"push\", kind: \"property\", value: { object_ref: _push } }\n      },\n      prototype: _Object\n    }) - 1;\n\n  const __logs__ = builtin.objects.push({\n    builtin: true,\n    type: \"array\",\n    prototype: _Array,\n    properties: {}\n  });\n\n  return {\n    scopes: [\n      {\n        variables: {\n          Object: {\n            kind: \"builtin\",\n            name: \"Object\",\n            value: { object_ref: _Object }\n          },\n          Array: {\n            kind: \"builtin\",\n            name: \"Array\",\n            value: { object_ref: _Array }\n          },\n          __logs__: {\n            kind: \"builtin\",\n            name: \"__logs__\",\n            value: { object_ref: __logs__ }\n          },\n          console: {\n            kind: \"builtin\",\n            name: \"console\",\n            value: { object_ref: _console }\n          }\n        },\n        children: []\n      }\n    ],\n    objects: builtin.objects,\n    currentScope: 0,\n    sourceCode: \"\",\n    getSourceCodeRange(node) {\n      if (node._builtin) {\n        return \"(builtin)\";\n      } else if (!node.loc) {\n        return \"(no loc)\";\n      } else {\n        const loc = node.loc;\n        const lines = this.sourceCode\n          .split(\"\\n\")\n          .slice(loc.start.line - 1, loc.end.line);\n\n        if (lines.length === 1) {\n          lines[0] = lines[0].slice(loc.start.column, loc.end.column);\n        } else if (lines.length > 0) {\n          lines[0] = lines[0].slice(loc.start.column);\n          lines[lines.length - 1] = lines[lines.length - 1].slice(\n            0,\n            loc.end.column\n          );\n        }\n\n        return lines.join(\"\\n\");\n      }\n    }\n  };\n}\n","export class Return {\n  constructor(value) {\n    this.value = value;\n  }\n}\n\n// Returning from a block of code is somewhat\n//  uncompositional. The simplest way to deal\n//  with it, instead of expanding the semantics,\n//  is leveraging the fact that the interpreter\n//  language, i.e. JS, already has this kind of\n//  non-local flow feature in the form of throwing\n//  :D\nReturn.from = function*(mkgen) {\n  try {\n    return yield* mkgen();\n  } catch (e) {\n    if (e instanceof Return) {\n      return e.value;\n    } else {\n      throw e;\n    }\n  }\n};\n","import { NotImplemented, RuntimeError } from \"./errors\";\nimport { evaluate } from \"./evaluate\";\n\nfunction lookup(context, name, ref) {\n  const scope = context.scopes[ref];\n  if (scope.variables[name]) {\n    return ref;\n  } else if (scope.parent !== undefined) {\n    return lookup(context, name, scope.parent);\n  } else {\n    return null;\n  }\n}\n\n// Note: `name` could be non-primitive, and should actually\n//  be propertly coerced and stuff...\nfunction lookupProperty(context, name, object_ref) {\n  const object = context.objects[object_ref];\n  if (object.properties[name] !== undefined) {\n    return object_ref;\n  } else if (object.prototype !== undefined) {\n    return lookupProperty(context, name, object.prototype);\n  } else {\n    return null;\n  }\n}\n\nexport const locators = {};\n\n// locate: (Node, Context) => { scope_ref|object_ref, name, site }\nexport function* locate(node, context, namedArgs = {}) {\n  const locator = locators[node.type];\n  if (!locator) {\n    console.error(\n      `Couldn't find locator for AST node of type: ${node.type}`,\n      node\n    );\n    throw new NotImplemented(\n      `Couldn't find locator for AST node of type: ${node.type}`\n    );\n  }\n  return yield* locator(node, context, namedArgs);\n}\n\nlocators.Identifier = function*(node, context) {\n  const defining_scope_ref = lookup(context, node.name, context.currentScope);\n  if (defining_scope_ref === null)\n    throw new RuntimeError(\n      `variable ${node.name} is not defined [lookup identifier]`,\n      node\n    );\n\n  yield {\n    context,\n    node,\n    summary: `looked up variable ${node.name}`,\n    detail: 2\n  };\n  return {\n    scope_ref: defining_scope_ref,\n    name: node.name,\n    site: context.scopes[defining_scope_ref].variables[node.name]\n  };\n};\n\nlocators.MemberExpression = function*(\n  node,\n  context,\n  { makeIfNonexistent = false }\n) {\n  const objectValue = yield* evaluate(node.object, context);\n  if (\n    typeof objectValue.value !== \"object\" ||\n    !(\"object_ref\" in objectValue.value)\n  )\n    // (actually though, you can do things like `(2).toFixed(2)`)\n    throw new RuntimeError(\n      \"cannot use memberexpression for non-object\",\n      node.object\n    );\n  const { object_ref } = objectValue.value;\n\n  let propertyName;\n  if (node.computed) {\n    propertyName = (yield* evaluate(node.property, context)).value;\n  } else {\n    if (node.property.type !== \"Identifier\") throw new NotImplemented();\n    propertyName = node.property.name;\n  }\n\n  const defining_object_ref = lookupProperty(context, propertyName, object_ref);\n  if (defining_object_ref === null) {\n    if (makeIfNonexistent) {\n      const site = (context.objects[object_ref].properties[propertyName] = {\n        name: propertyName,\n        kind: \"property\"\n      });\n      yield {\n        context,\n        node,\n        summary: `made new property ${propertyName}`,\n        detail: 2\n      };\n      return {\n        accessing_object_ref: object_ref,\n        object_ref,\n        name: propertyName,\n        site\n      };\n    } else {\n      return null;\n    }\n  }\n\n  yield {\n    context,\n    node,\n    summary: `looked up property ${node.name}`,\n    detail: 2\n  };\n  return {\n    accessing_object_ref: object_ref,\n    object_ref: defining_object_ref,\n    name: propertyName,\n    site: context.objects[defining_object_ref].properties[propertyName]\n  };\n};\n","import { NotImplemented, NotSupported, RuntimeError } from \"./errors\";\nimport { makeInitialContext } from \"./context\";\nimport { Return } from \"./return\";\nimport { locate } from \"./locate\";\n\nexport const evaluators = {};\n\nexport function* evaluate(\n  node,\n  context = makeInitialContext(),\n  namedArgs = {}\n) {\n  const evaluator = evaluators[node.type];\n  if (!evaluator) {\n    console.error(\n      `Couldn't find evaluator for AST node of type: ${node.type}`,\n      node\n    );\n    throw new NotImplemented(\n      `Couldn't find evaluator for AST node of type: ${node.type}`\n    );\n  }\n  return yield* evaluator(node, context, namedArgs);\n}\n\nfunction applyOperator(op, a, b) {\n  if (op === \"+\") return a + b;\n  if (op === \"-\") return a - b;\n  if (op === \"*\") return a * b;\n  if (op === \"&&\") return a && b;\n  if (op === \"||\") return a || b;\n  if (op === \"<\") return a < b;\n  if (op === \"<=\") return a <= b;\n  if (op === \"==\") return a == b;\n  if (op === \">\") return a > b;\n  if (op === \">=\") return a >= b;\n  throw new NotImplemented(`operator not implemented: ${op}`);\n}\n\nevaluators.File = function*(node, context) {\n  yield* evaluate(node.program, context);\n};\n\nevaluators.Program = function*(node, context) {\n  // TODO actually extract function definitions etc.\n  for (const statement of node.body) {\n    yield* evaluate(statement, context);\n  }\n};\n\nevaluators.BlockStatement = function*(node, context, { skipScope }) {\n  if (!skipScope) {\n    const [blockScope, blockScopeRef] = makeNewScope(context);\n    context = { ...context, currentScope: blockScopeRef };\n  }\n\n  for (const statement of node.body) {\n    yield* evaluate(statement, context);\n  }\n};\n\nevaluators.ReturnStatement = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `compute return value`,\n    detail: 1\n  };\n  const returnValue = yield* evaluate(node.argument, context);\n  context.scopes[context.currentScope].variables[\"[[return]]\"] = {\n    kind: \"return\",\n    value: returnValue.value\n  };\n  yield { context, node, summary: `computed return value`, detail: 1 };\n  throw new Return(returnValue);\n};\n\nfunction makeNewScope(\n  context,\n  {\n    parentScope = context.currentScope,\n    _builtin = context.scopes[context.currentScope]._builtin\n  } = {}\n) {\n  // Create an execution scope\n  const scope = {\n    parent: parentScope,\n    _builtin,\n    children: [],\n    variables: {}\n  };\n  const scope_ref = context.scopes.push(scope) - 1;\n  if (context.scopes[parentScope]) {\n    context.scopes[parentScope].children.push(scope_ref);\n  } // note: builtin methods don't have a defining scope\n\n  return [scope, scope_ref];\n}\n\nfunction* invokeFunction(\n  { definingScope, arrow, params, body },\n  args,\n  newThisBinding,\n  context\n) {\n  // Create an execution scope\n  const [executionScope, executionScopeRef] = makeNewScope(context, {\n    parentScope: definingScope,\n    _builtin: !!body._builtin // the !! is very important, not very elegant\n  });\n\n  // Apply new this binding\n  if (newThisBinding) {\n    executionScope.variables[newThisBinding.name] = newThisBinding;\n  }\n\n  // Populate with given arguments\n  for (const [i, param] of params.entries()) {\n    if (param.type !== \"Identifier\")\n      throw new NotImplemented(\n        `Sorry, can't deal with ${param.type} params yet :(`\n      );\n\n    executionScope.variables[param.name] = {\n      name: param.name,\n      kind: \"param\",\n      value: args[i].value\n    };\n  }\n\n  const executionContext = { ...context, currentScope: executionScopeRef };\n  if (body.type === \"BlockStatement\") {\n    return yield* Return.from(function*() {\n      return yield* evaluate(body, executionContext, {\n        skipScope: true\n      });\n    });\n  } else {\n    return yield* evaluate(body, executionContext);\n  }\n}\n\nevaluators.CallExpression = function*(node, context) {\n  const { callee, arguments: argnodes } = node;\n  yield { context, node, pre: true, summary: `evaluate call`, detail: 2 };\n\n  // Second, lookup the function\n  const fnValue = yield* evaluate(callee, context);\n  if (!(\"object_ref\" in fnValue.value))\n    throw new RuntimeError(`Cannot call non-function #1`, callee);\n  const fn = context.objects[fnValue.value.object_ref];\n  if (!fn || fn.type !== \"function\")\n    throw new RuntimeError(`Cannot call non-function #2`, callee);\n\n  let newThisBinding;\n  if (!fn.arrow) {\n    if (callee.type === \"MemberExpression\") {\n      // the object in the member expression, haha :D\n      const { accessing_object_ref: object_ref } = fnValue;\n      newThisBinding = { kind: \"this\", name: \"this\", value: { object_ref } };\n    } else {\n      newThisBinding = { kind: \"this\", name: \"this\", value: undefined };\n    }\n  }\n\n  // First, evaluate arguments\n  const args = [];\n  for (const argnode of argnodes) {\n    args.push(yield* evaluate(argnode, context));\n  }\n\n  // Finally, invoke the function\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `invoke function`,\n    detail: 2\n  };\n  const ret = yield* invokeFunction(fn, args, newThisBinding, context);\n  yield { context, node, summary: `evaluated call`, detail: 2 };\n  return ret;\n};\n\nevaluators.FunctionDeclaration = function*(node, context) {\n  if (node.async || node.generator)\n    throw new NotSupported(`Async and generator functions are not supported`);\n  if (!node.id || node.id.type !== \"Identifier\")\n    throw new RuntimeError(`should not happen`, node.id);\n\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `declare function ${node.id.name}`,\n    detail: 1\n  };\n  const scope = context.scopes[context.currentScope];\n  const fn = {\n    type: \"function\",\n    arrow: false,\n    definingScope: context.currentScope,\n    params: node.params,\n    body: node.body,\n    source: context.getSourceCodeRange(node),\n    properties: {}\n  };\n  const object_ref = context.objects.push(fn) - 1;\n  scope.variables[node.id.name] = {\n    name: node.id.name,\n    kind: \"fundecl\",\n    value: { object_ref }\n  };\n  yield {\n    context,\n    node,\n    summary: `declared function ${node.id.name}`,\n    detail: 1\n  };\n};\n\nevaluators.ObjectProperty = function*(node, context, { object_ref }) {\n  const { key } = node;\n  if (key.type !== \"Identifier\")\n    throw new NotImplemented(\n      `Computed or otherwise property keys are sadly not implemented yet :(`\n    );\n\n  const obj = context.objects[object_ref];\n  const value = yield* evaluate(node.value, context);\n  obj.properties[key.name] = { name: key.name, kind: \"property\", value };\n};\n\nevaluators.ObjectExpression = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate obj expression`,\n    detail: 2\n  };\n  const obj = {\n    type: \"object\",\n    prototype: context.scopes[0].variables.Object.value.object_ref,\n    properties: {}\n  };\n  const object_ref = context.objects.push(obj) - 1;\n  for (const property of node.properties) {\n    yield* evaluate(property, context, { object_ref });\n  }\n  yield { context, node, summary: `evaluated obj expression`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.ArrayExpression = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate array expression`,\n    detail: 2\n  };\n  const arr = {\n    type: \"array\",\n    prototype: context.scopes[0].variables.Array.value.object_ref,\n    properties: {}\n  };\n  const object_ref = context.objects.push(arr) - 1;\n  for (let i = 0; i < node.elements.length; i++) {\n    arr.properties[i] = {\n      name: i,\n      kind: \"property\",\n      value: (yield* evaluate(node.elements[i], context)).value\n    };\n  }\n  arr.properties.length = {\n    name: \"length\",\n    kind: \"property\",\n    value: node.elements.length\n  };\n  yield { context, node, summary: `evaluated array expression`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.ArrowFunctionExpression = function*(node, context) {\n  if (node.async || node.generator)\n    throw new NotSupported(`Async and generator functions are not supported`);\n\n  const fn = {\n    type: \"function\",\n    arrow: true,\n    definingScope: context.currentScope,\n    params: node.params,\n    body: node.body,\n    source: context.getSourceCodeRange(node),\n    properties: {}\n  };\n  const object_ref = context.objects.push(fn) - 1;\n  yield { context, node, summary: `evaluated arrow function`, detail: 2 };\n  return { value: { object_ref } };\n};\n\nevaluators.UpdateExpression = function*(node, context) {\n  const { operator, prefix, loc, argument } = node;\n\n  if (operator !== \"++\" && operator !== \"--\") {\n    throw new NotSupported(`update expression with operator ${operator}`);\n  }\n\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate update expression`,\n    detail: 2\n  };\n\n  let result;\n  if (prefix) {\n    result = yield* evaluate(argument, context);\n  }\n\n  yield* evaluate(\n    {\n      type: \"AssignmentExpression\",\n      _builtin: true,\n      operator: \"=\",\n      left: argument,\n      right: {\n        type: \"BinaryExpression\",\n        _builtin: true,\n        operator: operator[0],\n        left: argument,\n        right: {\n          type: \"NumericLiteral\",\n          _builtin: true,\n          value: 1\n        }\n      }\n    },\n    context\n  );\n\n  if (!prefix) {\n    result = yield* evaluate(argument, context);\n  }\n\n  yield { context, node, summary: `evaluated update expression`, detail: 2 };\n  return result;\n};\n\nevaluators.BinaryExpression = function*(node, context) {\n  const { left, right } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `evaluate binary expression`,\n    detail: 2\n  };\n  const leftValue = (yield* evaluate(left, context)).value;\n  if (node.operator === \"&&\" && !leftValue) return leftValue;\n  if (node.operator === \"||\" && leftValue) return leftValue;\n  const rightValue = (yield* evaluate(right, context)).value;\n  yield {\n    context,\n    node,\n    summary: `evaluated binary expression`,\n    detail: 2\n  };\n  return { value: applyOperator(node.operator, leftValue, rightValue) };\n};\n\nevaluators.ThisExpression = function*(node, context) {\n  return yield* evaluate(\n    {\n      ...node,\n      type: \"Identifier\",\n      name: \"this\"\n    },\n    context\n  );\n};\n\nevaluators.Identifier = function*(node, context) {\n  if (node.name === \"undefined\") {\n    yield (context, { node, summary: `evaluated undefined`, detail: 2 });\n    return { value: undefined };\n  }\n\n  const { site } = yield* locate(node, context);\n  yield { context, node, summary: `evaluated variable`, detail: 2 };\n  return { value: site.value };\n};\n\nevaluators.MemberExpression = function*(node, context) {\n  const location = yield* locate(node, context);\n  if (!location) {\n    yield { context, node, summary: `property does not exist`, detail: 2 };\n    return { value: undefined };\n  }\n  const { site, accessing_object_ref } = location;\n  yield {\n    context,\n    node,\n    summary: `evaluated property to ${site.value}`,\n    detail: 2\n  };\n  return { value: site.value, accessing_object_ref };\n};\n\nevaluators.AssignmentExpression = function*(node, context) {\n  const { left, right } = node;\n\n  if (node.operator !== \"=\")\n    throw new NotSupported(`assignment with operator ${node.operator}`);\n\n  // yield ({context,  node, pre: true, summary: `assign ${left.name}`, detail: 2 });\n  const { site } = yield* locate(left, context, { makeIfNonexistent: true });\n  site.value = (yield* evaluate(right, context)).value;\n  // yield ({context,  node, summary: `assigned ${left.name}`, detail: 2 });\n};\n\nfunction* checkForTest(test, context) {\n  yield {\n    context,\n    node: test,\n    pre: true,\n    detail: 1,\n    summary: `for test`\n  };\n  const { value } = yield* evaluate(test, context);\n  yield {\n    context,\n    node: test,\n    detail: 1,\n    summary: `for test checked`\n  };\n  return value;\n}\n\n// (actually, es5 for-statements are way more complicated)\nevaluators.ForStatement = function*(node, context) {\n  const { init, test, update, body } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    detail: 1,\n    summary: `encountered for-loop`\n  };\n  const [forScope, forScopeRef] = makeNewScope(context);\n  const scopedContext = { ...context, currentScope: forScopeRef };\n\n  yield* evaluate(init, scopedContext);\n\n  while (yield* checkForTest(test, scopedContext)) {\n    yield* evaluate(body, scopedContext);\n    yield {\n      context,\n      node: update,\n      pre: true,\n      detail: 1,\n      summary: `for update`\n    };\n    yield* evaluate(update, scopedContext);\n    yield {\n      context,\n      node: update,\n      detail: 1,\n      summary: `for update - done`\n    };\n  }\n\n  yield {\n    context,\n    node,\n    detail: 1,\n    summary: `completed for-loop`\n  };\n};\n\nevaluators.IfStatement = function*(node, context) {\n  const { test, consequent, alternate } = node;\n  yield {\n    context,\n    node,\n    pre: true,\n    detail: 1,\n    summary: `encountered if-statement`\n  };\n  const [ifBodyScope, ifBodyScopeRef] = makeNewScope(context);\n  const scopedContext = { ...context, currentScope: ifBodyScopeRef };\n\n  const b = (yield* evaluate(test, scopedContext)).value;\n\n  if (b) {\n    yield* evaluate(consequent, scopedContext);\n  } else if (alternate) {\n    yield* evaluate(alternate, scopedContext);\n  }\n\n  yield {\n    context,\n    node,\n    detail: 1,\n    summary: `completed if-statement`\n  };\n};\n\nevaluators.ExpressionStatement = function*(node, context) {\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `compute expression statement`,\n    detail: 1\n  };\n  yield* evaluate(node.expression, context);\n  yield {\n    context,\n    node,\n    summary: `computed expression statement`,\n    detail: 1\n  };\n};\n\nevaluators.VariableDeclaration = function*(node, context) {\n  const kind = node.kind;\n  yield {\n    context,\n    node,\n    pre: true,\n    summary: `${kind} variable declaration`,\n    detail: 1\n  };\n  for (const declaration of node.declarations) {\n    yield* evaluate(declaration, context, { kind });\n  }\n  yield {\n    context,\n    node,\n    summary: `completed ${kind} variable declaration`,\n    detail: 1\n  };\n};\n\nevaluators.VariableDeclarator = function*(node, context, { kind }) {\n  if (kind !== \"let\" && kind !== \"const\")\n    throw new NotSupported(`only let/const supported, not ${kind}`);\n  if (node.id.type !== \"Identifier\")\n    throw new NotImplemented(`Not yet able to declare non-identifiers :(`);\n\n  const scope = context.scopes[context.currentScope];\n  const name = node.id.name;\n  scope.variables[name] = { name, kind };\n  yield { context, node: node.id, summary: `declared ${name}`, detail: 2 };\n  if (node.init) {\n    const value = (yield* evaluate(node.init, context)).value;\n    scope.variables[name].value = value;\n    yield { context, node, summary: `initialized ${name}`, detail: 2 };\n  }\n};\n\nevaluators.NullLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated null`, detail: 2 };\n  return { value: null };\n};\n\nevaluators.StringLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated \"${node.value}\"`, detail: 2 };\n  return { value: node.value };\n};\n\nevaluators.NumericLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated ${node.value}`, detail: 2 };\n  return { value: node.value };\n};\n\nevaluators.BooleanLiteral = function*(node, context) {\n  yield { context, node, summary: `evaluated ${node.value}`, detail: 2 };\n  return { value: node.value };\n};\n","import { parse } from \"@babel/parser\";\nimport deepcopy from \"deepcopy\";\nimport { RuntimeError } from \"./errors\";\nimport { makeInitialContext } from \"./context\";\nimport { evaluate } from \"./evaluate\";\n\nexport default function(code) {\n  const ast = parse(code);\n  const context = makeInitialContext();\n  context.sourceCode = code;\n  const runtime = evaluate(ast, context);\n\n  const history = [];\n  let i = 0;\n  try {\n    for (const report of runtime) {\n      if (!report.node._builtin) {\n        history.push(deepcopy(report));\n      }\n      if (i++ > 1000) {\n        console.error(\"too many steps\", history);\n        return { history, runtimeError: new Error(\"too many steps!\") };\n        // throw new Error(\"too many steps!\");\n      }\n    }\n  } catch (e) {\n    if (e instanceof RuntimeError) {\n      // noop\n      console.log(\"caught runtime error:\", e);\n      return { history, runtimeError: e };\n    } else throw e;\n  }\n\n  return { history };\n}\n","import React, { useEffect, useRef, useMemo } from \"react\";\nimport { stripIndent } from \"common-tags\";\nimport createPersistedState from \"use-persisted-state\";\nimport CodeMirror from \"./codemirror/codemirror\";\nimport styles from \"./App.module.scss\";\nimport Toolbar from \"./components/Toolbar\";\nimport ProjectInfo from \"./components/ProjectInfo\";\n\nimport Viz from \"./Viz\";\nimport HistoryTimeline from \"./HistoryTimeline\";\nimport record from \"./lib/record\";\n\nconst usePersistedCode = createPersistedState(\"code\");\nconst usePersistedMaxDetail = createPersistedState(\"maxdetail\");\nconst usePersistedStepno = createPersistedState(\"stepno\");\nconst usePersistedShowBuiltins = createPersistedState(\"showbuiltins\");\n\nconst PRESETS = [\n  {\n    title: \"just a variable\",\n    code: stripIndent`\n      let n = 42;\n    `\n  },\n  {\n    title: \"array push and access\",\n    code: stripIndent`\n      const fruits = [\"pear\", \"banana\"];\n      fruits.push(\"jello\");\n      const jello = fruits[fruits.length - 1];\n    `\n  },\n  {\n    title: \"a closure and correct scoping\",\n    code: stripIndent`\n      let adjective = \"beautiful\";\n      function make(a) {\n        return thing => {\n          return a + \" \" + adjective + \" \" + thing;\n        };\n      }\n      const definite = make(\"the\");\n      const s1 = definite(\"variable\");\n      adjective = \"nested\";\n      const s2 = definite(\"scope\");\n    `\n  },\n  {\n    title: \"single map+filter+reduce expression with arrow functions\",\n    code: stripIndent`\n      const result = [10, 2, 3, 6]\n        .map(n => n - 2)\n        .filter(n => n > 3)\n        .reduce((a, b) => a + b, 0);\n    `\n  }\n];\n\nconst CM_OPTS = {\n  mode: \"text/javascript\",\n  theme: \"jsviz\",\n  lineNumbers: false,\n  smartIndent: true,\n  tabSize: 2,\n  indentWithTabs: false,\n  styleSelectedText: true\n};\n\nexport default function App() {\n  const inst = useRef({ editor: null, marker: null });\n  const [code, setCode] = usePersistedCode(`const result = [10, 2, 3, 6]\n  .map(n => n - 2)\n  .filter(n => n > 3)\n  .reduce((a, b) => a + b, 0);`);\n  const { error, runtimeError, history } = useMemo(() => {\n    try {\n      return record(code);\n    } catch (error) {\n      console.error(error);\n      return { error };\n    }\n  }, [code]);\n\n  const [showBuiltins, setShowBuiltins] = usePersistedShowBuiltins(false);\n  const [_stepno, setStepno] = usePersistedStepno(0);\n  const [maxDetail, setMaxDetail] = usePersistedMaxDetail(2);\n\n  const visibleHistory =\n    history && history.length > 0\n      ? history.filter(({ detail }) => detail <= maxDetail)\n      : null;\n\n  const stepno = Math.max(\n    0,\n    Math.min(_stepno, (visibleHistory || []).length - 1)\n  );\n\n  // step = { context, node, pre, summary, detail }\n  const step = visibleHistory ? visibleHistory[stepno] : null;\n\n  useEffect(() => {\n    if (!inst.current.editor) return;\n    inst.current.marker && inst.current.marker.clear();\n\n    if (!step) return;\n    const doc = inst.current.editor.getDoc();\n    const loc = step.node.loc;\n    if (loc) {\n      inst.current.marker = doc.markText(\n        { line: loc.start.line - 1, ch: loc.start.column },\n        { line: loc.end.line - 1, ch: loc.end.column },\n        {\n          className: step.pre ? styles.markedPre : styles.markedPost\n        }\n      );\n    }\n  }, [inst, step]);\n\n  return (\n    <div className=\"app\">\n      <Toolbar />\n      <div className={styles.code}>\n        <CodeMirror\n          className=\"editable\"\n          options={CM_OPTS}\n          editorDidMount={editor => {\n            inst.current.editor = editor;\n          }}\n          value={code}\n          onBeforeChange={(editor, data, value) => {\n            setCode(value || \"\");\n          }}\n        />\n      </div>\n      {(error || !visibleHistory) && <hr className={styles.emptyDivider} />}\n      {error && (\n        <div className={styles.main}>\n          <div className={styles.error}>\n            <p>Compile error: {error.message}</p>\n          </div>\n        </div>\n      )}\n      {visibleHistory && (\n        <div>\n          <HistoryTimeline\n            value={stepno}\n            onChange={setStepno}\n            history={visibleHistory}\n            runtimeError={runtimeError}\n          />\n          <div className={styles.main}>\n            <div>\n              <select\n                value=\"\"\n                onChange={e => {\n                  const preset = PRESETS.find(\n                    ({ title }) => title === e.target.value\n                  );\n                  if (preset) setCode(preset.code);\n                }}\n              >\n                <option value=\"\">-- Select a code preset --</option>\n                {PRESETS.map(({ title, code }) => (\n                  <option key={title}>{title}</option>\n                ))}\n              </select>\n              {\" / \"}\n              <label>\n                Expression detail?{\" \"}\n                <input\n                  type=\"checkbox\"\n                  checked={maxDetail === 2}\n                  onChange={() => setMaxDetail(3 - maxDetail)}\n                />\n              </label>\n              {\" / \"}\n              <label>\n                Show builtins?{\" \"}\n                <input\n                  type=\"checkbox\"\n                  checked={showBuiltins}\n                  onChange={() => setShowBuiltins(!showBuiltins)}\n                />\n              </label>\n              {\" / \"}\n              <label>\n                Step{\" \"}\n                <input\n                  min={0}\n                  max={visibleHistory.length - 1}\n                  step={1}\n                  value={stepno}\n                  onChange={e => setStepno(e.target.value)}\n                  type=\"range\"\n                />\n              </label>\n            </div>\n            <Viz step={step} showBuiltins={showBuiltins} />\n            {runtimeError && (\n              <div className={styles.error}>\n                <p>Runtime error: {runtimeError.message}</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      <ProjectInfo />\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\nimport \"./assets/global.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nrender(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Toolbar_header__3uh4C\",\"logo\":\"Toolbar_logo__2tkRI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"obj\":\"Viz_obj__1yjuX\",\"scope\":\"Viz_scope__1teSn\",\"isCurrent\":\"Viz_isCurrent__2rgxg\",\"item\":\"Viz_item__WmSV6\",\"var\":\"Viz_var__zoTKZ\",\"kind\":\"Viz_kind__e2xsO\",\"split\":\"Viz_split__3PUzN\",\"col\":\"Viz_col__2Iyi6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProjectInfo\":\"ProjectInfo_ProjectInfo__2IkWh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"code\":\"App_code__fmNFS\",\"markedPre\":\"App_markedPre__3_KTD\",\"markedPost\":\"App_markedPost__2_ohD\",\"emptyDivider\":\"App_emptyDivider__1s_av\",\"main\":\"App_main__uN9ca\",\"error\":\"App_error__1LS0k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeline\":\"HistoryTimeline_timeline__2U4zc\",\"step\":\"HistoryTimeline_step__1GcUm\",\"selected\":\"HistoryTimeline_selected__2AZxZ\",\"runtimeError\":\"HistoryTimeline_runtimeError__3H9Eg\"};"],"sourceRoot":""}